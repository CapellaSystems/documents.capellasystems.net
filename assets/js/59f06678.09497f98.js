"use strict";(self.webpackChunkcapella_documentation=self.webpackChunkcapella_documentation||[]).push([[3590],{8453:(e,s,r)=>{r.d(s,{R:()=>l,x:()=>o});var n=r(6540);const t={},i=n.createContext(t);function l(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(i.Provider,{value:s},e.children)}},9096:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"Cambria_FTC/Tutorials/external-postgresql","title":"Using External PostgreSQL with Cambria FTC and Cluster","description":"Introduction","source":"@site/docs/Cambria_FTC/04-Tutorials/FTC_Cluster_External_PostgreSQL_index.md","sourceDirName":"Cambria_FTC/04-Tutorials","slug":"/Cambria_FTC/Tutorials/external-postgresql","permalink":"/docs/Cambria_FTC/Tutorials/external-postgresql","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"external-postgresql","title":"Using External PostgreSQL with Cambria FTC and Cluster","sidebar_position":1},"sidebar":"FTCSidebar","previous":{"title":"Cambria Cluster CloudExtend User Manual","permalink":"/docs/Cambria_FTC/Tutorials/Cambria_Cluster_CloudExtend_User_Manual/"},"next":{"title":"AMI Creation and Editing","permalink":"/docs/Cambria_FTC/Tutorials/AMI_Creation_and_Editing/"}}');var t=r(4848),i=r(8453);const l={id:"external-postgresql",title:"Using External PostgreSQL with Cambria FTC and Cluster",sidebar_position:1},o="Cambria FTC/Cluster Guide to Using External PostgreSQL",d={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Steps for Using an External PostgreSQL with FTC/Cluster",id:"steps-for-using-an-external-postgresql-with-ftccluster",level:2},{value:"1. Install PostgreSQL",id:"1-install-postgresql",level:3},{value:"2. Install FTC",id:"2-install-ftc",level:3},{value:"3. Update the Windows Registry",id:"3-update-the-windows-registry",level:3},{value:"<strong>Required Values</strong>",id:"required-values",level:4},{value:"<strong>Optional Keys</strong>",id:"optional-keys",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2}];function a(e){const s={blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"cambria-ftccluster-guide-to-using-external-postgresql",children:"Cambria FTC/Cluster Guide to Using External PostgreSQL"})}),"\n",(0,t.jsx)(s.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsxs)(s.p,{children:["By default, ",(0,t.jsx)(s.strong,{children:"Cambria FTC/Cluster"})," installs ",(0,t.jsx)(s.strong,{children:"PostgreSQL"})," locally on the system disk.",(0,t.jsx)(s.br,{}),"\n","In some environments, this may not be allowed \u2014 for example when installation into ",(0,t.jsx)(s.strong,{children:"Program Files"})," is required due to system policies, security restrictions, or disk-management rules."]}),"\n",(0,t.jsxs)(s.p,{children:["In these cases, you can configure FTC / Cluster to use an ",(0,t.jsx)(s.strong,{children:"externally installed PostgreSQL instance"})," instead of the bundled one."]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Disclaimer:"}),(0,t.jsx)(s.br,{}),"\n","FTC and Cluster do not officially support externally installed PostgreSQL instances.",(0,t.jsx)(s.br,{}),"\n","Certain features will not function as expected:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Cluster redundancy"})," will not work (you will receive an error if you try to enable it)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Automatic PostgreSQL upgrades"})," will not occur \u2014 you must perform upgrades manually.",(0,t.jsx)(s.br,{}),"\n","Capella will provide advance notice for any required database version changes."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Administrative knowledge"})," is required to complete setup, including familiarity with:","\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Windows UAC"}),"\n",(0,t.jsx)(s.li,{children:"Windows Registry"}),"\n",(0,t.jsx)(s.li,{children:"PostgreSQL command-line tools"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["The ",(0,t.jsx)(s.strong,{children:"PostgreSQL bin"})," folder must be ",(0,t.jsx)(s.strong,{children:"readable and executable"})," by the ",(0,t.jsx)(s.em,{children:"Cambria FTC/Cluster service"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["The ",(0,t.jsx)(s.strong,{children:"PostgreSQL data"})," folder must be ",(0,t.jsx)(s.strong,{children:"fully controllable"})," by the ",(0,t.jsx)(s.em,{children:"Cambria Cluster service"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["A ",(0,t.jsx)(s.strong,{children:"compatible PostgreSQL version"})," must be properly installed and configured.",(0,t.jsx)(s.br,{}),"\n","Registry keys must be updated according to the instructions below."]}),"\n",(0,t.jsxs)(s.li,{children:["The ",(0,t.jsx)(s.strong,{children:"PostgreSQL password"})," will be visible in the Windows Registry."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"steps-for-using-an-external-postgresql-with-ftccluster",children:"Steps for Using an External PostgreSQL with FTC/Cluster"}),"\n",(0,t.jsx)(s.h3,{id:"1-install-postgresql",children:"1. Install PostgreSQL"}),"\n",(0,t.jsx)(s.p,{children:"Install a compatible version of PostgreSQL either:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Externally, or"}),"\n",(0,t.jsxs)(s.li,{children:["Inside the ",(0,t.jsx)(s.code,{children:"FTC/Cluster Bin"})," folder."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"2-install-ftc",children:"2. Install FTC"}),"\n",(0,t.jsx)(s.p,{children:"Proceed with the normal FTC installation."}),"\n",(0,t.jsx)(s.h3,{id:"3-update-the-windows-registry",children:"3. Update the Windows Registry"}),"\n",(0,t.jsx)(s.p,{children:"Modify the following registry entries under:"}),"\n",(0,t.jsx)(s.p,{children:"Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\CAPELLA\\CAMBRIA"}),"\n",(0,t.jsx)(s.h4,{id:"required-values",children:(0,t.jsx)(s.strong,{children:"Required Values"})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Key"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Example Value"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"cpPostgresRootDir"})}),(0,t.jsx)(s.td,{children:"String"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"C:\\Program Files\\PostgreSQL\\14"})}),(0,t.jsx)(s.td,{children:"Root directory of the PostgreSQL installation"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"cpPostgresPort"})}),(0,t.jsx)(s.td,{children:"DWORD (Decimal)"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"5434"})}),(0,t.jsx)(s.td,{children:"Port used by PostgreSQL (must match your installation)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"cpPostgresPassword"})}),(0,t.jsx)(s.td,{children:"String"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"1234"})}),(0,t.jsx)(s.td,{children:"Password for the PostgreSQL user"})]})]})]}),"\n",(0,t.jsx)(s.h4,{id:"optional-keys",children:(0,t.jsx)(s.strong,{children:"Optional Keys"})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Key"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Example Value"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"cpPostgresDataDir"})}),(0,t.jsx)(s.td,{children:"String"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"C:\\Program Files\\PostgreSQL\\14\\data"})}),(0,t.jsx)(s.td,{children:"Path to the PostgreSQL data directory"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"cpPostgresServiceName"})}),(0,t.jsx)(s.td,{children:"String"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"postgresql x64 14"})}),(0,t.jsx)(s.td,{children:"PostgreSQL service name"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"cpPostgresUser"})}),(0,t.jsx)(s.td,{children:"String"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"postgres"})}),(0,t.jsx)(s.td,{children:"PostgreSQL username"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"cpPostgresDbname"})}),(0,t.jsx)(s.td,{children:"String"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"postgres"})}),(0,t.jsx)(s.td,{children:"PostgreSQL database name"})]})]})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(s.p,{children:"If you see this error message:"}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"A required component (PostgreSQL database) is not running. You may need to reboot the machine."})}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Check the following:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"\u2705 The PostgreSQL service is running"}),"\n",(0,t.jsxs)(s.li,{children:["\u2705 The configured ",(0,t.jsx)(s.strong,{children:"port"})," and ",(0,t.jsx)(s.strong,{children:"service name"})," match your PostgreSQL setup"]}),"\n",(0,t.jsxs)(s.li,{children:["\u2705 FTC / Cluster services have the necessary permissions for both the PostgreSQL ",(0,t.jsx)(s.strong,{children:"bin"})," and ",(0,t.jsx)(s.strong,{children:"data"})," folders"]}),"\n",(0,t.jsxs)(s.li,{children:["\u2705 You have ",(0,t.jsx)(s.strong,{children:"rebooted"})," the machine after changing registry entries"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"If you don\u2019t remember the port used, you can find it in:"}),"\n",(0,t.jsx)(s.p,{children:"C:\\Program Files\\PostgreSQL\\14\\data\\postgresql.conf"})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);