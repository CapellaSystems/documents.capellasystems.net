"use strict";(self.webpackChunkcapella_documentation=self.webpackChunkcapella_documentation||[]).push([[1509],{7505:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Cambria FTC/Installation Guides/Kubernetes/Akamai/index (2)","title":"index (2)","description":"Cambria Cluster / FTC 5.5.0","source":"@site/docs/Cambria FTC/01-Installation Guides/01-Kubernetes/02-Akamai/index (2).md","sourceDirName":"Cambria FTC/01-Installation Guides/01-Kubernetes/02-Akamai","slug":"/Cambria FTC/Installation Guides/Kubernetes/Akamai/index (2)","permalink":"/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/index (2)","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"FTCSidebar","previous":{"title":"index","permalink":"/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/"},"next":{"title":"Welcome","permalink":"/docs/Cambria FTC/Installation Guides/Windows/placeholder"}}');var i=s(4848),a=s(8453);const r={},o=void 0,l={},c=[{value:"api.mydomain.com",id:"apimydomaincom",level:2},{value:"webui.mydomain.com",id:"webuimydomaincom",level:2}];function d(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Cambria Cluster / FTC 5.5.0"}),"\n",(0,i.jsx)(n.p,{children:"Akamai Cloud Kubernetes Help Documentation"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Document History\nVersion\nDate\nDescription\n5.4.0\n10/03/2024\nUpdated for release 5.4.0.21627 (Linux)\n5.5.0\n04/11/2025\nUpdated for release 5.5.0.23529 (Linux)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Download the online version of this document for the latest information and latest files. Always\ndownload the latest files"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Do not move forward with the installation process if you do not agree with the End User License\nAgreement (EULA) for our products. You can download and read the EULA for Cambria FTC, Cambria\nCluster, and Cambria License Manager from the links below:"}),"\n",(0,i.jsxs)(n.p,{children:["Cambria Cluster | Cambria FTC | Cambria License Manager\n",(0,i.jsx)(n.a,{href:"https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0",children:"https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0"}),"\n",(0,i.jsx)(n.a,{href:"https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0",children:"https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0"}),"\n",(0,i.jsx)(n.a,{href:"https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0",children:"https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0"})]}),"\n",(0,i.jsx)(n.p,{children:"Limitations and Security Information\nCambria FTC, Cluster, and License Manager are installed on Linux Docker containers. Limitations and security\nchecks done for this version are included in our general Linux Documents below."}),"\n",(0,i.jsx)(n.p,{children:"Note: these documents are for informational use only. The setup for Kubernetes starts in section 2. Create\nKubernetes Cluster."}),"\n",(0,i.jsxs)(n.p,{children:["Cambria FTC / Cluster:",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://www.dropbox.com/scl/fi/0rvskhpqtla6dffhbfli5/Linux_Cambria_Cluster_and_FTC_5_5_0_Guide.pdf?rlkey",children:"https://www.dropbox.com/scl/fi/0rvskhpqtla6dffhbfli5/Linux_Cambria_Cluster_and_FTC_5_5_0_Guide.pdf?rlkey"}),"\n=ngryjzox121ow5fgbc4y8n2yd"]}),"\n",(0,i.jsx)(n.p,{children:"Note: this document references Kubernetes version 1.32 only"}),"\n",(0,i.jsx)(n.p,{children:"!Important! Before You Begin\nPDF documents have a copy/paste issue. For best results, download this document and any referenced PDF\ndocuments in this guide and open them in a PDF viewer such as Adobe Acrobat."}),"\n",(0,i.jsx)(n.p,{children:"For commands that are in more than one line, copy each line one by one and check that the copied command\nmatches the one in the document."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"\u26a0 Critical Information: Read Before Proceeding with Installation\nBefore starting the installation, carefully review the following considerations. Skipping this section\nmay result in errors, failed deployments, or misconfigurations."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"A New Kubernetes Cluster Will Be Deployed"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u25cf\nThe installation process creates a brand-new Kubernetes cluster to keep the Cambria ecosystem\nisolated from other applications."}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Default Installation is Non-Secure"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u25cf\nThe guide covers installation with default settings in an open environment (not secure).\n\u25cf\nIf you require a secure or customized setup, you will need Akamai Cloud expertise, which is not\ncovered in this guide.\n\u25cf\nFirewall information is provided in section 1.5. Firewall Information"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Understand Your Transcoding Requirements"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u25cf\nKnow your expected transcoding volume, input/output specs, and whether a GPU is needed.\n\u25cf\nRefer to section 1.3. Akamai Cloud Machine Information and Benchmark for guidelines on machine\nrequirements."}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Administrative Rights Required"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u25cf\nMany of the steps in this guide require administrative rights to Akamai Cloud for adding permissions and\nperforming other administrative functions of that sort."}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Check Akamai Cloud Account Quota"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u25cf\nEnsure the Akamai Cloud account has sufficient quota to deploy Kubernetes resources.\n\u25cf\nSee section 1.2. Resource Usage for estimated resource requirements."}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"A Separate Linux Machine is Required"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u25cf\nA dedicated Linux machine (preferably Ubuntu on an Akamai Cloud Linode machine) is needed to\ndeploy Kubernetes.\n\u25cf\nKeeping Kubernetes tools and configuration files on a dedicated system is strongly recommended."}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"Verify Region-Specific Resource Availability"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u25cf\nNot all Akamai Cloud regions support the same resources (e.g., GPU availability varies by region).\n\u25cf\nConsult Akamai Cloud documentation to confirm available resources in your desired region."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Document Overview\nThe purpose of this document is to provide a walkthrough of the installation and initial testing process of the\nCambria Cluster and Cambria FTC applications in the Kubernetes environment. The basic view of the document\nis the following:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Overview of the Cambria Cluster / FTC Environment in a Kubernetes Environment"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Preparation for the installation (Prerequisites)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create and configure the Kubernetes Cluster"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Install Cambria Cluster and Cambria FTC on the Kubernetes Cluster"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify the installation is working properly"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Test the Cambria Cluster / FTC applications"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Update the Cambria Cluster / FTC applications on Kubernetes Cluster"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Delete a Kubernetes Cluster"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Quick Reference of Kubernetes Installation"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Quick Reference of Important Kubernetes Components (urls, template projects, test player, etc)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Glossary of important terms"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Overview"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"1.1. Cambria Cluster / FTC Kubernetes Deployment\nThere are two major applications involved in this Kubernetes installation: Cambria Cluster and Cambria FTC."}),"\n",(0,i.jsx)(n.p,{children:"Cambria Cluster:"}),"\n",(0,i.jsx)(n.p,{children:"This deployment is recommended to run on at least 3 nodes (replica = 3) with a service (Load Balancer) that\nexposes the application externally. For each of these nodes, Cambria Cluster will be installed on its own pod and\ndesignated to its own node. One node acts as the leader and the other two are replicas for the purpose of\nreplacing the leader in the case it becomes inactive, corrupted, etc. Each Cambria Cluster pod has three\ncontainers:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Cambria Cluster (application)"}),"\n",(0,i.jsx)(n.li,{children:"Leader Elector tool that chooses which of the Cambria Cluster node / pod will be the leader"}),"\n",(0,i.jsx)(n.li,{children:"Cambria FTC Autoscaler tool that when the FTC autoscaler is enabled, it will automatically deploy\nworker nodes for encoding purposes based on the number of encoding jobs queued to the system. This\nis based on the calculation (rounded down):"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Number of Nodes to Deploy = (Number of Queued Jobs + 2)  / 3"}),"\n",(0,i.jsx)(n.p,{children:"Also for the Cluster deployment, there is a corresponding PostgreSQL database installed on a separate pod for\neach active Cambria Cluster pod. The data is replicated between the different database pods in order to\npreserve data in case of issues with the database and/or Cluster."}),"\n",(0,i.jsx)(n.p,{children:"Cambria FTC:"}),"\n",(0,i.jsx)(n.p,{children:"Capella\u2019s Cambria FTC deployment consists of one or more nodes that (by default) are of different instance\ntypes than the Cambria Cluster nodes. These nodes focus specifically on running encoding tasks. Similar to\nCambria Cluster, the Cambria FTC application is installed on its own pod and designated to its own node. Each\nCambria FTC pod has three containers:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Cambria FTC (application)"}),"\n",(0,i.jsx)(n.li,{children:"Auto-Connect FTC dotnet tool that does the following: 1. list pods, 2. attempts to find Cambria\nCluster, and 3. connects the Cambria FTC application running in the pod to the Cambria Cluster that it\nfound. This container also deletes its own node pool or recycles its node if no Cambria Cluster is found\nwithin a specific time (~20 minutes)"}),"\n",(0,i.jsx)(n.li,{children:"Pgcluster database for storing its encoder's own job contents and other such information for as long\nas the pod is running."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Each node in the Kubernetes Cluster will either be running the Cluster deployment or the FTC deployment."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"1.2. Resource Usage\nThe resources used and their quantities will vary depending on requirements and different\nenvironments. Below is general information about some of the major resource usage (other resources may be\nused. Consult Akamai Cloud documentation for other resources created, usage limits, etc):"}),"\n",(0,i.jsxs)(n.p,{children:["Akamai Cloud Documentation:\n",(0,i.jsx)(n.a,{href:"https://techdocs.akamai.com/cloud-computing/docs/getting-started-with-lke-linode-kubernetes-engine",children:"https://techdocs.akamai.com/cloud-computing/docs/getting-started-with-lke-linode-kubernetes-engine"})]}),"\n",(0,i.jsx)(n.p,{children:"NodeBalancers\n0-3 NodeBalancers (Manager WebUI, Manager Web Server, Grafana)\n0-1 NodeBalancer (Ingress)\nNodes\nX Cambria Manager Instances (Default is 3)\nY Cambria FTC Instances (Depends on max FTC instance configuration; Default is 20)\nNetworking\nNo VPCs are created\nSecurity\nBy default, no firewalls are created. However, Firewalls can be applied to the LKE cluster\nnodes for stricter security"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"1.3. Akamai Cloud Machine Information and Benchmark\nThe following is a benchmark of two Akamai Cloud machines. The information below is as of September 2024.\nNote that the benchmark involves read from / write to Akamai ObjectStorage which influences the real-time\nspeed of transcoding jobs."}),"\n",(0,i.jsx)(n.p,{children:"Benchmark Job Information"}),"\n",(0,i.jsx)(n.p,{children:"Container\nCodec\nFrame\nRate\nResolution\nSource\nTS\nH.264\n30\n1920 x 1080 @ 8 Mbps\nOutput\nHLS/TS\nH.264\n29.97\n1920 x 1080 @ 4Mbps | 1280 x 720 @ 2.4Mbps\n640 x 480 @ 0.8Mbps | 320 x 240 @ 0.3Mbps"}),"\n",(0,i.jsx)(n.p,{children:"a. g6-dedicated-16 [ AMD EPYC 7713 ]"}),"\n",(0,i.jsx)(n.p,{children:"Machine Info\nName\nRAM\nCPUs\nStorage\nTransfer\nNetwork In/Out\nCost per Hour\nDedicated 32 GB\n32 GB\n16\n640 GB\n7 TB\n40 Gbps / 7 Gbps\n$0.432 (As of\n05/28/2024)"}),"\n",(0,i.jsx)(n.p,{children:"Benchmark Results"}),"\n",(0,i.jsx)(n.h1,{id:"of-concurrent-jobs",children:"of Concurrent Jobs"}),"\n",(0,i.jsx)(n.p,{children:"Real Time Speed\nCPU Usage\n2\nFor Each job: 0.43x RT (slower than real-time)\nThroughput: 0.86x RT (it takes around 1 minute 10 seconds to\ntranscode 1 minute of source)\n100%"}),"\n",(0,i.jsx)(n.p,{children:"b. g6-dedicated-64 [ AMD EPYC 7713 ]"}),"\n",(0,i.jsx)(n.p,{children:"Machine Info\nName\nRAM\nCPUs\nStorage\nTransfer\nNetwork In/Out\nCost per Hour\nDedicated 512 GB\n512 GB\n64\n7200 GB\n12 TB\n40 Gbps / 12 Gbps\n$6.912 (As of\n05/28/2024)"}),"\n",(0,i.jsx)(n.p,{children:"Benchmark Results"}),"\n",(0,i.jsx)(n.h1,{id:"of-concurrent-jobs-1",children:"of Concurrent Jobs"}),"\n",(0,i.jsx)(n.p,{children:"Real Time Speed\nCPU Usage\n2\nFor Each Job: 1.45x RT (slower than real-time)\nThroughput: 2.90x RT (it takes around 14 seconds to transcode\n1 minute of source)\n~80%"}),"\n",(0,i.jsx)(n.p,{children:"Benchmark Findings:\nThe results show the g6-dedicated-64 has higher overall throughput. This is expected as the instance has\nmore processing power than the g6-dedicated-16. However, if you take into account the cost per hour for\neach machine, the more cost efficient option is to go with the g6-dedicated-16."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"1.4. Cambria Application Access\nThe Cambria applications are accessible via the following methods:"}),"\n",(0,i.jsx)(n.p,{children:"1.4.1. External Access via TCP Load Balancer\nThe default Cambria installation configures the Cambria applications to be exposed through load balancers.\nThere is one for the Cambria Manager WebUI + License Manager, and one for the web / REST API server. The\nload balancers are publicly available and can be accessed either through its public ip address or domain name,\nand the application's TCP port."}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.p,{children:"Cambria Manager WebUI:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://44.33.212.155:8161",children:"https://44.33.212.155:8161"})}),"\n",(0,i.jsx)(n.p,{children:"Cambria REST API:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://121.121.121.121:8650/CambriaFC/v1/SystemInfo",children:"https://121.121.121.121:8650/CambriaFC/v1/SystemInfo"})}),"\n",(0,i.jsx)(n.p,{children:"External access in this way can be turned on / off via a configuration variable. See 4.2. Creating and Editing\nHelm Configuration File. If this feature is disabled, another method of access will need to be configured."}),"\n",(0,i.jsx)(n.p,{children:"1.4.2. HTTP Ingress via Reverse Proxy\nIn cases where the external access via TCP load balancer is not acceptable or for using a purchased domain\nname from servicers such as GoDaddy, the Cambria installation provides the option to expose an ingress.\nSimilar to the external access load balancers, the Cambria Manager WebUI and web / REST API server are\nexposed. However, only one ip address / domain name is needed in this case."}),"\n",(0,i.jsx)(n.p,{children:"How it works is that the Cambria WebUI is exposed through the subdomain webui, the Cambria web server\nthrough the subdomain api, and Grafana dashboard through the subdomain monitoring. The following is an\nexample with the domain mydomain.com"}),"\n",(0,i.jsx)(n.p,{children:"Cambria Manager WebUI:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://webui.mydomain.com",children:"https://webui.mydomain.com"})}),"\n",(0,i.jsx)(n.p,{children:"Cambria REST API:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://api.mydomain.com",children:"https://api.mydomain.com"})}),"\n",(0,i.jsx)(n.p,{children:"Grafana Dashboard:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://monitoring.mydomain.com",children:"https://monitoring.mydomain.com"})}),"\n",(0,i.jsx)(n.p,{children:"Capella provides a default ingress hostname for testing purposes only. In production, the default hostname, ssl\ncertificate, and other such information needs to be configured. More information about ingress configuration is\nexplained later in this guide."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"1.5. Firewall Information\nBy default, this guide creates a kubernetes cluster with default settings which do not include a\nFirewall. For custom / non-default configurations, or to explore with a more restrictive network based on the\ndefault virtual network created, the following is a list of known ports that the Cambria applications use:"}),"\n",(0,i.jsx)(n.p,{children:"Port(s)\nProtocol\nTraffic\nDescription\n8650\nTCP\nInbound\nCambria Cluster REST API\n8161\nTCP\nInbound\nCambria Cluster WebUI\n8678\nTCP\nInbound\nCambria License Manager Web Server\n8481\nTCP\nInbound\nCambria License Manager WebUI\n9100\nTCP\nInbound\nPrometheus System Exporter for Cambria Cluster\n8648\nTCP\nInbound\nCambria FTC REST API\n3100\nTCP\nInbound\nLoki Logging Service\n3000\nTCP\nInbound\nGrafana Dashboard\n443\nTCP\nInbound\nCapella Ingress\nALL\nTCP/UDP\nOutbound\nExpose all Outbound Traffic"}),"\n",(0,i.jsx)(n.p,{children:"Also, for Cambria licensing, any Cambria Cluster and Cambria FTC machine requires that at least the following\ndomains be exposed in your firewall (both inbound and outbound traffic):"}),"\n",(0,i.jsx)(n.p,{children:"Domain\nPort(s)\nProtocol\nTraffic\nDescription\napi.cryptlex.com\n443\nTCP\nIn/Out\nLicense Server\ncryptlexapi.capellasystems.net\n8485\nTCP\nIn/Out\nLicense Cache Server\ncpfs.capellasystems.net\n8483\nTCP\nIn/Out\nLicense Backup Server"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Prerequisites\nThe following steps need to be completed before the deployment process."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"2.1. Tools: Kubectl and Helm\nThis guide uses cURL and unzip to run certain commands and download the required tools and applications.\nTherefore, the Linux server used for deployment will need to have these tools installed. Here is an example with\nUbuntu:"}),"\n",(0,i.jsx)(n.p,{children:"sudo apt update; sudo apt upgrade; sudo apt install curl unzip"}),"\n",(0,i.jsx)(n.p,{children:"The components of this installation are packaged in a zip archive. Download it using the following command:"}),"\n",(0,i.jsxs)(n.p,{children:['curl -o CambriaClusterKubernetesAkamai_5_5_0.zip -L\n"',(0,i.jsx)(n.a,{href:"https://www.dropbox.com/scl/fi/djskqq0ve21vlgjk6bmiq/CambriaClusterKubernetesAkamai_5_5_0.zip?rlkey",children:"https://www.dropbox.com/scl/fi/djskqq0ve21vlgjk6bmiq/CambriaClusterKubernetesAkamai_5_5_0.zip?rlkey"}),'\n=dlw857nygf22e901tcakpbxm2&st=fibyo4zd&dl=1"; \\\nunzip CambriaClusterKubernetesAkamai_5_5_0.zip; \\\nchmod +x *.sh']}),"\n",(0,i.jsx)(n.p,{children:"Important: the scripts included have been tested with Ubuntu. They may work with other Linux distributions\nbut not tested"}),"\n",(0,i.jsx)(n.p,{children:"2.1.1. Installation\nThere are 2 options available for installing the kubernetes required tools for deployment to Akamai Cloud:"}),"\n",(0,i.jsx)(n.p,{children:"Option 1: Use Installation Script (Verified on Ubuntu)"}),"\n",(0,i.jsx)(n.p,{children:"./installKubeTools.sh"}),"\n",(0,i.jsx)(n.p,{children:"Option 2: Other Installation Options"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Kubectl:    ",(0,i.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/tools/",children:"https://kubernetes.io/docs/tasks/tools/"})]}),"\n",(0,i.jsxs)(n.li,{children:["Helm:       ",(0,i.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"https://helm.sh/docs/intro/install/"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"2.1.2. Verification\nIf any of the commands below fail, review the installation instructions for the failing tool and try again:"}),"\n",(0,i.jsx)(n.p,{children:"kubectl version --client; helm version"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Create Kubernetes Cluster\nThe following section provides the basic steps needed to create a Kubernetes Cluster on Akamai Cloud."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"3.1. Create LKE Cluster and Cambria Cluster Node Group"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"In the Akamai Cloud dashboard, create Cluster on the Dashboard in the Kubernetes section."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"a. Choose a label for your Kubernetes Cluster, the region where it should be created in, and 1.32 for the\nKubernetes Version"}),"\n",(0,i.jsx)(n.p,{children:"b. If this Kubernetes setup is for production, it is recommended to enable the HA Control Plane to\nactivate high availability for the Kubernetes Cluster. Note that this does incur an additional cost on top of\nthe Kubernetes Cluster specific costs. Otherwise, select the No option."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"c. In the Add Node Pools section, there is one node pool that needs to be added at this time (for Cambria\nCluster). Set the number of nodes for Cambria Cluster to the amount desired and click the Add button\n(See example below)."}),"\n",(0,i.jsx)(n.p,{children:"Information / Recommendation\nCambria Cluster manages scheduling and handling Cambria FTC encoding / packaging programs.\nThink about how many programs will be intended to run and choose an instance type accordingly.\nThe lowest recommended machine type for the manager machines is Dedicated 8GB."}),"\n",(0,i.jsx)(n.p,{children:"It is also recommended to set the node count to 3. This is because 1 of the nodes will act as the\nCambria Cluster node while the other 2 nodes act as backup (web server and database are\nreplicated / duplicated). In the case that the Cambria Cluster node goes down or stops responding,\none of the other two nodes will take over as the Cambria Cluster node. Depending on your\nworkflow(s), think about how many backup nodes may be needed."}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create the cluster. It may take several minutes for the initial Kubernetes system to load. Make sure that all of\nthe nodes that you configured are up and running (State should be Running)."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Once the kubernetes environment setup is complete, copy the contents of the Kubeconfig file:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"a. Click on View and copy the contents shown on the pop up window"}),"\n",(0,i.jsx)(n.p,{children:"b. Set the cluster name as an environment variable:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"export CLUSTER_NAME=cambria-cluster"})}),"\n",(0,i.jsx)(n.p,{children:"c. In the Linux deployment server, create a new file for the kubeconfig:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"nano $CLUSTER_NAME-kubeconfig.yaml"})}),"\n",(0,i.jsx)(n.p,{children:"d. Paste the contents from step 3a. If using nano, right-click to paste"}),"\n",(0,i.jsx)(n.p,{children:"e. Save the file. If using nano, press CTRL/CMD + X, then type 'y', and then press the Enter/Return key"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"In the Linux deployment server, set the KUBECONFIG environment variable for terminal interaction with the\nLKE cluster:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"export KUBECONFIG=$CLUSTER_NAME-kubeconfig.yaml"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Verify that kubectl works with the cluster"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get nodes"})}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"NAME                            STATUS   ROLES    AGE   VERSION \nlke389119-595948-28c8a7980000   Ready    <none>   23m   v1.32.1 \nlke389119-595948-5e8b20d10000   Ready    <none>   23m   v1.32.1\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"Back in the Akamai Dashboard in the LKE cluster, click on Copy Token. Then, open the Kubernetes\nDashboard and use the token to log in to the dashboard"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This will show details about the LKE cluster in its current state. This dashboard can be used to view and manage\nthe LKE cluster from a graphical point of view."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"3.2. (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label\nFollow these steps only if more precise control is required over which nodes Cambria FTC is installed\non. If unsure, refer to the following overview for more details before moving forward."}),"\n",(0,i.jsx)(n.p,{children:"Overview:"}),"\n",(0,i.jsx)(n.p,{children:"By default, the Cambria management and encoding applications are installed on separate nodes according to a\nspecified node instance type. For example, if the management node instance type is set to g6-dedicated-4,\nCambria Cluster can only be installed on nodes of that instance type, while Cambria FTC can be installed on\nnodes of other instance types."}),"\n",(0,i.jsx)(n.p,{children:"In some scenarios, the default setup may not be sufficient. For example, certain nodes may need to handle both\nmanagement and encoding, or specific nodes in the cluster may be designated for other tasks and should not\nrun encoding tasks. To accommodate these workflows, an exclusion label must be added to the nodes where\nCambria FTC should be restricted."}),"\n",(0,i.jsx)(n.p,{children:"Steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Find out which node(s) will be Cambria FTC restricted and note down the name:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get nodes"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Apply the following label to each of those nodes:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl label node <node-name> no-capella-worker=true"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Follow this step only for each node pool that should apply the Cambria FTC exclusion tag to all of\nits existing and new nodes. To apply the same restriction to all nodes in a node pool, add the same label to\nthe node pool. In Akamai, when labeling a node pool, the label will apply to existing and new nodes. One way to\ndo this is via the Akamai Cloud Dashboard:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"a. In the Akamai Cloud Dashboard, go into the kubernetes cluster and look for the node pool(s) to\nlabel"}),"\n",(0,i.jsx)(n.p,{children:"b. Select Labels and Taints and Add Label.  In the Label field, enter no-capella-worker: true and\nthen save the changes"}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"When in section 4.2. Creating and Editing Helm Configuration File, make sure to set this option in the Helm\nvalues file:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"workersCanUseManagerNodes: true"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"3.3. Create Cambria FTC Node Group(s)\nSkip this step if planning to use Cambria FTC's autoscaler. Run the following steps to create the Node\nGroup(s) for the worker application instances (replace the highlighted values to those of your specific\nenvironment):"}),"\n",(0,i.jsx)(n.p,{children:"Information / Recommendation\nFor this particular case, Cambria FTC nodes need to be added manually. Therefore, you will need to\nthink about what machine / instance types are needed for running the Cambria FTC workflows.\nBased on benchmarks (See 1.3. Akamai Cloud Machine Information and Benchmark). The\nrecommended machine / instance type to get started is g6-dedicated-16."}),"\n",(0,i.jsx)(n.p,{children:"To get started, it is recommended to start with one instance. This way, when the installation is\ncomplete, there will already be one Cambria FTC instance to test with. The number of instances\ncan always be scaled up and down, up to the maximum FTC instance count that will be configured\nin section 4.2. Creating and Editing Helm Configuration File"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Akamai Dashboard, go to the LKE cluster."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Select Add a Node Pool and select the node instance types and number of nodes to add to the node group.\nThe instance types MUST be different from the Cambria Cluster nodes except if the steps in 3.2.\n(Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label were followed"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"3.4. GPU Operator for NVENC\nThis section is only required for a Kubernetes cluster that will use GPUs. Skip this step if GPUs will\nnot be used in this Kubernetes cluster."}),"\n",(0,i.jsx)(n.p,{children:"Limitation: this currently does not work with the FTC autoscaler"}),"\n",(0,i.jsx)(n.p,{children:"In a command prompt / terminal, run the following commands to deploy the GPU Operator to the Kubernetes\ncluster:"}),"\n",(0,i.jsxs)(n.p,{children:["helm repo add nvidia ",(0,i.jsx)(n.a,{href:"https://helm.ngc.nvidia.com/nvidia",children:"https://helm.ngc.nvidia.com/nvidia"}),"; \\\nhelm repo update; \\\nhelm install nvidia-operator nvidia/gpu-operator \\\n--create-namespace \\\n--namespace gpu-operator"]}),"\n",(0,i.jsx)(n.p,{children:"Wait at least 5 minutes for the GPU operator to install completely"}),"\n",(0,i.jsx)(n.p,{children:"Run this command with 'kubectl' and make sure that all of the pods are in a Running or Completed state:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get pods -n gpu-operator"})}),"\n",(0,i.jsx)(n.p,{children:"If any pod is still in an Init state or PodCreating state, wait another 5 minutes to see if the pods will complete\ntheir install process."}),"\n",(0,i.jsx)(n.p,{children:"For any pods that are in an errored state or that are still in an Init state after 10 minutes, do the following:"}),"\n",(0,i.jsx)(n.p,{children:"a. Check that at least one node is one of the supported Akamai Cloud GPU instances"}),"\n",(0,i.jsx)(n.p,{children:"b. Use the following command to check the state of a failing pod (check the Events section):"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl describe pod <your-pod-name> -n gpu-operator"})}),"\n",(0,i.jsx)(n.p,{children:"Either look up the error for a potential solution or send the entire Events section to the Capella support team for\ninvestigation."}),"\n",(0,i.jsx)(n.p,{children:"3.5. Performance Metrics and Logging\nThis section is required for logging and other performance information about the Cambria\napplications."}),"\n",(0,i.jsx)(n.p,{children:"Follow the steps in the document below to install Prometheus, Grafana, Loki, and Promtail:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://www.dropbox.com/scl/fi/rxshb6038wd9yg81kxagdPrometheus_Grafana_Setup_for_Cambria_Cluster_5_5_0_on_Akamai_Kubernetes.pdf?rlkey=5l561e8x251y46gywx57k5svm&st=m58td12z&dl=1"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Install Cambria Cluster, FTC, and Dependencies"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"4.1. Prerequisite: Deploy External Kubernetes Tools\nThere are a few tools that need to be deployed in order to make Cambria FTC / Cluster work properly."}),"\n",(0,i.jsx)(n.p,{children:"4.1.1. Required Tools"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Run the following commands to deploy the pre-requisite tools for the kubernetes cluster:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"./deployCambriaKubeDependencies.sh"}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Verify that resources are created and in an active / online state:"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pods should be in a Running STATUS and all containers in READY should be active"}),"\n",(0,i.jsx)(n.li,{children:"Services should have a CLUSTER-IP assigned"}),"\n",(0,i.jsx)(n.li,{children:"All other resources (Eg. replicasets, deployments, statefulsets, etc) should have all desired resources active"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"kubectl get all -n cnpg-system; kubectl get all -n argo-events; kubectl get all -n cert-manager"}),"\n",(0,i.jsx)(n.p,{children:"If any resources are still not ready, wait about a minute for them to complete. If still not working, contact the\nCapella support team."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"4.1.2. (Optional) Ingress-Nginx\nRun the steps in this section if either an ingress is required or for testing purposes. If unsure, read\nsection 1.4. Cambria Application Access which provides a brief overview of the different ways to access\nthe Cambria applications."}),"\n",(0,i.jsx)(n.p,{children:"By default, certain parts of the Cambria applications are exposed via an ingress. In order to access these, the\ningress-nginx service needs to be created and attached to the ingress via. This is done via a reverse-proxy."}),"\n",(0,i.jsx)(n.p,{children:"!Important! Service Load Balancer Not Auto-Deleted\nThis will create a load balancer that is not automatically deleted when the Kubernetes cluster is destroyed.\nThis load balancer has to be deleted manually"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Run the following command:"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["kubectl apply -f\n",(0,i.jsx)(n.a,{href:"https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.12.1/deploy/static/provider/clo",children:"https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.12.1/deploy/static/provider/clo"}),"\nud/deploy.yaml"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Verify that the resources are created and in an active / online state:"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pods should be in a Running STATUS and all containers in READY should be active"}),"\n",(0,i.jsx)(n.li,{children:"Services should have a CLUSTER-IP assigned. The ingress-nginx-controller should have an EXTERNAL-IP"}),"\n",(0,i.jsx)(n.li,{children:"All other resources (Eg. replicasets, deployments, statefulsets, etc) should have all desired resources active"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"kubectl get all -n ingress-nginx"}),"\n",(0,i.jsx)(n.p,{children:"If any resources are still not ready, wait about a minute for them to complete. If still not complete, contact the\nCapella support team."}),"\n",(0,i.jsx)(n.p,{children:"For Production / Using Publicly Registered Domain Name and TLS Certificate:"}),"\n",(0,i.jsxs)(n.p,{children:["Follow this document:\n",(0,i.jsx)(n.a,{href:"https://www.dropbox.com/scl/fi/3vlap75xs8r5zo1d47gr0/Cambria_Kubernetes_Domain_DNS_Guide.pdf?rlkey=",children:"https://www.dropbox.com/scl/fi/3vlap75xs8r5zo1d47gr0/Cambria_Kubernetes_Domain_DNS_Guide.pdf?rlkey="}),"\nei34633z8elzu7jvmv8w6ezou"]}),"\n",(0,i.jsx)(n.p,{children:"Important: Connect the domain to the ingress and make sure to have entries in the domain registry for the\nfollowing subdomains (assuming mydomain.com is your registered domain):"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"apimydomaincom",children:"api.mydomain.com"}),"\n",(0,i.jsx)(n.h2,{id:"webuimydomaincom",children:"webui.mydomain.com"}),"\n",(0,i.jsx)(n.p,{children:"monitoring.mydomain.com"}),"\n",(0,i.jsx)(n.p,{children:"If not working or unsure of how to do this, contact Capella support."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"4.2. Creating and Editing Helm Configuration File\nWith Helm and Kubectl installed on the Linux deployment server, create the Helm configuration file (yaml) that\nwill be used to deploy Cambria Cluster / FTC to the Kubernetes environment."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"In a command line / terminal window, run the following command to create the configuration file:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"helm show values capella-cluster.tgz > cambriaClusterConfig.yaml"}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Open the configuration file in your favorite text / document editor and edit the following values:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Blue: values in blue will be given to you by Capella. These values in the chart below are for the release version.\nRed: values in red are proprietary values that need to be changed based on your specific environment"}),"\n",(0,i.jsx)(n.p,{children:"cambriaClusterConfig.yaml\nExplanation"}),"\n",(0,i.jsx)(n.h1,{id:"allow-worker-pods-to-run-on-the-same-nodes-as-manager-pods",children:"allow worker pods to run on the same nodes as manager pods"}),"\n",(0,i.jsx)(n.p,{children:"workersCanUseManagerNodes: false\nIf using Cambria FTC exclusion label, you must\nset this value to true. See section 3.2 (Optional)\nRestricting Cambria FTC Encoder Designated Nodes\nvia Exclusion Label for more details."}),"\n",(0,i.jsx)(n.p,{children:"This setting allows using Cambria Cluster nodes as\nencoding machines. By default, this is set to false to\nseparate the workload of the manager vs the\nencoders."}),"\n",(0,i.jsx)(n.h1,{id:"workersusegpu-allow-workers-to-use-nvidia-gpu",children:"workersUseGPU: allow workers to use nvidia GPU"}),"\n",(0,i.jsx)(n.p,{children:"workersUseGPU: false\nIf working with GPUs / NVENC workflows,\nset this value to true. Otherwise, leave as false."}),"\n",(0,i.jsx)(n.h1,{id:"nbgpus-how-many-gpus-are-on-the-nodes",children:"nbGPUs: how many GPUs are on the nodes..."}),"\n",(0,i.jsx)(n.p,{children:"nbGPUs: 1\nIf workersUseGPU is set to true, set this to\nthe number of GPUs that are available on the\nworker nodes."}),"\n",(0,i.jsx)(n.p,{children:"Note: if using more than 1 GPU, multi-GPU\nsupport must be enabled in the Cambria license"}),"\n",(0,i.jsx)(n.h1,{id:"managerinstancetype-database-and-cambria-cluster-will-be",children:"managerInstanceType: database and Cambria Cluster will be..."}),"\n",(0,i.jsx)(n.p,{children:'managerInstanceType: "g6-dedicated-4"'}),"\n",(0,i.jsx)(n.p,{children:"\u2026\nThe instance type for the Cambria Cluster machines.\nThis is the instance type you chose originally when\ncreating your cluster. Consult Akamai Cloud\ndocumentation for how to find your instance type.\nIn the case of Dedicated 8GB machine, the\ninstance type will be g6-dedicated-4 which is the\ndefault value."}),"\n",(0,i.jsx)(n.h1,{id:"ftcenableautoscaler-if-true-auto-scaler-pod-for-ftc-will-be-deployed",children:"ftcEnableAutoScaler: if true, auto-scaler pod for FTC will be deployed"}),"\n",(0,i.jsx)(n.p,{children:"ftcEnableAutoScaler: true"}),"\n",(0,i.jsx)(n.p,{children:"The Cambria FTC autoscaler spawns Cambria FTC\nencoders to handle jobs based on the number of\njobs in the queue. By default, the autoscaler is\nenabled. To instead add Cambria FTC nodes\nmanually, set this value to false."}),"\n",(0,i.jsx)(n.h1,{id:"ftcinstancetype-instance-type-for-the-ftc-nodes-which-will-be",children:"ftcInstanceType: instance type for the FTC nodes which will be..."}),"\n",(0,i.jsx)(n.p,{children:'ftcInstanceType: "g6-dedicated-16"'}),"\n",(0,i.jsx)(n.p,{children:"\u2026\nFor use with Cambria FTC autoscaler. The\ninstance type for the Cambria FTC encoding\nmachines. This is used by the autoscaler to choose\nwhat type of machines to create for encoding.\nConsult Akamai Cloud documentation for how to\nfind your instance type. By default, this is set to\ng6-dedicated-16."}),"\n",(0,i.jsx)(n.h1,{id:"maxftcinstances-maximum-number-of-ftc-instances-ie-replicas",children:"maxFTCInstances: maximum number of FTC instances (ie replicas)..."}),"\n",(0,i.jsx)(n.p,{children:"maxFTCInstances: 20"}),"\n",(0,i.jsx)(n.p,{children:"The max number of FTC machines that can be\nspawned. By default, this is 20, but this will depend\non your workflow."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h1,{id:"pginstances-number-of-postgresql-database-instances-ie-replicas",children:"pgInstances: number of postgresql database instances (ie replicas)"}),"\n",(0,i.jsx)(n.p,{children:"pgInstances: 3"}),"\n",(0,i.jsx)(n.h1,{id:"cambriaclusterreplicas-number-of-cambria-cluster-instances",children:"cambriaClusterReplicas: number of Cambria Cluster instances..."}),"\n",(0,i.jsx)(n.p,{children:"cambriaClusterReplicas: 3\n\u2026\nThe number of instances for Cambria Cluster and\npostgres database. These two values must match\neach other and also the amount of nodes created in\nstep 1. In this case, the value will be 3.\nexternalAccess:"}),"\n",(0,i.jsx)(n.h1,{id:"exposeclusterserviceexternally-main-cambria-cluster-service",children:"exposeClusterServiceExternally: main Cambria Cluster service"}),"\n",(0,i.jsx)(n.p,{children:"exposeStreamServiceExternally: true"}),"\n",(0,i.jsx)(n.p,{children:"Set to true to be able to access Cambria Cluster\nexternally"}),"\n",(0,i.jsx)(n.h1,{id:"enableingress-enable-nginx-ingress",children:"enableIngress: enable nginx ingress"}),"\n",(0,i.jsx)(n.p,{children:"enableIngress: true"}),"\n",(0,i.jsx)(n.h1,{id:"hostname-use-for-the-nginx-ingress--replace-this-with-your-domain-name",children:"hostName: use for the nginx ingress.  Replace this with your domain name."}),"\n",(0,i.jsx)(n.p,{children:"hostName: myhost.com"}),"\n",(0,i.jsx)(n.h1,{id:"acmeregistrationemail-email-for-automated-certificate-management",children:"acmeRegistrationEmail: email for Automated Certificate Management"}),"\n",(0,i.jsxs)(n.p,{children:["acmeRegistrationEmail: ",(0,i.jsx)(n.a,{href:"mailto:test@example.com",children:"test@example.com"})]}),"\n",(0,i.jsx)(n.h1,{id:"acmeserver-server-to-get-tls-certificate-from",children:"acmeServer: server to get TLS certificate from"}),"\n",(0,i.jsxs)(n.p,{children:["acmeServer: ",(0,i.jsx)(n.a,{href:"https://acme-staging-v02.api.letsencrypt.org/directory",children:"https://acme-staging-v02.api.letsencrypt.org/directory"}),"\nThese fields are for use with the ingress. The default\nvalues can be used for testing purposes. For\nproduction, these values must be changed to a\nvalid registered domain name, email, and TLS\ncertificate server.\nsecrets:"]}),"\n",(0,i.jsx)(n.h1,{id:"pgclusterpassword-password-for-the-postgresql-database",children:"pgClusterPassword: password for the postgresql database"}),"\n",(0,i.jsx)(n.p,{children:'pgClusterPassword: "xrtVeQ4nN82SSiYHoswqdURZ\u2026"\nThe password for the postgres database. It is\nrecommended to change the default values to\nsomething more secure.'}),"\n",(0,i.jsx)(n.h1,{id:"ftclicensekey-ftc-license-key",children:"ftcLicenseKey: FTC license key"}),"\n",(0,i.jsx)(n.p,{children:'ftcLicenseKey: "2XXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX"'}),"\n",(0,i.jsx)(n.p,{children:"The Cambria Cluster / FTC product license. The\nCapella team should have provided this value for\nyou. Replace the\n\u201cXXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXX\nX\u201d with the license key provided."}),"\n",(0,i.jsx)(n.h1,{id:"cambriaclusterapitoken-api-token-for-cambria-cluster",children:"cambriaClusterAPIToken: API token for Cambria Cluster..."}),"\n",(0,i.jsx)(n.p,{children:'cambriaClusterAPIToken: "12345678-1234-43f8-b4fc-53afd3893d5f"'}),"\n",(0,i.jsx)(n.p,{children:"This is a token that is needed to make API calls to\nCapella\u2019s Cluster web server. Change this value to\nsomething specific to your environment."}),"\n",(0,i.jsx)(n.p,{children:"Allowed Characters:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"lowercase and capital letters"}),"\n",(0,i.jsx)(n.li,{children:"numbers"}),"\n",(0,i.jsx)(n.li,{children:"underscores"}),"\n",(0,i.jsxs)(n.li,{children:["dashes","\n",(0,i.jsx)(n.h1,{id:"cambriaclusterwebuiuser-userpassword-to-access-cambria-cluster-ui",children:"cambriaClusterWebUIUser: user/password to access Cambria Cluster UI..."}),"\n",'cambriaClusterWebUIUser: "admin,defaultWebUIUser,RZvSSd3ffsElsCEEe9"']}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This is the login credentials for Cambria Cluster Web\nUI. Each user is",(0,i.jsx)(n.br,{}),"\n","listed in the form:"]}),"\n",(0,i.jsx)(n.p,{children:"role,username,password"}),"\n",(0,i.jsx)(n.p,{children:"Allowed roles:\nadmin - can view/create/edit/delete anything on\nthe WebUI. Can also create/manage WebUI users.\nuser - can view/create/edit/delete anything on the\nWebUI.\nviewer - can only view anything on the WebUI."}),"\n",(0,i.jsx)(n.p,{children:"For multiple users, separate each by a comma.\nExample:"}),"\n",(0,i.jsx)(n.p,{children:"admin,admin,changethispassword1234,viewer,guest\n,password123"}),"\n",(0,i.jsx)(n.h1,{id:"akamaicloudapitoken-api-token-used-for-horizontal-scaling",children:"akamaiCloudAPIToken: API token, used for horizontal scaling..."}),"\n",(0,i.jsx)(n.p,{children:'akamaiCloudAPIToken: "d02732530a2bcfd4d028425eb55f366f74631\u2026"'}),"\n",(0,i.jsxs)(n.p,{children:["This is the Akamai Cloud account\u2019s API Token. See\n",(0,i.jsx)(n.a,{href:"https://www.linode.com/docs/products/tools/api/gui",children:"https://www.linode.com/docs/products/tools/api/gui"}),"\ndes/manage-api-tokens/"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h1,{id:"argoeventwebhooksourcebearertoken-bearer-token-used-by-webhook-ftc",children:"argoEventWebhookSourceBearerToken: bearer token used by webhook-ftc"}),"\n",(0,i.jsx)(n.p,{children:'argoEventWebhookSourceBearerToken: "L9Em5WIW8yth6H4uPtzT"'}),"\n",(0,i.jsx)(n.p,{children:"This token can be configured to any value. The\ntoken will be used for argo-events type of\nworkflows.\noptionalInstall:\nenableEventing: true\nThis is used for enabling / disabling the argo-events\nfeature."}),"\n",(0,i.jsx)(n.p,{children:"4.3. Installing Cambria FTC / Cluster\nWait at least 5 minutes after installing prerequisites before moving on to this step. In a command line\n/ terminal window, run the following command:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"helm upgrade --install capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml"})}),"\n",(0,i.jsx)(n.p,{children:"The result of running the command should look something like this:"}),"\n",(0,i.jsx)(n.p,{children:'Release "capella-cluster" does not exist. Installing it now.\nNAME: capella-cluster\nLAST DEPLOYED: Thu May  3 10:09:47 2023\nNAMESPACE: default\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None'}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"At this point, several components are being deployed to the Kubernetes environment. Wait a few minutes\nfor everything to be deployed."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Verify Cambria FTC / Cluster Installation"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"5.1. Verify Cambria Cluster Deployment\nImportant: The components below are only a subset of the whole installation. These are the components\nconsidered as key to a proper deployment."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Run the following command:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get all -n default"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Verify the following information:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Resources\nContent\nDeployments"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"1 cambriaclusterapp deployment with all items active"}),"\n",(0,i.jsx)(n.li,{children:"1 cambriaclusterwebui deployment with all items active\nPods"}),"\n",(0,i.jsx)(n.li,{children:"X pods with cambriaclusterapp in the name (X = # of replicas specified in config file)\nwith all items active / Running"}),"\n",(0,i.jsx)(n.li,{children:"X pods with pgcluster in the name (X = # of replicas specified in config file) with all\nitems active / Running"}),"\n",(0,i.jsx)(n.li,{children:"1 pod with cambriaclusterwebui in the name\nServices"}),"\n",(0,i.jsx)(n.li,{children:"3 services with pgcluster in the name with a CLUSTER-IP assigned"}),"\n",(0,i.jsx)(n.li,{children:"1 service named cambriaclusterservice. If exposeStreamServiceExternally is true,\nthis should have an EXTERNAL-IP"}),"\n",(0,i.jsx)(n.li,{children:"1 service named cambriaclusterwebuiservice. If exposeStreamServiceExternally is\ntrue, this should have an EXTERNAL-IP"}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"If any of the above are not in an expected state, wait a few more minutes in case some resources take longer\nthan expected to complete. If after a few minutes there are still resources in an unexpected state, contact the\nCapella support team."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"5.2. Verify Cambria FTC Deployment\nImportant: The components below are only a subset of the whole installation.These are the components\nconsidered as key to a proper deployment."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Run the following command:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get all -n capella-worker"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Verify the following information:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Resources\nContent\nPods"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"X pods with cambriaftcapp in the name (X = Max # of FTCs specified in the\nconfig file)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Notes:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If using Cambria FTC autoscaler, all of these pods should be in a pending state.\nEvery time the autoscaler deploys a Cambria FTC node, one pod will be assigned to\nit"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If not using Cambria fTC autoscaler, Y of the pods should be in an active /\nrunning state and all containers running (Y = # of Cambria FTC nodes active)\nDeployments"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"1 cambriaftcapp deployment."}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"If any of the above are not in an expected state, wait a few more minutes in case some resources take longer\nthan expected to complete. If after a few minutes there are still resources in an unexpected state, contact the\nCapella support team."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"5.3. Verify Applications are Accessible"}),"\n",(0,i.jsx)(n.p,{children:"5.3.1. Cambria Cluster WebUI\nSkip this step if the WebUI was set to disabled in the Helm values configuration yaml file or the\ningress will be used instead. For any issues, contact the Capella support team."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Get the WebUI address. A web browser is required to access the WebUI:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Option 1: External Url if External Access is Enabled"}),"\n",(0,i.jsx)(n.p,{children:"Run the following command:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=\"{'https://'}{.status.loadBalancer.ingress[0].hostname}{':8161'}{'\\n'}\""})}),"\n",(0,i.jsx)(n.p,{children:"The response should look something like this:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://192.122.45.33:8161"})}),"\n",(0,i.jsx)(n.p,{children:"Option 2: Non-External Url Access"}),"\n",(0,i.jsx)(n.p,{children:"Run the following command to temporarily expose the WebUI via port-forwarding:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl port-forward -n default svc/cambriaclusterwebuiservice 8161:8161 --address=0.0.0.0"})}),"\n",(0,i.jsx)(n.p,{children:"The url depends on the location of the web browser. If the web browser and the port-forward are on the\nsame machine, use localhost. Otherwise, use the ip address of the machine with the port-forward:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://<server>:8161"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:'In a web browser, enter the above url. This should trigger an "Unsafe" page similar to the one below:'}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Click on Advanced and Proceed to [ EXTERNAL IP ] (unsafe). This will show the login page."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Log in using the credentials created in the Helm values yaml file (See cambriaClusterWebUIUser)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"5.3.2. Cambria Cluster REST API\nSkip this step if the ingress will be used instead of external access or any other type of access. For\nany issues, contact the Capella support team."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Get the REST API address:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Option 1: External Url if External Access is Enabled"}),"\n",(0,i.jsx)(n.p,{children:"Run the following command:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get svc/cambriaclusterservice -n default -o=jsonpath=\"{'https://'}{.status.loadBalancer.ingress[0].hostname}{':8650'}{'\\n'}\""})}),"\n",(0,i.jsx)(n.p,{children:"The response should look something like this:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://192.122.45.33:8650"})}),"\n",(0,i.jsx)(n.p,{children:"Option 2: Non-External Url Access"}),"\n",(0,i.jsx)(n.p,{children:"Run the following command to temporarily expose the REST API via port-forwarding:"}),"\n",(0,i.jsx)(n.p,{children:"kubectl port-forward -n default svc/cambriaclusterservice 8650:8650 --address=0.0.0.0"}),"\n",(0,i.jsx)(n.p,{children:"The url depends on the location of the port-forward. If the web browser and the port-forward are on the\nsame machine, use localhost. Otherwise, use the ip address of the machine with the port-forward:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://<server>:8650"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Run the following API query to check if the REST API is active:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"curl -k -X GET https://<server>:8650/CambriaFC/v1/SystemInfo"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"5.3.3. Cambria Ingress\nSkip this step if not planning to test with Cambria's ingress. For any issues, contact the Capella support\nteam."}),"\n",(0,i.jsx)(n.p,{children:"5.3.3.1. Get the Ingress Endpoints\nThere are two ways to use the ingress:"}),"\n",(0,i.jsx)(n.p,{children:"Option 1: Using Default Testing Ingress"}),"\n",(0,i.jsx)(n.p,{children:"Only use this option for testing purposes. Skip to option 2 for production. In order to use the\ningress in the testing state, the hostname needs to be DNS resolvable on the machines that will need\naccess to the Cambria applications."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Get the ingress HOSTS and ADDRESS:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"kubectl get ingress -A"}),"\n",(0,i.jsx)(n.p,{children:"The response should look similar to the following:"}),"\n",(0,i.jsxs)(n.p,{children:["NAMESPACE    NAME                       CLASS   HOSTS                                             ADDRESS",(0,i.jsx)(n.br,{}),"\n","PORTS     AGE\ndefault      cambriaclusteringress      nginx   api.akamai.capellatest.com,webui.akamaicapellatest.com",(0,i.jsx)(n.br,{}),"\n","55.99.103.99 80, 443   23m\nmonitoring   cambriamonitoringingress   nginx   monitoring.myhost.com",(0,i.jsx)(n.br,{}),"\n","55.99.103.99 80, 443   58m"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"In your local server(s) or any other server(s) that need to access the ingress, edit the hosts file (in\nLinux, usually /etc/hosts) and add the following lines (Example):"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"55.99.103.99          api.myhost.com\n55.99.103.99          webui.myhost.com\n55.99.103.99          monitoring.myhost.com"}),"\n",(0,i.jsx)(n.p,{children:"Option 2: Using Publicly Registered Domain (Production)"}),"\n",(0,i.jsx)(n.p,{children:"Contact Capella if unable to set up a purchased domain with the ingress. If the domain is set up,\nthe endpoints needed are the following:"}),"\n",(0,i.jsx)(n.p,{children:"Example with mydomain.com as the domain:"}),"\n",(0,i.jsxs)(n.p,{children:["REST API:                 ",(0,i.jsx)(n.a,{href:"https://api.myhost.com",children:"https://api.myhost.com"}),"\nWebUI:                     ",(0,i.jsx)(n.a,{href:"https://webui.myhost.com",children:"https://webui.myhost.com"}),"\nGrafana Dashboard:   ",(0,i.jsx)(n.a,{href:"https://monitoring.myhost.com",children:"https://monitoring.myhost.com"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"5.3.3.2. Test Ingress Endpoints\nIf using the test ingress, these steps can only be verified in the machine(s) where the hosts file was\nmodified. This is because the test ingress is not publicly DNS resolvable and so only those whose\nhosts file (or DNS) have been configured to resolve the test ingress will be able to access the\nCapella applications in this way."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Test Cambria Cluster WebUI with the ingress that starts with webui. Run steps 2-3 of 5.3.1. Cambria Cluster\nWebUI. Example:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://webui.myhost.com"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Test Cambria REST API with the ingress that starts with api. Run step 2 of 5.3.2. Cambrai Cluster REST API.\nExample:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://api.myhost.com/CambriaFC/v1/SystemInfo"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Test Grafana Dashboard with the ingress that starts with monitoring. Run the verification steps for the\nGrafana Dashboard section 1.4. Verify Grafana Deployment (steps 2-4) in the document in 3.7. Performance\nMetrics and Logging. Example:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://monitoring.myhost.com"})}),"\n",(0,i.jsx)(n.p,{children:"5.3.4. Cambria License\nThe Cambria license needs to be active in all entities where the Cambria application is deployed. Run the\nfollowing steps to check the cambria license. Access to a web browser is required:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Get the url for the License Manager WebUI:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Option 1: External Url if External Access is Enabled"}),"\n",(0,i.jsx)(n.p,{children:"Run the following command:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=\"{'https://'}{.status.loadBalancer.ingress[0].hostname}{':8481'}{'\\n'}\""})}),"\n",(0,i.jsx)(n.p,{children:"The response should look something like this:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://192.122.45.33:8481"})}),"\n",(0,i.jsx)(n.p,{children:"Option 2: Non-External Url Access"}),"\n",(0,i.jsx)(n.p,{children:"Run the following command to temporarily expose the License WebUI via port-forwarding:"}),"\n",(0,i.jsx)(n.p,{children:"kubectl port-forward -n default svc/cambriaclusterwebuiservice 8481:8481 --address=0.0.0.0"}),"\n",(0,i.jsx)(n.p,{children:"The url depends on the location of the port-forward. If the web browser and the port-forward are on the\nsame machine, use localhost. Otherwise, use the ip address of the machine with the port-forward:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://<server>:8481"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'In a web browser, enter the above url. This should trigger an "Unsafe" page similar to the one below:'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Click on Advanced and Proceed to [ EXTERNAL IP ] (unsafe). This will show the login page."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Log in using the credentials created in the Helm values yaml file (See cambriaClusterWebUIUser)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify that the License Status is valid for at least either the Primary or Backup. Preferably, both Primary and\nBackup should be valid. If there are issues with the license, wait a few minutes as sometimes it takes a few\nminutes to properly update. If still facing issues, contact the Capella support team."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"Testing Cambria FTC / Cluster\nThe following guide provides information on how to get started testing the Cambria FTC / Cluster software:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://www.dropbox.com/scl/fi/5vra6xff23vvng7aa4qyx/Cambria_Cluster_and_FTC_5_5_0_Kubernetes_User_Guide.pdf?rlkey=j3l9wjjo5ncbub9bh9bizrukr&st=tmmzm91q&dl=1"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"Updating / Upgrading Cambria Cluster / FTC\nThere are currently two ways to update / upgrade Cambria FTC / Cluster in the kubernetes environment."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"7.1. Option 1: Normal Upgrade via Helm Upgrade\nThis upgrade method is best for when changing version numbers, secrets such as the license key, WebUI users,\netc, and Cambria FTC | Cambria Cluster specific settings such as max number of pods, replicas, etc."}),"\n",(0,i.jsx)(n.p,{children:"!Warning! Known Issues\n\u25cf\npgClusterPassword cannot currently be updated via this method\n\u25cf\nChanging postgres version also cannot be updated via this method"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Edit the Helm configuration file (yaml) for your Kubernetes environment or create a new configuration file\nand edit the new file. See section 4.2. Creating and Editing Helm Configuration File for more details."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Run the following command to apply the upgrade"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"helm upgrade capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Restart the deployments"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl rollout restart deployment cambriaclusterapp cambriaclusterwebui -n default; \\ kubectl rollout restart deployment cambriaftcapp -n capella-worker"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Wait a few minutes for the kubernetes pods to install properly"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"7.2. Option 2: Upgrade via Cambria Cluster Reinstallation\nFor any upgrade cases for the Cambria Cluster | Cambria FTC environment, this is the most reliable option. This\nupgrade option basically uninstalls all of the Cambria FTC and Cluster components and then reinstall with the\nnew Helm chart and values (.yaml) file. As a result, this will delete the database and delete all of your\njobs in the Cambria Cluster UI."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Follow section 4.2. Creating and Editing Helm Configuration File to download and edit your new\ncapellaClusterConfig.yaml file."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In a command line / terminal window in your local server, run the following command:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"helm uninstall capella-cluster --wait"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Deploy the Helm configuration file with the following command"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"helm upgrade --install capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml"})}),"\n",(0,i.jsx)(n.p,{children:"7.3. Upgrade Verification\nThe best way to verify the upgrade is to use the steps in 5.0. Verify Cambria FTC / Cluster Installation. For any\nissues, contact the Capella support team."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Deleting Kubernetes Cluster",(0,i.jsx)(n.br,{}),"\n","Many resources are created in a Kubernetes environment. It is important that each step is followed\ncarefully: If using FTC's autoscaler, make sure no leftover Cambria FTC nodes are running."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Run the following commands to remove the Helm deployments:"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"helm uninstall capella-cluster -n default --wait"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"If any volumes are remaining, run the following command:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get pv -o name | awk -F'/' '{print $2}' | xargs -I{} kubectl patch pv {} -p='{\"spec\"{\"persistentVolumeReclaimPolicy\": \"Delete\"}}'"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Only if the ingress-nginx tool was deployed, do the following:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl delete namespace ingress-nginx"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Follow the delete steps from the document in section 3.5. Performance Metrics and Logging"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Akamai Cloud Home page, click on the Kubernetes section and delete the Cluster. Wait a few minutes\nfor node balancers and volumes to become available to delete manually"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the NodeBalancers section, delete any leftover node balancers that were created by the Kubernetes\ncluster"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Volumes section, delete any leftover volumes that were created by the Kubernetes Cluster"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"9",children:["\n",(0,i.jsx)(n.li,{children:"Quick Reference: Installation, Testing, and Teardown"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"9.1. Installation (Deploy from Linux to Akamai Cloud Kubernetes)\nFor quick installation, use the Terraform installation instructions:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://www.dropbox.com/scl/fi/y4noltg67q489f39ewx4k/Cambria_Cluster_and_FTC_5_5_0_Terraform_on_Akamai_Kubernetes.pdf?rlkey=m2it3z2q7p4sebfulilgd8vn4&st=vbn29kcl&dl=1"})}),"\n",(0,i.jsx)(n.p,{children:"9.2. Upgrades and Teardown"}),"\n",(0,i.jsx)(n.p,{children:"9.2.1. Cambria FTC | Cambria Cluster and/or the Kubernetes Cluster Upgrades\nEdit the capellaClusterConfig.yaml file and then run the following commands (See section 7. Updating /\nUpgrading Kubernetes Cluster for more details and warnings):"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"./quickUpgradeCambriaCluster.sh"})}),"\n",(0,i.jsx)(n.p,{children:"9.2.2. Cambria FTC | Cambria Cluster Uninstall\nIf just wanting to uninstall Cambria Cluster and Cambria FTC, run the following command:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"helm uninstall capella-cluster --wait"})}),"\n",(0,i.jsx)(n.p,{children:"9.2.3. Kubernetes Cluster Teardown\nAs this involves several components, it is best to do the cluster teardown using the steps in section 8. Deleting\nKubernetes Cluster."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"10",children:["\n",(0,i.jsx)(n.li,{children:"Quick Reference: Helpful Commands/Info for After Installation\nThis section provides helpful commands and other information that may be useful after the installation process\nsuch as how to get the WebUI address, what ports are available to use for incoming sources, etc."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Akamai Kubernetes Kubeconfig File [ For use with kubectl and Akamai Kubernetes Dashboard ]"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Log in to the Akamai Cloud dashboard and go to Clusters. Select your cluster from the list and click on the\nconfiguration file towards the top of the page."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Akamai Kubernetes Dashboard"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Log in to the Akamai Cloud dashboard and go to your Kubernetes Cluster. Click on the Kubernetes\nDashboard link."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Use the Akamai Kubernetes Cluster Configuration File to log in to the dashboard"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Cambria Cluster WebUI (via kubectl)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Run the following command to get the webui address:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get service/cambriaclusterwebuiservice -n default -o=jsonpath=\"{'https://'}{.status.loadBalancer.ingress[0].hostname}{':8161'}\""})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"To log in to the WebUI, the credentials are located in the Helm values .yaml file that you configure (See\nsection 3.3. Creating and Editing Helm Configuration File)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Cambria Cluster WebUI (via Kubernetes Dashboard)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Akamai Kubernetes Dashboard for your cluster, go to Services and look for the\ncambriaclusterwebuiservice service. Copy the IP address of one of the External Endpoints"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The WebUI address should be https://[ EXTERNAL IP ]:8161. To log in to the WebUI, the credentials are\nlocated in the Helm values .yaml file that you configure (See section 3.3. Creating and Editing Helm\nConfiguration File)"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Cambria Cluster REST API (via kubectl)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Run the following command to get the base REST API Web Address:"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get service/cambriaclusterservice -n default -o=jsonpath=\"{'https://'}{.status.loadBalancer.ingress[0].hostname}{':8650'}\""})}),"\n",(0,i.jsx)(n.p,{children:"The REST API url should look similar to this:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://23-45-226-151.ip.linodeusercontent.com:8650/CambriaFC/v1/Jobs?usertoken=12345678-1234-43f8-b4fc-53afd3893d5f"})}),"\n",(0,i.jsx)(n.p,{children:"Cambria Cluster REST API (via Kubernetes Dashboard)"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"In the Akamai Kubernetes Dashboard for your cluster, go to Services and look for the\ncambriaclusterservice service. Copy the IP address of one of the External Endpoints"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The REST API should look similar to this:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"https://23-45-226-151.ip.linodeusercontent.com:8650/CambriaFC/v1/Jobs?usertoken=12345678-1234-43f8-b4fc-53afd3893d5f"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Cambria FTC Instance External IP"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the Cambria Cluster WebUI, go to the Machines tab and copy the name of the machine (pod)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Run the following commands with the name of the machine (aka. ",(0,i.jsx)(n.code,{children:"<pod-name>"}),"):"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h1,{id:"replace-pod-name-with-your-pod-name",children:["Replace ",(0,i.jsx)(n.code,{children:"<pod-name>"})," with your pod name"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get pod/<pod-name> -n capella-worker -o=jsonpath={.spec.nodeName}"})}),"\n",(0,i.jsxs)(n.h1,{id:"replace-node-name-with-the-result-from-the-above-command",children:["Replace ",(0,i.jsx)(n.code,{children:"<node-name>"})," with the result from the above command"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl get node/<node-name> -n capella-worker -o=jsonpath={.status.addresses[1].address}"})}),"\n",(0,i.jsx)(n.p,{children:"Leader Cambria Cluster Pod\nRun the following command to get the name of the Cambria Cluster leader pod:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:'kubectl get lease -o=jsonpath="{.items[0].spec.holderIdentity}"'})}),"\n",(0,i.jsx)(n.p,{children:"Remote Access to Kubernetes Pod\nThe general command for remote accessing a pod is:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl exec -it <pod-name> -n <namespace> -- /bin/bash"})}),"\n",(0,i.jsx)(n.p,{children:"Example with Cambria FTC:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl exec -it cambriaftcapp-5c79586784-wbfvf -n capella-worker -- /bin/bash"})}),"\n",(0,i.jsx)(n.p,{children:"Extracting Cambria Cluster | Cambria FTC | Cambria License Logs\nIn a machine that has kubectl and the kubeconfig file for your Kubernetes cluster, open a terminal window and\nmake sure to set the KUBECONFIG environment variable to the path of your kubeconfig file. Then run one or\nmore of the following commands depending on what types of logs you need (or that Capella needs). You will get\na folder full of logs. Compress these logs into one zip file and send it to Capella:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"<pod-name>"}),": the name of the pod to grab logs from (Eg. cambriaftcapp-5c79586784-wbfvf)"]}),"\n",(0,i.jsx)(n.p,{children:"Cambria FTC:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl cp <pod-name>:/opt/capella/Cambria/Logs ./CambriaFTCLogs -n capella-worker"})}),"\n",(0,i.jsx)(n.p,{children:"Cambria Cluster:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl cp <pod-name>:/opt/capella/CambriaCluster/Logs ./CambriaClusterLogs -n default"})}),"\n",(0,i.jsx)(n.p,{children:"Cambria License Manager (Cambria FTC):"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl cp <pod-name>:/opt/capella/CambriaLicenseManager/Logs ./CambriaFTCLicLogs -n capella-worker"})}),"\n",(0,i.jsx)(n.p,{children:"Cambria License Manager (Cambria Cluster):"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl cp <pod-name>:/opt/capella/CambriaLicenseManager/Logs ./CambriaClusterLicLogs -n default"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["Copy File(s) to Cambria FTC / Cluster Pod\nIn some cases, you might need to copy files to a Cambria FTC / Cluster pod. For example, you have an MP4 file",(0,i.jsx)(n.br,{}),"\n","you want to use as a source directly from the encoding machine\u2019s file system. In this case, to copy the file over\nto the Cambria FTC / Cluster pod, do the following:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl cp <host-file-path> <pod-name>:<path-inside-container> -n <namespace>"})}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.h1,{id:"copy-file-to-cambria-ftc-pod",children:"Copy file to Cambria FTC pod"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl cp /mnt/n/MySource.mp4 cambriaftcapp-7c55887db9-t42v7:/var/media/MySource.mp4 -n capella-worker"})}),"\n",(0,i.jsx)(n.h1,{id:"copy-file-to-cambria-cluster-pod",children:"Copy file to Cambria Cluster pod"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl cp C:\\MyKeys\\MyKeyFile.key cambriaclusterapp-695dcc848f-vjpc7:/var/keys/MyKeyFile.key -n default"})}),"\n",(0,i.jsx)(n.h1,{id:"copy-directory-to-cambria-ftc-container",children:"Copy directory to Cambria FTC container"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl cp /mnt/n/MyMediaFiles cambriaftcapp-7c55887db9-t42v7:/var/temp/mediafiles -n capella-worker"})}),"\n",(0,i.jsx)(n.p,{children:"Restarting / Re-creating Pods\nKubectl does not currently have a way to restart pods. Instead, a pod will need to be \u201crestarted\u201d by deleting the\npod which causes a new pod to be created / existing pod to take over the containers."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl delete pod <pod-name> -n <namespace>"})}),"\n",(0,i.jsx)(n.p,{children:"Example:"}),"\n",(0,i.jsx)(n.h1,{id:"delete-cambria-ftc-container",children:"Delete Cambria FTC Container"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl delete pod cambriaftcapp-7c55887db9-t42v7 -n capella-worker"})}),"\n",(0,i.jsx)(n.h1,{id:"delete-cambria-cluster-container",children:"Delete Cambria Cluster Container"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"kubectl delete pod cambriaclusterapp-695dcc848f-vjpc7 -n default"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.ol,{start:"11",children:["\n",(0,i.jsx)(n.li,{children:"Glossary\nThis glossary provides a brief definition / description of some of the more common terms found in this guide."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"11.1. Kubernetes"}),"\n",(0,i.jsxs)(n.p,{children:["For Kubernetes terms, please refer to the Kubernetes Glossary:\n",(0,i.jsx)(n.code,{children:"https://kubernetes.io/docs/reference/glossary/?fundamental=true"})]}),"\n",(0,i.jsx)(n.p,{children:"11.2. Third-Party Tools"}),"\n",(0,i.jsx)(n.p,{children:"Argo: the Argo third-party system is a collection of tools for orchestrating parallel jobs in a Kubernetes\nenvironment."}),"\n",(0,i.jsx)(n.p,{children:"Argo-Events: an Argo tool that triggers specific Kubernetes functions based on events from other\ndependencies such as webhook, s3, etc."}),"\n",(0,i.jsx)(n.p,{children:"Cert-Manager: the cert-manager addon automates the process of retrieving and managing TLS certificates.\nThese certificates are periodically renewed to keep the certificates up to date and valid."}),"\n",(0,i.jsx)(n.p,{children:"Helm: the Helm third-party tool is used for deploying / managing (install, update, delete) deployments for\nKubernetes Cluster applications."}),"\n",(0,i.jsx)(n.p,{children:"Ingress-Nginx: the ingress-nginx addon is an ingress server using Nginx as a reverse proxy and load balancer.\nIn this case, ingress-nginx is used for applying domain name use to the Kubernetes services (REST API, WebUI,\netc)."}),"\n",(0,i.jsx)(n.p,{children:"11.3. Capella Applications"}),"\n",(0,i.jsx)(n.p,{children:"cambriaclusterapp: the Cambria Cluster application container. This container exists in all\ncambriaclusterapp-xyz pods."}),"\n",(0,i.jsx)(n.p,{children:"cambriaftautoscale: this container is used like a load balancer. It spawns new nodes with Cambria FTC\nspecific content whenever Cambria Cluster has jobs in the queue."}),"\n",(0,i.jsx)(n.p,{children:"cambriaftcapp: the Cambria FTC application container. This container exists in all cambriaftcapp-xyz pods."}),"\n",(0,i.jsx)(n.p,{children:"cambriaftcconnect: this container is used for automatically connecting Cambria FTC instances to Cambria\nCluster. This container exists in all cambriaftcapp-xyz pods."}),"\n",(0,i.jsx)(n.p,{children:"cambrialeaderelector: this container is used for Cambria Cluster replication in that it decides which of the\nCambria Cluster instances is the primary instance. This container exists in all cambriaclusterapp-xyz pods."}),"\n",(0,i.jsx)(n.p,{children:"pgcluster-capella: this type of pod holds the PostgreSQL database that Cambria Cluster uses / interacts with."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var t=s(6540);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);