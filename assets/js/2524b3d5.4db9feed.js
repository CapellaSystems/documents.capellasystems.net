"use strict";(globalThis.webpackChunkcapella_documentation=globalThis.webpackChunkcapella_documentation||[]).push([[1550],{3734(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Cambria_FTC/Tutorials/Database_Migration/Database_Migration","title":"Database Migration","description":"Note: If you have not downloaded any Cambria FTC/Cluster software before version 5.0, then this document does not apply to you. This document only applies for users who want to migrate their database information from Postgres 9.3 over to Postgres 14.3.","source":"@site/docs/Cambria_FTC/04-Tutorials/Database_Migration/index.md","sourceDirName":"Cambria_FTC/04-Tutorials/Database_Migration","slug":"/Cambria_FTC/Tutorials/Database_Migration/","permalink":"/docs/Cambria_FTC/Tutorials/Database_Migration/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Database_Migration","title":"Database Migration"},"sidebar":"FTCSidebar","previous":{"title":"Color Space Conversion","permalink":"/docs/Cambria_FTC/Tutorials/Color_Space_Coversion/"},"next":{"title":"Delete Source after Transcoding","permalink":"/docs/Cambria_FTC/Tutorials/Delete_Source_after_Tanscoding/"}}');var r=n(4848),a=n(8453);const o={id:"Database_Migration",title:"Database Migration"},i="Cambria FTC and Cluster 5.0: Database Migration",l={},d=[{value:"Objective",id:"objective",level:2},{value:"Quick Details",id:"quick-details",level:2},{value:"Database Migration Steps For Users with Standalone FTC and Cluster",id:"database-migration-steps-for-users-with-standalone-ftc-and-cluster",level:2},{value:"Optional Step:",id:"optional-step",level:3},{value:"Database Migration Steps For Users with Cluster Redundancy Primary/Backup Workflow:",id:"database-migration-steps-for-users-with-cluster-redundancy-primarybackup-workflow",level:2}];function c(e){const t={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"cambria-ftc-and-cluster-50-database-migration",children:"Cambria FTC and Cluster 5.0: Database Migration"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"Note:"})," If you have not downloaded any Cambria FTC/Cluster software before version 5.0, then this document does not apply to you. This document only applies for users who want to migrate their database information from Postgres 9.3 over to Postgres 14.3."]}),"\n",(0,r.jsx)(t.h2,{id:"objective",children:"Objective"}),"\n",(0,r.jsx)(t.p,{children:"Cambria FTC/Cluster versions 4.8 and lower used Postgres Database version 9.3 to store information such as settings, watch folders, job settings, etc. With the update to FTC/Cluster 5.0, the Postgres Database will now be upgraded to version 14.3. Due to the change, old settings and information that were stored in the previous database may need to be transferred into the new one. This document will show the required steps to migrate all of the data from the old Postgres Database to the new one so that all of the previous settings and information will be restored."}),"\n",(0,r.jsx)(t.h2,{id:"quick-details",children:"Quick Details"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Database migration between Postgres 9.3 and 14.3 is ",(0,r.jsx)(t.strong,{children:"not automatic"})]}),"\n",(0,r.jsxs)(t.li,{children:["Installing Cluster/FTC ver. 5.0 will come with a ",(0,r.jsx)(t.strong,{children:"clean"})," Database (postgres 14.3)"]}),"\n",(0,r.jsx)(t.li,{children:"Postgres 9.3 will still be installed on the system, which will be used to migrate all of the information to Postgres 14.3"}),"\n",(0,r.jsx)(t.li,{children:"Only migration from Postgres 9.3 (FTC/Cluster versions 4.8 or lower) to Postgres 14.3 (FTC/Cluster 5.0 and above) is supported"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"database-migration-steps-for-users-with-standalone-ftc-and-cluster",children:"Database Migration Steps For Users with Standalone FTC and Cluster"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Uninstall FTC/Cluster if the version is from 4.8 or lower."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Install FTC/Cluster 5.0 or above. Postgres 14.3 will automatically be installed."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:['From the start menu type "Cambria PostgreSQL Database Migration Tool" and run the program. If the tool can not be found, run ',(0,r.jsx)(t.strong,{children:"PostgreSQLUpdater.exe"})," generally located in these locations."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["For FTC:",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.code,{children:"C:\\Program Files (x86)\\Capella\\Cambria\\cpx64\\PostgreSQLUpdater.exe"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["For Cluster:",(0,r.jsx)(t.br,{}),"\n",(0,r.jsx)(t.code,{children:"C:\\Program Files (x86)\\Capella\\CambriaCluster\\cpx64\\PostgreSQLUpdater.exe"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Follow the instructions on the screen."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Check the database by seeing if old jobs and watch folders have been migrated over via Cambria Manager (or Cluster Manager)."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"optional-step",children:"Optional Step:"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.strong,{children:"WARNING:"})," We recommend ",(0,r.jsx)(t.strong,{children:"NOT"})," to remove Postgres 9.3, but it is an option because it is no longer needed. Removing it will no longer allow downgrading from FTC 5.0 because Postgres 9.3 does ",(0,r.jsx)(t.strong,{children:"NOT"})," accept database files from Postgres 14.3, and there is no workaround. Please double check that everything has migrated correctly before removing Postgres 9.3 if you choose to do so."]}),"\n",(0,r.jsx)(t.h2,{id:"database-migration-steps-for-users-with-cluster-redundancy-primarybackup-workflow",children:"Database Migration Steps For Users with Cluster Redundancy Primary/Backup Workflow:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["In the Backup Cluster, set the redundancy role to be ",(0,r.jsx)(t.strong,{children:"Stopped"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["In the Primary Cluster, set the redundancy role to be ",(0,r.jsx)(t.strong,{children:"No Backup"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Upgrade the build on the Primary to ver 5.0 or above."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Run ",(0,r.jsx)(t.strong,{children:"PostgreSQLUpdater.exe"})," on the Primary (only) with the new build"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.code,{children:"C:\\Program Files (x86)\\Capella\\CambriaCluster\\cpx64\\PostgreSQLUpdater.exe"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Upgrade the build on Backup machine while redundancy is set to ",(0,r.jsx)(t.strong,{children:"Stopped"}),". In the new build, redundancy role will be started with ",(0,r.jsx)(t.strong,{children:"No Backup"})," and an empty database."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Establish redundancy connection between Primary and Backup."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.p,{children:"For any questions or technical support, contact Capella Systems at:"}),"\n",(0,r.jsxs)(t.p,{children:["\ud83d\udce7 ",(0,r.jsx)(t.strong,{children:(0,r.jsx)(t.a,{href:"mailto:support@capellasystems.net",children:"support@capellasystems.net"})})]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,t,n){n.d(t,{R:()=>o,x:()=>i});var s=n(6540);const r={},a=s.createContext(r);function o(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);