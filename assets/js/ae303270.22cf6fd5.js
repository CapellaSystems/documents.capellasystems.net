"use strict";(self.webpackChunkcapella_documentation=self.webpackChunkcapella_documentation||[]).push([[2746],{2215:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"Cambria FTC/Installation Guides/Kubernetes/Akamai/index","title":"index","description":"Here is the cleaned and properly formatted Docusaurus Markdown file, using your requested structure (single block, no dropdowns, no broken sections):","source":"@site/docs/Cambria FTC/01-Installation Guides/01-Kubernetes/02-Akamai/index.md","sourceDirName":"Cambria FTC/01-Installation Guides/01-Kubernetes/02-Akamai","slug":"/Cambria FTC/Installation Guides/Kubernetes/Akamai/","permalink":"/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Cambria FTC/01-Installation Guides/01-Kubernetes/02-Akamai/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"FTCSidebar","previous":{"title":"index","permalink":"/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/"},"next":{"title":"Welcome","permalink":"/docs/Cambria FTC/Installation Guides/Windows/placeholder"}}');var s=r(4848),i=r(8453);const t={},l=void 0,o={},c=[{value:"Post-Install Verification",id:"post-install-verification",level:2},{value:"Upgrading",id:"upgrading",level:2},{value:"Option 1: Terraform Apply",id:"option-1-terraform-apply",level:3},{value:"Option 2: Helm-Based Upgrade",id:"option-2-helm-based-upgrade",level:3},{value:"Uninstallation",id:"uninstallation",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Here is the cleaned and properly formatted Docusaurus Markdown file, using your requested structure (single block, no dropdowns, no broken sections):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-markdown",children:"---\nid: cambria-cluster-aws\ntitle: Cambria Cluster & FTC 5.5.0 \u2013 Terraform on AWS Kubernetes\n---\n\n# Cambria Cluster & FTC 5.5.0 \u2013 Terraform on AWS Kubernetes\n\n## Table of Contents\n\n1. [Version and Overview](#version-and-overview)  \n2. [Critical Notes](#critical-notes)  \n3. [Prerequisites](#prerequisites)  \n4. [Preparing the AWS EC2 Instance](#preparing-the-aws-ec2-instance)  \n5. [Terraform Installation Process](#terraform-installation-process)  \n6. [Post-Install Verification](#post-install-verification)  \n7. [Upgrading](#upgrading)  \n8. [Uninstallation](#uninstallation)\n\n## Version and Overview\n\n**Version:** Cambria Cluster & FTC 5.5.0  \n**Deployment Target:** AWS Kubernetes (EKS)  \n**Method:** Terraform-based deployment  \n\nThis guide outlines how to install Cambria Cluster and Cambria FTC version 5.5.0 using Terraform on Amazon EKS.\n\n## Critical Notes\n\nBefore installing, review license agreements and documentation:  \n- [License Manager EULA](https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0)  \n- [FTC EULA](https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0)  \n- [Cluster EULA](https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0)  \n- [AWS Deployment Guide](https://www.dropbox.com/scl/fi/lbkhk9k6vwomxom3j6ad1/Cambria_Cluster_and_FTC_5_5_0_on_AWS_Kubernetes.pdf)  \n- [Monitoring & Logging Guide](https://www.dropbox.com/scl/fi/bq3kk6l6qjzbm8i8h6pqe/Prometheus_Grafana_Setup_for_Cambria_Cluster_5_5_0_on_AWS_Kubernetes.pdf)\n\n## Prerequisites\n\nProvision an AWS EC2 instance:\n\n- OS: Ubuntu 22.04  \n- CPU: 4+ vCPUs  \n- RAM: 16+ GB  \n- Disk: 100 GB EBS  \n- Security Group: allow TCP 22, 80, 443, 3000, 8080, 9443  \n- IAM Role: permissions for EC2, S3, EKS, ACM  \n\nInstall required tools:\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"sudo apt update && sudo apt upgrade -y\nsudo apt install curl unzip awscli libice6 libsm6 dbus libgtk-3-0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\n## Preparing the AWS EC2 Instance\n\nDownload and set up Terraform tools:\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:['curl -o terraform_AWS_CambriaCluster_1_0.zip -L "',(0,s.jsx)(n.a,{href:"https://www.dropbox.com/scl/fi/ck7ahg05yo0bglxz3itd1/terraform_AWS_CambriaCluster_1_0.zip?dl=1",children:"https://www.dropbox.com/scl/fi/ck7ahg05yo0bglxz3itd1/terraform_AWS_CambriaCluster_1_0.zip?dl=1"}),'"\nunzip terraform_AWS_CambriaCluster_1_0.zip\nchmod +x *.sh TerraformVariableEditor\n./setupTools.sh\n./installLogcli.sh']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\nValidate installs:\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"terraform -v\nkubectl version --client\nhelm version\nlogcli --version"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\n## Terraform Installation Process\n\nSet AWS credentials:\n\n```bash\nexport AWS_ACCESS_KEY_ID=<your-access-key>\nexport AWS_SECRET_ACCESS_KEY=<your-secret-key>\nexport AWS_REGION=<your-region>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Set Cambria environment variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"source ./setEnvVariablesCambriaCluster.sh\n"})}),"\n",(0,s.jsx)(n.p,{children:"Configure your deployment:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"./TerraformVariableEditor\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Edit ",(0,s.jsx)(n.code,{children:"CambriaCluster_AWS.tf"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'eks_cluster_name = "CambriaCluster"\nregion = "us-west-2"\nhost_name = "cambria.example.com"\nacme_registration_email = "admin@example.com"\nftc_instance_type = "m6a.2xlarge"\nmax_ftc_instances = 5\ncambria_cluster_replicas = 3\nloki_storage_type = "s3_embedcred"\nloki_s3_bucket_name = "cambria-loki-bucket"\nloki_log_retention_period = 7\nexpose_grafana = true\n'})}),"\n",(0,s.jsx)(n.p,{children:"Apply the Terraform plan:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"terraform init\nterraform plan -out plan.tfplan\nterraform apply -auto-approve plan.tfplan\n"})}),"\n",(0,s.jsx)(n.p,{children:"Configure Kubernetes access:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"export KUBECONFIG=kubeconfig.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"post-install-verification",children:"Post-Install Verification"}),"\n",(0,s.jsx)(n.p,{children:"Check pods and services:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"kubectl get pods -A\nkubectl get svc -A\nkubectl get ingress -A\n"})}),"\n",(0,s.jsx)(n.p,{children:"Access UIs:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["FTC: ",(0,s.jsx)(n.code,{children:"https://<host_name>"})]}),"\n",(0,s.jsxs)(n.li,{children:["Cluster UI: ",(0,s.jsx)(n.code,{children:"https://<host_name>:9443"})]}),"\n",(0,s.jsxs)(n.li,{children:["Grafana: ",(0,s.jsx)(n.code,{children:"https://<host_name>:3000"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Verify successful encodes and log visibility via Grafana and Loki."}),"\n",(0,s.jsx)(n.h2,{id:"upgrading",children:"Upgrading"}),"\n",(0,s.jsx)(n.h3,{id:"option-1-terraform-apply",children:"Option 1: Terraform Apply"}),"\n",(0,s.jsx)(n.p,{children:"Use for config updates like:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Replica count"}),"\n",(0,s.jsx)(n.li,{children:"Secrets and license keys"}),"\n",(0,s.jsx)(n.li,{children:"Hostnames and S3 log options"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"terraform plan -out plan.tfplan\nterraform apply -auto-approve plan.tfplan\n"})}),"\n",(0,s.jsx)(n.h3,{id:"option-2-helm-based-upgrade",children:"Option 2: Helm-Based Upgrade"}),"\n",(0,s.jsx)(n.p,{children:"If Helm is enabled:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"helm uninstall capella-cluster --wait\nhelm upgrade --install capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"uninstallation",children:"Uninstallation"}),"\n",(0,s.jsx)(n.p,{children:"Remove Cambria components and infrastructure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"helm uninstall capella-cluster -n default --wait\nkubectl get pv -o name | awk -F'/' '{print $2}' | xargs -I{} kubectl patch pv {} -p='{\"spec\":{\"persistentVolumeReclaimPolicy\":\"Delete\"}}'\nkubectl delete namespace monitoring\nkubectl delete namespace ingress-nginx\nterraform destroy -auto-approve\n"})}),"\n",(0,s.jsx)(n.p,{children:"Manually delete unused EKS clusters, volumes, load balancers, and S3 buckets if needed."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var a=r(6540);const s={},i=a.createContext(s);function t(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);