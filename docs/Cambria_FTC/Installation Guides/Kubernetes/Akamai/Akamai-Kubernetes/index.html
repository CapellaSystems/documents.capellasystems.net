<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/cambria-cluster-ftc-5-6-akamai-kubernetes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Akamai Cloud Kubernetes | Capella Documents</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documents.capellasystems.net/img/capellalogo.png"><meta data-rh="true" name="twitter:image" content="https://documents.capellasystems.net/img/capellalogo.png"><meta data-rh="true" property="og:url" content="https://documents.capellasystems.net/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Akamai Cloud Kubernetes | Capella Documents"><meta data-rh="true" name="description" content="Document History"><meta data-rh="true" property="og:description" content="Document History"><link data-rh="true" rel="icon" href="/img/capellalogo.png"><link data-rh="true" rel="canonical" href="https://documents.capellasystems.net/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/" hreflang="en"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FG2ZSI8I7W-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WQ8DZ3HYRX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WQ8DZ3HYRX",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Capella Documents" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.32bb5c81.css">
<script src="/assets/js/runtime~main.6cbec983.js" defer="defer"></script>
<script src="/assets/js/main.fdb8c634.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/capellalogo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/capellalogo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/capellalogo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Capella Documentation</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder">Cambria FTC</a><a class="navbar__item navbar__link" href="/docs/Cambria Stream/Installation Guides/Kubernetes/AWS/AWS_Kubernetes_Documentation/">Cambria Stream</a><a href="https://www.capellasystems.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Capella Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder">Installation Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder">Kubernetes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder">AWS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/">Akamai</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/">Akamai Cloud Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform-Kubernetes/">Terraform on Akamai Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/FTC-Overview/">Cambria FTC 5.x – Overview</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Oracle/placeholder">Oracle</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Windows/placeholder">Windows</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria_FTC/Release Notes/FTC_v5.6_to_v4.0">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria_FTC/API/REST_API_FTC_5_0_1_index">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria_FTC/Tutorials/AMI_Creation_and_Editing/">Tutorials<button style="margin-left:5px;cursor:pointer;margin-bottom:-2px;z-index:1000;background:transparent;padding:0;display:inline-flex;align-items:center;justify-content:center;border:none;color:var(--ifm-color-primary)" title="Sort A-Z"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-az lucide-arrow-down-a-z tutorial-sort-icon" aria-hidden="true"><path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path></svg></button></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria_FTC/FAQ/">FAQ</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation Guides</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Kubernetes</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Akamai</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Akamai Cloud Kubernetes</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cambria Cluster / FTC 5.6.0 — Akamai Cloud Kubernetes Help Documentation</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-history">Document History<a href="#document-history" class="hash-link" aria-label="Direct link to Document History" title="Direct link to Document History">​</a></h2>
<table><thead><tr><th>Version</th><th>Date</th><th>Description</th></tr></thead><tbody><tr><td>5.5.0</td><td>04/11/2025</td><td>Updated for release 5.5.0.23529 (Linux)</td></tr><tr><td>5.6.0</td><td>10/31/2025</td><td>Updated for release 5.6.0.26533 (Linux)</td></tr></tbody></table>
<blockquote>
<p><em>Download the online version of this document for the latest information and latest files. Always download the latest files.</em></p>
</blockquote>
<p>Do not move forward with the installation process if you do not agree with the End User License Agreement (EULA) for our products. You can download and read the EULA for Cambria FTC, Cambria Cluster, and Cambria License Manager from the links below:</p>
<ul>
<li><strong>Cambria Cluster</strong> — <a href="https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0"><a href="https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0</a></a></li>
<li><strong>Cambria FTC</strong> — <a href="https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0"><a href="https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0</a></a></li>
<li><strong>Cambria License Manager</strong> — <a href="https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0"><a href="https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0</a></a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="limitations-and-security-information">Limitations and Security Information<a href="#limitations-and-security-information" class="hash-link" aria-label="Direct link to Limitations and Security Information" title="Direct link to Limitations and Security Information">​</a></h3>
<p>Cambria FTC, Cluster, and License Manager are installed on Linux Docker containers. Limitations and security checks for this version are included in the Linux document below (<strong>informational only</strong>; Kubernetes setup starts in <strong>3. Create Kubernetes Cluster</strong>).</p>
<ul>
<li>
<p><strong>Cambria FTC / Cluster (sections 8 and 9):</strong><br>
<a href="https://www.dropbox.com/scl/fi/rvf02h8tajsxrfbhpgmzy/Linux_Cambria_FTC_5_6_0_Guide.pdf?rlkey=gtqeowx2b9gartth8s6dwo95j&amp;st=4wpy1dfi&amp;dl=0"><a href="https://www.dropbox.com/scl/fi/rvf02h8tajsxrfbhpgmzy/Linux_Cambria_FTC_5_6_0_Guide.pdf?rlkey=gtqeowx2b9gartth8s6dwo95j&amp;st=4wpy1dfi&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/rvf02h8tajsxrfbhpgmzy/Linux_Cambria_FTC_5_6_0_Guide.pdf?rlkey=gtqeowx2b9gartth8s6dwo95j&amp;st=4wpy1dfi&amp;dl=0</a></a></p>
</li>
<li>
<p>**Important: Before You Begin
PDF documents have a copy/paste issue. For best results, download this document and any referenced PDF documents in this guide and open them in a PDF viewer such as Adobe Acrobat.<br>
<!-- -->For commands that are in more than one line, copy each line one by one and check that the copied command matches the one in the document.</p>
</li>
</ul>
<p>When copying commands:</p>
<ul>
<li>If a command spans multiple lines, <strong>copy each line individually</strong>.</li>
<li>After copying, <strong>verify that the pasted command matches the text shown in the document</strong>.</li>
</ul>
<blockquote>
<p><strong>Information:</strong> This document references <strong>Kubernetes 1.34</strong> only.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-critical-information-read-before-proceeding-with-installation">⚠️ Critical Information: Read Before Proceeding with Installation<a href="#️-critical-information-read-before-proceeding-with-installation" class="hash-link" aria-label="Direct link to ⚠️ Critical Information: Read Before Proceeding with Installation" title="Direct link to ⚠️ Critical Information: Read Before Proceeding with Installation">​</a></h2>
<p>Before starting the installation, carefully review the following considerations. Skipping this section
may result in errors, failed deployments, or misconfigurations.</p>
<ol>
<li>
<p><strong>A New Kubernetes Cluster Will Be Deployed</strong><br>
<!-- -->● The installation process creates a brand-new Kubernetes cluster to keep the Cambria ecosystem
isolated from other applications.</p>
</li>
<li>
<p><strong>Default Installation is Non-Secure</strong><br>
<!-- -->● The guide covers installation with default settings in an open environment (not secure).<br>
<!-- -->● If you require a secure or customized setup, you will need Akamai Cloud expertise, which is not
covered in this guide.<br>
<!-- -->● Firewall information is provided in section 1.5. Firewall Information</p>
</li>
<li>
<p><strong>Understand Your Transcoding Requirements</strong><br>
<!-- -->● Know your expected transcoding volume, input/output specs, and whether a GPU is needed.<br>
<!-- -->● Refer to section 1.3. Akamai Cloud Machine Information and Benchmark for guidelines on machine
requirements.</p>
</li>
<li>
<p><strong>Administrative Rights Required</strong><br>
<!-- -->● Many of the steps in this guide require administrative rights to Akamai Cloud for adding permissions and
performing other administrative functions of that sort.</p>
</li>
<li>
<p><strong>Check Akamai Cloud Account Quota</strong><br>
<!-- -->● Ensure the Akamai Cloud account has sufficient quota to deploy Kubernetes resources.<br>
<!-- -->● See section 1.2. Resource Usage for estimated resource requirements.</p>
</li>
<li>
<p><strong>A Separate Linux Machine is Required</strong><br>
<!-- -->● A dedicated Linux machine (preferably Ubuntu on an Akamai Cloud Linode machine) is needed to
deploy Kubernetes.<br>
<!-- -->● Keeping Kubernetes tools and configuration files on a dedicated system is strongly recommended.</p>
</li>
<li>
<p><strong>Verify Region-Specific Resource Availability</strong><br>
<!-- -->● Not all Akamai Cloud regions support the same resources (e.g., GPU availability varies by region).<br>
<!-- -->● Consult Akamai Cloud documentation to confirm available resources in your desired region.</p>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-overview">Document Overview<a href="#document-overview" class="hash-link" aria-label="Direct link to Document Overview" title="Direct link to Document Overview">​</a></h2>
<p>The purpose of this document is to provide a walkthrough of the installation and initial testing process of the Cambria Cluster and Cambria FTC applications in the Kubernetes environment. The basic view of the document is the following:</p>
<ol>
<li>Overview of the Cambria Cluster / FTC Environment in a Kubernetes Environment</li>
<li>Preparation for the installation (Prerequisites)</li>
<li>Create and configure the Kubernetes Cluster</li>
<li>Install Cambria Cluster and Cambria FTC on the Kubernetes Cluster</li>
<li>Verify the installation is working properly</li>
<li>Test the Cambria Cluster / FTC applications</li>
<li>Update the Cambria Cluster / FTC applications on Kubernetes Cluster</li>
<li>Delete a Kubernetes Cluster</li>
<li>Quick Reference of Kubernetes Installation</li>
<li>Quick Reference of Important Kubernetes Components (URLs, template projects, test player, etc.)</li>
<li>Glossary of important terms</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-overview">1. Overview<a href="#1-overview" class="hash-link" aria-label="Direct link to 1. Overview" title="Direct link to 1. Overview">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-cambria-cluster--ftc-kubernetes-deployment">1.1. Cambria Cluster / FTC Kubernetes Deployment<a href="#11-cambria-cluster--ftc-kubernetes-deployment" class="hash-link" aria-label="Direct link to 1.1. Cambria Cluster / FTC Kubernetes Deployment" title="Direct link to 1.1. Cambria Cluster / FTC Kubernetes Deployment">​</a></h3>
<p>There are two major applications involved in this installation: <strong>Cambria Cluster</strong> and <strong>Cambria FTC</strong>.</p>
<p><strong>Cambria Cluster</strong> This deployment is recommended to run on at least 3 nodes (replica = 3) with a service (Load Balancer) that exposes the application externally. For each of these nodes, Cambria Cluster will be installed on its own pod and designated to its own node. One node acts as the leader and the other two are replicas for the purpose of replacing the leader in the case it becomes inactive, corrupted, etc. Each Cambria Cluster pod has three containers::</p>
<ol>
<li>
<p><strong>Cambria Cluster</strong> (application)</p>
</li>
<li>
<p><strong>Leader Elector</strong> — that chooses which of the Cambria Cluster node / pod will be the leader</p>
</li>
<li>
<p><strong>Cambria FTC Autoscaler</strong> — that when the FTC autoscaler is enabled, it will automatically deploy worker nodes for encoding purposes based on the number of encoding jobs queued to the system. This is based on the calculation (rounded down):</p>
<p><strong>Number of Nodes to Deploy = (Number of Queued Jobs + 2) / 3</strong></p>
</li>
</ol>
<p>Also for the Cluster deployment, there is a corresponding PostgreSQL database installed on a separate pod for each active Cambria Cluster pod. The data is replicated between the different database pods in order to preserve data in case of issues with the database and/or Cluster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-ftc">Cambria FTC:<a href="#cambria-ftc" class="hash-link" aria-label="Direct link to Cambria FTC:" title="Direct link to Cambria FTC:">​</a></h3>
<p>Capella’s Cambria FTC deployment consists of one or more nodes that (by default) are of different instance
types than the Cambria Cluster nodes. These nodes focus specifically on running encoding tasks. Similar to
Cambria Cluster, the Cambria FTC application is installed on its own pod and designated to its own node. Each
Cambria FTC pod has three containers:</p>
<ol>
<li>Cambria FTC (application)</li>
<li>Auto-Connect FTC dotnet tool that does the following: 1. list pods, 2. attempts to find Cambria
Cluster, and 3. connects the Cambria FTC application running in the pod to the Cambria Cluster that it
found. This container also deletes its own node pool or recycles its node if no Cambria Cluster is found
within a specific time (~20 minutes)</li>
<li>Pgcluster database for storing its encoder&#x27;s own job contents and other such information for as long
as the pod is running.</li>
</ol>
<p>Each node in the Kubernetes Cluster will either be running the Cluster deployment or the FTC deployment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-resource-usage">1.2. Resource Usage<a href="#12-resource-usage" class="hash-link" aria-label="Direct link to 1.2. Resource Usage" title="Direct link to 1.2. Resource Usage">​</a></h3>
<p>The resources used and their quantities will vary depending on requirements and different
environments. Below is general information about some of the major resource usage (other resources may be
used. Consult Akamai Cloud documentation for other resources created, usage limits, etc):</p>
<p>Akamai Cloud Documentation:<br>
<a href="https://techdocs.akamai.com/cloud-computing/docs/getting-started-with-lke-linode-kubernetes-engine" target="_blank" rel="noopener noreferrer">https://techdocs.akamai.com/cloud-computing/docs/getting-started-with-lke-linode-kubernetes-engine</a></p>
<table><thead><tr><th>Resource</th><th>Details</th></tr></thead><tbody><tr><td>NodeBalancers</td><td>0–3 NodeBalancers (Manager WebUI, Manager Web Server, Grafana)<br>0–1 NodeBalancer (Ingress)</td></tr><tr><td>Nodes</td><td>X Cambria Manager Instances (Default is 3)<br>Y Cambria FTC Instances (Depends on max FTC instance configuration; Default is 20)</td></tr><tr><td>Networking</td><td>No VPCs are created</td></tr><tr><td>Security</td><td>By default, no firewalls are created. However, Firewalls can be applied to the LKE cluster nodes for stricter security</td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-akamai-cloud-machine-information-and-benchmark">1.3. Akamai Cloud Machine Information and Benchmark<a href="#13-akamai-cloud-machine-information-and-benchmark" class="hash-link" aria-label="Direct link to 1.3. Akamai Cloud Machine Information and Benchmark" title="Direct link to 1.3. Akamai Cloud Machine Information and Benchmark">​</a></h3>
<p>The following is a benchmark of two Akamai Cloud machines. The information below is as of October 2025.<br>
<!-- -->Note that the benchmark involves read from / write to Akamai ObjectStorage which influences the real-time speed of
transcoding jobs.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-job-information">Benchmark Job Information<a href="#benchmark-job-information" class="hash-link" aria-label="Direct link to Benchmark Job Information" title="Direct link to Benchmark Job Information">​</a></h4>
<table><thead><tr><th>Container</th><th>Codec</th><th>Frame Rate</th><th>Resolution</th><th>Bitrate</th></tr></thead><tbody><tr><td>Source</td><td>TS H.264</td><td>30</td><td>1920 x 1080</td><td>8 Mbps</td></tr><tr><td>Output</td><td>HLS/TS H.264</td><td>29.97</td><td>1920 x 1080 @ 4Mbps<br>1280 x 720 @ 2.4Mbps<br>640 x 480 @ 0.8Mbps<br>320 x 240 @ 0.3Mbps</td><td>—</td></tr></tbody></table>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-g6-dedicated-16--amd-epyc-7713-">a. g6-dedicated-16 [ AMD EPYC 7713 ]<a href="#a-g6-dedicated-16--amd-epyc-7713-" class="hash-link" aria-label="Direct link to a. g6-dedicated-16 [ AMD EPYC 7713 ]" title="Direct link to a. g6-dedicated-16 [ AMD EPYC 7713 ]">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="machine-info">Machine Info<a href="#machine-info" class="hash-link" aria-label="Direct link to Machine Info" title="Direct link to Machine Info">​</a></h3>
<table><thead><tr><th>Name</th><th>RAM</th><th>CPUs</th><th>Storage</th><th>Transfer</th><th>Network In/Out</th><th>Cost per Hour</th></tr></thead><tbody><tr><td>Dedicated 32 GB</td><td>32 GB</td><td>16</td><td>640 GB</td><td>7 TB</td><td>40 Gbps / 7 Gbps</td><td>$0.432 (As of 10/15/2025)</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-results">Benchmark Results<a href="#benchmark-results" class="hash-link" aria-label="Direct link to Benchmark Results" title="Direct link to Benchmark Results">​</a></h3>
<ul>
<li><strong># of Concurrent Jobs:</strong> 2</li>
<li><strong>Real Time Speed:</strong> For each job: 0.65x RT (slower than real-time)</li>
<li><strong>Throughput:</strong> 1.30x RT (it takes around 47 seconds to transcode 1 minute of source)</li>
<li><strong>CPU Usage:</strong> 100%</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-g6-dedicated-56--amd-epyc-7713-">b. g6-dedicated-56 [ AMD EPYC 7713 ]<a href="#b-g6-dedicated-56--amd-epyc-7713-" class="hash-link" aria-label="Direct link to b. g6-dedicated-56 [ AMD EPYC 7713 ]" title="Direct link to b. g6-dedicated-56 [ AMD EPYC 7713 ]">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="machine-info-1">Machine Info<a href="#machine-info-1" class="hash-link" aria-label="Direct link to Machine Info" title="Direct link to Machine Info">​</a></h3>
<table><thead><tr><th>Name</th><th>RAM</th><th>CPUs</th><th>Storage</th><th>Transfer</th><th>Network In/Out</th><th>Cost per Hour</th></tr></thead><tbody><tr><td>Dedicated 256 GB</td><td>256 GB</td><td>56</td><td>5000 GB</td><td>11 TB</td><td>40 Gbps / 11 Gbps</td><td>$3.456 (As of 05/28/2024)</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-results-1">Benchmark Results<a href="#benchmark-results-1" class="hash-link" aria-label="Direct link to Benchmark Results" title="Direct link to Benchmark Results">​</a></h3>
<ul>
<li><strong># of Concurrent Jobs:</strong> 2</li>
<li><strong>Real Time Speed:</strong> For each job: 1.56x RT (faster than real-time)</li>
<li><strong>Throughput:</strong> 3.12x RT (it takes around 20 seconds to transcode 1 minute of source)</li>
<li><strong>CPU Usage:</strong> ~90%</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-findings">Benchmark Findings<a href="#benchmark-findings" class="hash-link" aria-label="Direct link to Benchmark Findings" title="Direct link to Benchmark Findings">​</a></h3>
<p>The results show the g6-dedicated-56 has higher overall throughput. This is expected as the instance has
more processing power than the g6-dedicated-16. However, if you take into account the cost per hour for
each machine, the more cost efficient option is to go with the <strong>g6-dedicated-16</strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-cambria-application-access">1.4. Cambria Application Access<a href="#14-cambria-application-access" class="hash-link" aria-label="Direct link to 1.4. Cambria Application Access" title="Direct link to 1.4. Cambria Application Access">​</a></h3>
<p>The Cambria applications are accessible via the following methods:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="141-external-access-via-tcp-load-balancer">1.4.1. External Access via TCP Load Balancer<a href="#141-external-access-via-tcp-load-balancer" class="hash-link" aria-label="Direct link to 1.4.1. External Access via TCP Load Balancer" title="Direct link to 1.4.1. External Access via TCP Load Balancer">​</a></h4>
<p>The default Cambria installation configures the Cambria applications to be exposed through load balancers.
There is one for the Cambria Manager WebUI + License Manager, and one for the web / REST API server. The
load balancers are publicly available and can be accessed either through its public ip address or domain name,
and the application&#x27;s TCP port.</p>
<p>Examples:</p>
<p>Cambria Manager WebUI:</p>
<p><a href="https://44.33.212.155:8161" target="_blank" rel="noopener noreferrer">https://44.33.212.155:8161</a><br>
<!-- -->Cambria REST API:<br>
<a href="https://121.121.121.121:8650/CambriaFC/v1/SystemInfo" target="_blank" rel="noopener noreferrer">https://121.121.121.121:8650/CambriaFC/v1/SystemInfo</a></p>
<p>External access in this way can be turned on / off via a configuration variable. See <strong>4.2. Creating and Editing
Helm Configuration File</strong>. If this feature is disabled, another method of access will need to be configured.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="142-http-ingress-via-reverse-proxy">1.4.2. HTTP Ingress via Reverse Proxy<a href="#142-http-ingress-via-reverse-proxy" class="hash-link" aria-label="Direct link to 1.4.2. HTTP Ingress via Reverse Proxy" title="Direct link to 1.4.2. HTTP Ingress via Reverse Proxy">​</a></h3>
<p>In cases where the external access via TCP load balancer is not acceptable or for using a purchased domain
name from servicers such as GoDaddy, the Cambria installation provides the option to expose an ingress.</p>
<p>Similar to the external access load balancers, the Cambria Manager WebUI and web / REST API server are
exposed. However, only <strong>one</strong> IP address / domain name is needed in this case.</p>
<p>How it works is that the Cambria WebUI is exposed through the subdomain <strong>webui</strong>, the Cambria web server
through the subdomain <strong>api</strong>, and Grafana dashboard through the subdomain <strong>monitoring</strong>. The following is an
example with the domain <strong>mydomain.com</strong>:</p>
<ul>
<li>Cambria Manager WebUI:<br>
<a href="https://webui.mydomain.com" target="_blank" rel="noopener noreferrer">https://webui.mydomain.com</a></li>
<li>Cambria REST API:<br>
<a href="https://api.mydomain.com" target="_blank" rel="noopener noreferrer">https://api.mydomain.com</a></li>
<li>Grafana Dashboard:<br>
<a href="https://monitoring.mydomain.com" target="_blank" rel="noopener noreferrer">https://monitoring.mydomain.com</a></li>
</ul>
<p>Capella provides a default ingress hostname for testing purposes only. In production, the default hostname, SSL
certificate, and other such information needs to be configured. More information about ingress configuration is
explained later in this guide.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="15-firewall-information">1.5. Firewall Information<a href="#15-firewall-information" class="hash-link" aria-label="Direct link to 1.5. Firewall Information" title="Direct link to 1.5. Firewall Information">​</a></h3>
<p>By default, this guide creates a kubernetes cluster with default settings which do not include a
Firewall. For custom / non-default configurations, or to explore with a more restrictive network based on the
default virtual network created, the following is a list of known ports that the Cambria applications use:</p>
<table><thead><tr><th style="text-align:right">Port(s)</th><th style="text-align:center">Protocol</th><th style="text-align:center">Direction</th><th>Description</th></tr></thead><tbody><tr><td style="text-align:right">8650</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Cambria Cluster REST API</td></tr><tr><td style="text-align:right">8161</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Cambria Cluster WebUI</td></tr><tr><td style="text-align:right">8678</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Cambria License Manager Web Server</td></tr><tr><td style="text-align:right">8481</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Cambria License Manager WebUI</td></tr><tr><td style="text-align:right">9100</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Prometheus System Exporter for Cambria Cluster</td></tr><tr><td style="text-align:right">8648</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Cambria FTC REST API</td></tr><tr><td style="text-align:right">3100</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Loki Logging Service</td></tr><tr><td style="text-align:right">3000</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Grafana Dashboard</td></tr><tr><td style="text-align:right">443</td><td style="text-align:center">TCP</td><td style="text-align:center">Inbound</td><td>Capella Ingress</td></tr><tr><td style="text-align:right">ALL</td><td style="text-align:center">TCP/UDP</td><td style="text-align:center">Outbound</td><td>Allow all outbound traffic</td></tr></tbody></table>
<p>Also, for Cambria licensing, any Cambria Cluster and Cambria FTC machine requires that at least the following
domains be exposed in your firewall (both inbound and outbound traffic):</p>
<table><thead><tr><th>Domain</th><th>Port(s)</th><th>Protocol</th><th>Traffic</th><th>Description</th></tr></thead><tbody><tr><td>api.cryptlex.com</td><td>443</td><td>TCP</td><td>In/Out</td><td>License Server</td></tr><tr><td>cryptlexapi.capellasystems.net</td><td>8485</td><td>TCP</td><td>In/Out</td><td>License Cache Server</td></tr><tr><td>cpfs.capellasystems.net</td><td>8483</td><td>TCP</td><td>In/Out</td><td>License Backup Server</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="16-specifications-for-linux-deployment-server">1.6. Specifications for Linux Deployment Server<a href="#16-specifications-for-linux-deployment-server" class="hash-link" aria-label="Direct link to 1.6. Specifications for Linux Deployment Server" title="Direct link to 1.6. Specifications for Linux Deployment Server">​</a></h3>
<p>In order to deploy Cambria FTC, a Linux Deployment Server is required because this is where all of the tools,
dependencies, and packages for the Cambria FTC Kubernetes deployment will be installed and/or stored. If you
already have a deployment server, you can skip this section.</p>
<p>Important: Linux Deployment Server Machine Information<br>
<!-- -->The instructions in this document perform functions using a root user. To keep things consistent, Capella
strongly recommends using Akamai Linode instances for the deployment process.</p>
<p>Capella tests deployment with the Dedicated 4GB (g6-dedicated-2) instance type</p>
<p>Minimum Requirements:<br>
<!-- -->Operating System (OS): Ubuntu 24.04<br>
<!-- -->CPU(s): 2<br>
<!-- -->RAM: 2 GB<br>
<!-- -->Storage: 10 GB</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-prerequisites">2. Prerequisites<a href="#2-prerequisites" class="hash-link" aria-label="Direct link to 2. Prerequisites" title="Direct link to 2. Prerequisites">​</a></h2>
<p>The following steps need to be completed before the deployment process.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-linux-tools">2.1. Linux Tools<a href="#21-linux-tools" class="hash-link" aria-label="Direct link to 2.1. Linux Tools" title="Direct link to 2.1. Linux Tools">​</a></h3>
<p>This guide uses curl, unzip, and jq to run certain commands and download the required tools and applications.
Therefore, the Linux server used for deployment will need to have these tools installed.</p>
<p>Example with Ubuntu 24.04:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt update &amp;&amp; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo DEBIAN_FRONTEND=noninteractive apt -o Dpkg::Options::=&quot;--force-confold&quot; -y upgrade &amp;&amp; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo DEBIAN_FRONTEND=noninteractive apt -o Dpkg::Options::=&quot;--force-confold&quot; -y install curl unzip jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-cambria-ftc-package">2.2. Cambria FTC Package<a href="#22-cambria-ftc-package" class="hash-link" aria-label="Direct link to 2.2. Cambria FTC Package" title="Direct link to 2.2. Cambria FTC Package">​</a></h3>
<p>The components of this installation are packaged in a zip archive. Download it using the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -o CambriaClusterKubernetesAkamai_5_6_0.zip -L \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;https://www.dropbox.com/scl/fi/58x4oeiijhf3au3hnit38/CambriaClusterKubernetesAkamai_5_6_0.zip?rlkey=\</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uppqqa29s9yresdk2xk7qh7lt&amp;st=s2mus6im&amp;dl=0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">unzip -o CambriaClusterKubernetesAkamai_5_6_0.zip &amp;&amp; chmod +x *.sh ./bin/*.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Important: the scripts included have been tested with Ubuntu. They may work with other Linux distributions
but not tested</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-kubernetes-tools-kubectl-helm-linodecli">2.2.1. Kubernetes Tools: kubectl, helm, linode‑cli<a href="#221-kubernetes-tools-kubectl-helm-linodecli" class="hash-link" aria-label="Direct link to 2.2.1. Kubernetes Tools: kubectl, helm, linode‑cli" title="Direct link to 2.2.1. Kubernetes Tools: kubectl, helm, linode‑cli">​</a></h4>
<p>There are 2 options available for installing the kubernetes required tools for deployment to Akamai Cloud:</p>
<p><strong>Option 1 (script, verified on Ubuntu):</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/installKubeTools.sh &amp;&amp; ./bin/installKubeToolsAkamai.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>If successful, use a new terminal window or restart the terminal window where the above steps were run</p>
</blockquote>
<p><strong>Option 2 (manual):</strong></p>
<ul>
<li>kubectl — <a href="https://kubernetes.io/docs/tasks/tools/"><a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/tools/</a></a></li>
<li>helm — <a href="https://helm.sh/docs/intro/install/"><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">https://helm.sh/docs/intro/install/</a></a></li>
<li>linode‑cli — <a href="https://techdocs.akamai.com/cloud-computing/docs/install-and-configure-the-cli"><a href="https://techdocs.akamai.com/cloud-computing/docs/install-and-configure-the-cli" target="_blank" rel="noopener noreferrer">https://techdocs.akamai.com/cloud-computing/docs/install-and-configure-the-cli</a></a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-verification">2.2.2. Verification<a href="#222-verification" class="hash-link" aria-label="Direct link to 2.2.2. Verification" title="Direct link to 2.2.2. Verification">​</a></h4>
<p>If any of the commands below fail, review the installation instructions for the failing tool and try again:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl version --client &amp;&amp; helm version &amp;&amp; linode-cli --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-kubernetes-cluster-akamai-lke">3. Create Kubernetes Cluster (Akamai LKE)<a href="#3-create-kubernetes-cluster-akamai-lke" class="hash-link" aria-label="Direct link to 3. Create Kubernetes Cluster (Akamai LKE)" title="Direct link to 3. Create Kubernetes Cluster (Akamai LKE)">​</a></h2>
<p>The following section provides the basic steps needed to create a Kubernetes Cluster on Akamai Cloud.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-create-lke-cluster-and-cambria-cluster-node-group">3.1. Create LKE Cluster and Cambria Cluster Node Group<a href="#31-create-lke-cluster-and-cambria-cluster-node-group" class="hash-link" aria-label="Direct link to 3.1. Create LKE Cluster and Cambria Cluster Node Group" title="Direct link to 3.1. Create LKE Cluster and Cambria Cluster Node Group">​</a></h3>
<p>In the Akamai Cloud Dashboard, go to Kubernetes and Create Cluster and configure as follows:</p>
<table><thead><tr><th><strong>Setting</strong></th><th><strong>Value / Description</strong></th></tr></thead><tbody><tr><td><strong>Cluster Label</strong></td><td>Choose a label (e.g., <code>cambria-cluster</code>)</td></tr><tr><td><strong>Cluster Tier</strong></td><td>In most cases, this should be <strong>LKE</strong></td></tr><tr><td><strong>Region</strong></td><td>Your region of operation (e.g., <strong>US, Los Angeles, CA (us-lax)</strong>)</td></tr><tr><td><strong>Kubernetes Version</strong></td><td><strong>1.34</strong></td></tr><tr><td><strong>Akamai App Platform</strong></td><td><strong>No</strong></td></tr><tr><td><strong>HA Control Plane</strong></td><td>For testing, set to <strong>No</strong>. For production, recommended <strong>Yes</strong> (incurs additional cost; see Akamai docs)</td></tr><tr><td><strong>Control Plane ACL</strong></td><td>Only enable if you already know which IP CIDRs need access to the LKE control plane; otherwise leave as-is</td></tr></tbody></table>
<blockquote>
<p>Do <strong>not</strong> create the cluster yet; add nodegroups first.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="311-cambria-cluster-nodegroup-managers">3.1.1. Cambria Cluster Nodegroup (Managers)<a href="#311-cambria-cluster-nodegroup-managers" class="hash-link" aria-label="Direct link to 3.1.1. Cambria Cluster Nodegroup (Managers)" title="Direct link to 3.1.1. Cambria Cluster Nodegroup (Managers)">​</a></h4>
<p>One set of nodes that need to be added are the Cambria Cluster nodes. These are also referred to as the
Manager Nodes. At least one Cambria Cluster node needs to be running at all times in the Kubernetes cluster.<br>
<!-- -->To create these nodes, select the number of nodes to assign to the Cambria Cluster node pool in the Add Node
Pools section</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="information--recommendation">Information / Recommendation<a href="#information--recommendation" class="hash-link" aria-label="Direct link to Information / Recommendation" title="Direct link to Information / Recommendation">​</a></h4>
<p>Cambria Cluster manages scheduling and handling Cambria FTC encoding / packaging programs. Think about
how many programs will be intended to run and choose an instance type accordingly. The lowest recommended
machine type for the manager machines is <strong>Dedicated 8GB</strong>.</p>
<p>It is also recommended to set the node count to <strong>3</strong>. This is because <strong>1 of the nodes will act as the Cambria
Cluster node</strong> while the other <strong>2 nodes act as backup</strong> (web server and database are replicated / duplicated).
If the Cambria Cluster node goes down or stops responding, one of the other two nodes will take over as the
Cambria Cluster node. Depending on your workflow(s), think about how many backup nodes may be needed.</p>
<p><strong>Plan:</strong> Dedicated 8GB (this is the recommended plan, but can be configured as needed)<br>
<strong>Nodes:</strong> 3 (this is the recommended for manager redundancy, but can be configured as needed)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="312-create-cambria-ftc-node-groups-workers">3.1.2. Create Cambria FTC Node Group(s) (Workers)<a href="#312-create-cambria-ftc-node-groups-workers" class="hash-link" aria-label="Direct link to 3.1.2. Create Cambria FTC Node Group(s) (Workers)" title="Direct link to 3.1.2. Create Cambria FTC Node Group(s) (Workers)">​</a></h4>
<p>Skip this step if planning to use Cambria FTC&#x27;s autoscaler. Run the following steps to create the Node
Group(s) for the worker application instances (replace the highlighted values to those of your specific
environment):</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="information--recommendation-1">Information / Recommendation<a href="#information--recommendation-1" class="hash-link" aria-label="Direct link to Information / Recommendation" title="Direct link to Information / Recommendation">​</a></h4>
<p>For this particular case, <strong>Cambria FTC nodes need to be added manually</strong>. Therefore, you will need to think
about what machine / instance types are needed for running the Cambria FTC workflows. Based on benchmarks<br>
<!-- -->(See <strong>1.3. Akamai Cloud Machine Information and Benchmark</strong>), the recommended machine / instance type
to get started is <strong>g6-dedicated-16</strong>.</p>
<p>To get started, it is recommended to start with <strong>one instance</strong>. This way, when the installation is complete,
there will already be one Cambria FTC instance available to test with. The number of instances can always be
scaled up or down, up to the maximum FTC instance count configured in<br>
<strong>section 4.2. Creating and Editing Helm Configuration File</strong>.</p>
<p><strong>Plan:</strong> Dedicated 32GB (this is the recommended plan, but can be configured as needed)<br>
<strong>Nodes:</strong> 1+</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="313-deploy-the-kubernetes-cluster">3.1.3. Deploy the Kubernetes Cluster<a href="#313-deploy-the-kubernetes-cluster" class="hash-link" aria-label="Direct link to 3.1.3. Deploy the Kubernetes Cluster" title="Direct link to 3.1.3. Deploy the Kubernetes Cluster">​</a></h4>
<ol>
<li>After selecting the initial node group(s), create the cluster. This will begin the LKE cluster deployment with
the initial nodes.</li>
</ol>
<p>It may take a few minutes for everything configured so far to be in a usable state. Wait for the nodes to all have
a Status of Running.</p>
<ol start="2">
<li>Once the LKE Cluster is running, labels need to be added to the Cambria Cluster node pool:</li>
</ol>
<p>a. In the Akamai Cloud Dashboard, go into the kubernetes cluster and look for the Cambria Cluster
node pool</p>
<p>b. Select Labels and Taints and Add Label. In the Label field, enter capella-manager: true and then
save the changes</p>
<ol start="3">
<li>Only if you added Cambria FTC nodes, do the following:</li>
</ol>
<p>a. In the Akamai Cloud Dashboard, go to the kubernetes cluster and look for the Cambria FTC node pool</p>
<p>b. Select Labels and Taints and Add Label. In the Label field, enter capella-worker: true and then
save the changes</p>
<ol start="4">
<li>
<p>(Optional) If you want Cambria Cluster nodes to also be able to run encoding jobs, set this label on the
Cambria Cluster node pool as well: capella-worker: true</p>
</li>
<li>
<p>Copy the contents of the Kubeconfig file:</p>
</li>
</ol>
<p>a. In the Linux Deployment Server, run the following commands (replace cambria-cluster with the
Kubernetes Cluster&#x27;s name):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export CLUSTER_NAME=cambria-cluster &amp;&amp; nano $CLUSTER_NAME-kubeconfig.yaml  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>b. In the Akamai dashboard, navigate to the Kubernetes cluster that was created. In the Kubeconfig
section, click on View and copy the contents</p>
<p>c. In the Linux Deployment Server, paste the kubeconfig contents. Save the file by holding CTRL/CMD</p>
<ul>
<li>X, pressing the letter &#x27;y&#x27;, and then the Enter/Return key</li>
</ul>
<ol start="6">
<li>Still in the Linux Deployment Server, set the KUBECONFIG environment variable for terminal interaction
with the LKE cluster:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export KUBECONFIG=$CLUSTER_NAME-kubeconfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="7">
<li>Verify that kubectl works with the cluster</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get nodes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME STATUS ROLES AGE VERSION</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lke525068-759150-2bfe0e460000 Ready &lt;none&gt; 20m v1.34.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lke525068-759150-4661256b0000 Ready &lt;none&gt; 20m v1.34.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lke525068-759150-5d7b909a0000 Ready &lt;none&gt; 20m v1.34.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="8">
<li>Back in the Akamai dashboard in the LKE cluster, click on Copy Token. Then, on Kubernetes Dashboard, use the token to log in to the dashboard</li>
</ol>
<p>This will show details about the LKE cluster in its current state. This dashboard can be used to view and manage
the LKE cluster from a graphical point of view.</p>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/01_screenshot-158c5454c8f10b0073f44dd2567656ba.png" width="945" height="296" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="314-default-storage-class">3.1.4. Default Storage Class<a href="#314-default-storage-class" class="hash-link" aria-label="Direct link to 3.1.4. Default Storage Class" title="Direct link to 3.1.4. Default Storage Class">​</a></h4>
<p>Set the storage class linode-block-storage as the default storage class:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl patch storageclass linode-block-storage \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  -p &#x27;{&quot;metadata&quot;: {&quot;annotations&quot;: {&quot;storageclass.kubernetes.io/is-default-class&quot;: &quot;true&quot;}}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-beta-gpu-operator-for-nvenc-optional">3.2. [BETA] GPU Operator for NVENC (optional)<a href="#32-beta-gpu-operator-for-nvenc-optional" class="hash-link" aria-label="Direct link to 3.2. [BETA] GPU Operator for NVENC (optional)" title="Direct link to 3.2. [BETA] GPU Operator for NVENC (optional)">​</a></h3>
<p>This section is only required for a Kubernetes cluster that will use GPUs. Skip this step if GPUs will
not be used in this Kubernetes cluster.</p>
<blockquote>
<p><strong>BETA Feature:</strong> GPU can be used in Cambria Cluster/FTC. However, this feature is still a work in progress and may not function as expected.
<strong>Limitation: Cambria FTC Autoscaler</strong> This feature currently does not work with the FTC autoscaler</p>
</blockquote>
<p>In your command prompt / terminal, run the following commands to deploy the GPU Operator to the Kubernetes
cluster:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add nvidia https://helm.ngc.nvidia.com/nvidia; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo update; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm install nvidia-operator nvidia/gpu-operator \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --create-namespace \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace gpu-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Wait at least 5 minutes for the GPU operator to install completely</p>
<p>Run this command with &#x27;kubectl&#x27; and make sure that all of the pods are in a Running or Completed state:
kubectl get pods -n gpu-operator</p>
<p>If any pod is still in an Init state or PodCreating state, wait another 5 minutes to see if the pods will complete
their install process.</p>
<p>For any pods that are in an errored state or that are still in an Init state after 10 minutes, do the following:</p>
<p>a. Check that at least one node is one of the supported Akamai Cloud GPU instances</p>
<p>b. Use the following command to check the state of a failing pod (check the Events section):</p>
<p>kubectl describe pod -n gpu-operator</p>
<p>Either look up the error for a potential solution or send the entire Events section to the Capella support team for
investigation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-application-ingress-ingressnginx">3.3. Application Ingress: ingress‑nginx<a href="#33-application-ingress-ingressnginx" class="hash-link" aria-label="Direct link to 3.3. Application Ingress: ingress‑nginx" title="Direct link to 3.3. Application Ingress: ingress‑nginx">​</a></h3>
<p>By default, certain parts of the Cambria applications are exposed via an ingress. In order to access these, the
ingress-nginx service needs to be created and attached to the ingress via. This is done via a reverse-proxy.</p>
<ol>
<li>Run the following command:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.13.0/deploy/static/provider/cloud/deploy.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n ingress-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Verify that the resources are created and in an active / online state:</li>
</ol>
<ul>
<li>Pods should be in a Running STATUS and all containers in READY should be active</li>
<li>Services should have a CLUSTER-IP assigned. The ingress-nginx-controller should have an EXTERNAL-IP</li>
<li>All other resources (Eg. replicasets, deployments, statefulsets, etc) should have all desired resources active.</li>
</ul>
<a href="https://www.dropbox.com/scl/fi/kxt7tnv9q18fqjmjjuwrc/Cambria_Kubernetes_Domain_DNS_Guide.pdf?rlkey=mvm4jnplyji95snq4109noiwj&amp;st=6a7nial5&amp;dl=0"><a href="https://www.dropbox.com/scl/fi/kxt7tnv9q18fqjmjjuwrc/Cambria_Kubernetes_Domain_DNS_Guide.pdf?rlkey=mvm4jnplyji95snq4109noiwj&amp;st=6a7nial5&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/kxt7tnv9q18fqjmjjuwrc/Cambria_Kubernetes_Domain_DNS_Guide.pdf?rlkey=mvm4jnplyji95snq4109noiwj&amp;st=6a7nial5&amp;dl=0</a></a>
<p>If any resources are still not ready, wait about a minute for them to complete. If still not complete, contact the
Capella support team.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-performance-metrics-and-logging">3.4. Performance Metrics and Logging<a href="#34-performance-metrics-and-logging" class="hash-link" aria-label="Direct link to 3.4. Performance Metrics and Logging" title="Direct link to 3.4. Performance Metrics and Logging">​</a></h3>
<p>This section is required for logging and other performance information about the Cambria
applications.</p>
<p>Install <strong>Prometheus, Grafana, Loki, Promtail</strong>:<br>
<a href="https://www.dropbox.com/scl/fi/cb75lsh6ipvbf0x1y4ysp/Prometheus_Grafana_Setup_for_Cambria_Cluster_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=kcxit4i6ntj5ynv2e26zydhiy&amp;st=douvkvi9&amp;dl=0"><a href="https://www.dropbox.com/scl/fi/cb75lsh6ipvbf0x1y4ysp/Prometheus_Grafana_Setup_for_Cambria_Cluster_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=kcxit4i6ntj5ynv2e26zydhiy&amp;st=douvkvi9&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/cb75lsh6ipvbf0x1y4ysp/Prometheus_Grafana_Setup_for_Cambria_Cluster_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=kcxit4i6ntj5ynv2e26zydhiy&amp;st=douvkvi9&amp;dl=0</a></a></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-install-cambria-cluster-ftc-and-dependencies">4. Install Cambria Cluster, FTC, and Dependencies<a href="#4-install-cambria-cluster-ftc-and-dependencies" class="hash-link" aria-label="Direct link to 4. Install Cambria Cluster, FTC, and Dependencies" title="Direct link to 4. Install Cambria Cluster, FTC, and Dependencies">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-prerequisite-deploy-external-kubernetes-tools">4.1. Prerequisite: Deploy External Kubernetes Tools<a href="#41-prerequisite-deploy-external-kubernetes-tools" class="hash-link" aria-label="Direct link to 4.1. Prerequisite: Deploy External Kubernetes Tools" title="Direct link to 4.1. Prerequisite: Deploy External Kubernetes Tools">​</a></h3>
<p>There are a few tools that need to be deployed in order to make Cambria FTC / Cluster work properly.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/deployCambriaKubeDependencies.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n cnpg-system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n argo-events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n cert-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-creating-and-editing-helm-configuration-file">4.2. Creating and Editing Helm Configuration File<a href="#42-creating-and-editing-helm-configuration-file" class="hash-link" aria-label="Direct link to 4.2. Creating and Editing Helm Configuration File" title="Direct link to 4.2. Creating and Editing Helm Configuration File">​</a></h3>
<p>With Helm and Kubectl installed on the Linux deployment server, create the Helm configuration file (yaml) that
will be used to deploy Cambria Cluster / FTC to the Kubernetes environment.</p>
<ol>
<li>
<p>In a command line / terminal window, run the following command to create the configuration file:</p>
</li>
<li>
<p>Open the configuration file in your favorite text / document editor and edit the following values:</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm show values ./config/capella-cluster-0.5.4.tgz &gt; cambriaClusterConfig.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nano cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Open the configuration file in your favorite text / document editor and edit the following values:</li>
</ol>
<p>Blue: values in <span style="color:blue">Blue</span> will be given to you by Capella.<br>
<!-- -->Red: values in <span style="color:red">Red</span> are proprietary values that need to be changed based on your specific environment.</p>
<table><thead><tr><th><strong>Field / Key</strong></th><th><strong>Value (Example)</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><strong>workersUseGPU</strong></td><td><code>false</code></td><td>Allow workers to use NVIDIA GPU. Set to <strong>true</strong> for GPU / NVENC workflows; otherwise leave as false.</td></tr><tr><td><strong>nbGPUs</strong></td><td><code>1</code></td><td>Number of GPUs available on the worker nodes. Only used when <code>workersUseGPU=true</code>. <strong>Note:</strong> More than 1 GPU requires multi-GPU support in the Cambria license.</td></tr><tr><td><strong>enableManagerWebUI</strong></td><td><code>true</code></td><td>Deploys the Cambria Manager WebUI. Set to false if you do not plan to use the WebUI.</td></tr><tr><td><strong>ftcEnableAutoScaler</strong></td><td><code>true</code></td><td>Deploy the Cambria FTC autoscaler, which spawns FTC encoders based on queue size. Set to false to add FTC nodes manually.</td></tr><tr><td><strong>ftcEnableScriptableWorkflow</strong></td><td><code>true</code></td><td>Enables Scriptable Workflow system used in Cambria FTC Jobs.</td></tr><tr><td><strong>ftcInstanceType</strong></td><td><code>&quot;g6-dedicated-16&quot;</code></td><td>Instance type for autoscaled Cambria FTC nodes. Default is <code>g6-dedicated-16</code>. Check Akamai Cloud documentation for available types.</td></tr><tr><td><strong>maxFTCInstances</strong></td><td><code>20</code></td><td>Maximum number of Cambria FTC encoder instances that can be spawned. Default is 20.</td></tr><tr><td><strong>pgInstances</strong></td><td><code>3</code></td><td>Number of PostgreSQL database replicas. Must match <code>cambriaClusterReplicas</code> and number of nodes created in Step 1.</td></tr><tr><td><strong>cambriaClusterReplicas</strong></td><td><code>3</code></td><td>Number of Cambria Cluster instances. Must match <code>pgInstances</code> and the node count.</td></tr><tr><td><strong>externalAccess.exposeStreamServiceExternally</strong></td><td><code>true</code></td><td>Set to true to access Cambria Cluster externally.</td></tr><tr><td><strong>externalAccess.enableIngress</strong></td><td><code>true</code></td><td>Enables nginx ingress.</td></tr><tr><td><strong>externalAccess.hostName</strong></td><td><code>myhost.com</code></td><td>Domain name for ingress. Must be replaced with a real domain for production.</td></tr><tr><td><strong>externalAccess.acmeRegistrationEmail</strong></td><td><code>test@example.com</code></td><td>Email used for Automated Certificate Management (Let&#x27;s Encrypt). Must be a valid email for production.</td></tr><tr><td><strong>externalAccess.acmeServer</strong></td><td><code>https://acme-staging-v02.api.letsencrypt.org/directory</code></td><td>ACME TLS certificate server. Provided staging value is for testing only.</td></tr><tr><td><strong>secrets.pgClusterPassword</strong></td><td><code>&quot;xrtVeQ4nN82SSiYHoswqdURZ…”&quot;</code></td><td>Password for PostgreSQL database. Should be changed to a strong password.</td></tr><tr><td><strong>secrets.ftcLicenseKey</strong></td><td><code>&quot;2XXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX&quot;</code></td><td>FTC product license key. Replace placeholder with the real key provided by Capella.</td></tr><tr><td><strong>secrets.cambriaClusterAPIToken</strong></td><td><code>&quot;12345678-1234-43f8-b4fc-53afd3893d5f&quot;</code></td><td>Token for making API calls to Cambria Cluster. Change to your environment’s token. Allowed characters: letters, numbers, underscores, dashes.</td></tr><tr><td><strong>secrets.cambriaClusterWebUIUser</strong></td><td><code>&quot;admin,defaultWebUIUser,RZvSSd3ffsElsCEEe9&quot;</code></td><td>WebUI login credentials in the form: <code>role,username,password</code>. Multiple users allowed, separated by commas. Roles: <strong>admin</strong>, <strong>user</strong>, <strong>viewer</strong>.</td></tr><tr><td><strong>secrets.akamaiCloudAPIToken</strong></td><td><code>&quot;d02732530a2bcfd4d028425eb55f366f74631…”&quot;</code></td><td>Akamai Cloud API token. Needed for horizontal scaling.</td></tr><tr><td><strong>secrets.argoEventWebhookSourceBearerToken</strong></td><td><code>&quot;L9Em5WIW8yth6H4uPtzT&quot;</code></td><td>Token used for argo-events workflows. Can be any value.</td></tr><tr><td><strong>optionalInstall.enableEventing</strong></td><td><code>true</code></td><td>Enables eventing.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-installing-cambria-ftc--cluster">4.3. Installing Cambria FTC / Cluster<a href="#43-installing-cambria-ftc--cluster" class="hash-link" aria-label="Direct link to 4.3. Installing Cambria FTC / Cluster" title="Direct link to 4.3. Installing Cambria FTC / Cluster">​</a></h3>
<p>Wait at least 5 minutes after installing prerequisites before moving on to this step. In a command line
/ terminal window, run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade --install capella-cluster ./config/capella-cluster-0.5.4.tgz --values cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The result of running the command should look something like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/getFtcInfo.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>At this point, several components are being deployed to the Kubernetes environment. Wait a few minutes
for everything to be deployed.</li>
<li>Get important information about the Cambria Stream Manager deployment:
./bin/getFtcInfo.sh</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-verify-cambria-ftc--cluster-installation">5. Verify Cambria FTC / Cluster Installation<a href="#5-verify-cambria-ftc--cluster-installation" class="hash-link" aria-label="Direct link to 5. Verify Cambria FTC / Cluster Installation" title="Direct link to 5. Verify Cambria FTC / Cluster Installation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-verify-cambria-cluster-deployment">5.1. Verify Cambria Cluster Deployment<a href="#51-verify-cambria-cluster-deployment" class="hash-link" aria-label="Direct link to 5.1. Verify Cambria Cluster Deployment" title="Direct link to 5.1. Verify Cambria Cluster Deployment">​</a></h3>
<p>Important: The components below are only a subset of the whole installation. These are the components
considered as key to a proper deployment.</p>
<ol>
<li>Run the following command:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Run the following command:</li>
</ol>
<table><thead><tr><th>Resources</th><th>Content</th></tr></thead><tbody><tr><td>Deployments</td><td>- 1 cambriaclusterapp deployment with all items active<br>- 1 cambriaclusterwebui deployment with all items active</td></tr><tr><td>Pods</td><td>- X pods with cambriaclusterapp in the name (X = # of replicas specified in config file)<br>with all items active / Running<br>- 1 pod with cambriaclusterwebui in the name</td></tr><tr><td>Services</td><td>- 1 service named cambriaclusterservice. If exposeStreamServiceExternally is true,<br>this should have an EXTERNAL-IP<br>- 1 service named cambriaclusterwebuiservice. If exposeStreamServiceExternally is<br>true, this should have an EXTERNAL-IP</td></tr></tbody></table>
<ol start="3">
<li>If any of the above are not in an expected state, wait a few more minutes in case some resources take longer than
expected to complete. If after a few minutes there are still resources in an unexpected state, contact the Capella
support team.</li>
<li>Run the following command for the pgcluster configuration:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n capella-database</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>Verify the following information:</li>
</ol>
<table><thead><tr><th>Resources</th><th>Content</th></tr></thead><tbody><tr><td>Pods</td><td>- X pods with pgcluster in the name (X = # of replicas specified in config file) with all items active / Running</td></tr><tr><td>Services</td><td>- 3 services with pgcluster in the name with a CLUSTER-IP assigned</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-verify-cambria-ftc-deployment">5.2. Verify Cambria FTC Deployment<a href="#52-verify-cambria-ftc-deployment" class="hash-link" aria-label="Direct link to 5.2. Verify Cambria FTC Deployment" title="Direct link to 5.2. Verify Cambria FTC Deployment">​</a></h3>
<p>Important: The components below are only a subset of the whole installation.These are the components
considered as key to a proper deployment.</p>
<ol>
<li>Run the following command:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Verify the following information:</li>
</ol>
<table><thead><tr><th>Resources</th><th>Content</th></tr></thead><tbody><tr><td>Pods</td><td>- X pods with cambriaftcapp in the name (X = Max # of FTCs specified in the config file)<br><br><strong>Notes:</strong><br>1. If using Cambria FTC autoscaler, all of these pods should be in a pending state. Every time the autoscaler deploys a Cambria FTC node, one pod will be assigned to it.<br>2. If not using Cambria FTC autoscaler, Y of the pods should be in an active / running state and all containers running (Y = # of Cambria FTC nodes active).</td></tr><tr><td>Deployments</td><td>- 1 cambriaftcapp deployment.</td></tr></tbody></table>
<ol start="3">
<li>If any of the above are not in an expected state, wait a few more minutes in case some resources take longer than
expected to complete. If after a few minutes there are still resources in an unexpected state, contact the Capella
support team.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-verify-applications-are-accessible">5.3. Verify Applications are Accessible<a href="#53-verify-applications-are-accessible" class="hash-link" aria-label="Direct link to 5.3. Verify Applications are Accessible" title="Direct link to 5.3. Verify Applications are Accessible">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="531-cambria-cluster-webui">5.3.1. Cambria Cluster WebUI<a href="#531-cambria-cluster-webui" class="hash-link" aria-label="Direct link to 5.3.1. Cambria Cluster WebUI" title="Direct link to 5.3.1. Cambria Cluster WebUI">​</a></h4>
<p>Skip this step if the WebUI was set to disabled in the Helm values configuration yaml file or the
ingress will be used instead. For any issues, contact the Capella support team</p>
<ol>
<li>Get the WebUI address. A web browser is required to access the WebUI:</li>
</ol>
<p><strong>Option 1: External URL (if enabled):</strong></p>
<p>Run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8161&#x27;}{&#x27;\n&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response should look something like this:
<a href="https://192.122.45.33:8161" target="_blank" rel="noopener noreferrer">https://192.122.45.33:8161</a></p>
<p>Option 2: Non-External Url Access
Run the following command to temporarily expose the WebUI via port-forwarding:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterwebuiservice 8161:8161 --address=0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># URL: https://`&lt;server&gt;`:8161</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The url depends on the location of the web browser. If the web browser and the port-forward are on the
same machine, use localhost. Otherwise, use the ip address of the machine with the port-forward:</p>
<p>https://<code>&lt;server&gt;</code>:8161</p>
<ol start="2">
<li>In a web browser, enter the above url. This should trigger an &quot;Unsafe&quot; page similar to the one below:</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/02_screenshot-9ed7448cacaa52c97e8b7253818757aa.png" width="947" height="128" class="img_ev3q"></p>
<ol start="3">
<li>Click on Advanced and Proceed to [ EXTERNAL IP ] (unsafe). This will show the login page.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/03_screenshot-3f6cff6b1ae76e05f7d18f4d6235fb11.png" width="554" height="382" class="img_ev3q"></p>
<ol start="4">
<li>
<p>Log in using the credentials created in the Helm values yaml file (See cambriaClusterWebUIUser)</p>
</li>
<li>
<p>Verify that the License Status is valid for at least either the Primary or Backup. Preferably, both Primary and
Backup should be valid. If there are issues with the license, wait a few minutes as sometimes it takes a few minutes
to properly update. If still facing issues, contact the Capella support team.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="532-cambria-cluster-rest-api">5.3.2. Cambria Cluster REST API<a href="#532-cambria-cluster-rest-api" class="hash-link" aria-label="Direct link to 5.3.2. Cambria Cluster REST API" title="Direct link to 5.3.2. Cambria Cluster REST API">​</a></h4>
<p>Skip this step if the ingress will be used instead of external access or any other type of access. For
any issues, contact the Capella support team.</p>
<p>** 5.3.4.1. Get the Ingress Endpoints
There are two ways to use the ingress:</p>
<p>** Option 1: Using Default Testing Ingress</p>
<p>Only use this option for testing purposes. Skip to option 2 for production. In order to use the
ingress in the testing state, the hostname needs to be DNS resolvable on the machines that will need
access to the Cambria applications</p>
<ol>
<li>Get the ingress HOSTS and ADDRESS:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get ingress -A</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response should look similar to the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8650&#x27;}{&#x27;\n&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response should look something like this:
<a href="https://192.122.45.33:8650" target="_blank" rel="noopener noreferrer">https://192.122.45.33:8650</a></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAMESPACE NAME CLASS HOSTS ADDRESS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PORTS AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">default cambriaclusteringress nginx api.akamai.capellatest.com,webui.akamaicapellatest.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 80, 443 23m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">monitoring cambriamonitoringingress nginx monitoring.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 80, 443 58m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>In your local server(s) or any other server(s) that need to access the ingress, edit the hosts file (in
Linux, usually /etc/hosts) and add the following lines (Example):</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 api.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 webui.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 monitoring.myhost.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>** Option 2: Non-External Url Access</p>
<p>Contact Capella if unable to set up a purchased domain with the ingress. If the domain is set up,
the endpoints needed are the following:</p>
<p>Example with mydomain.com as the domain:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">REST API: https://api.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WebUI: https://webui.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Grafana Dashboard: https://monitoring.myhost.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The url depends on the location of the port-forward. If the web browser and the port-forward are on the
same machine, use localhost. Otherwise, use the ip address of the machine with the port-forward:</p>
<p>https://<code>&lt;server&gt;</code>:8650</p>
<ol start="2">
<li>Run the following API query to check if the REST API is active:
curl -k -X GET https://<code>&lt;server&gt;</code>:8650/CambriaFC/v1/SystemInfo</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="533-cambria-license-webui">5.3.3. Cambria License WebUI<a href="#533-cambria-license-webui" class="hash-link" aria-label="Direct link to 5.3.3. Cambria License WebUI" title="Direct link to 5.3.3. Cambria License WebUI">​</a></h4>
<p>Skip this step if the ingress will be used instead of external access or any other type of access. The
Cambria license needs to be active in all entities where the Cambria application is deployed. Run the following
steps to check the cambria license. Access to a web browser is required:</p>
<ol>
<li>Get the url for the License Manager WebUI:</li>
</ol>
<p>**Option 1: External Url if External Access is Enabled</p>
<p>Run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8481&#x27;}{&#x27;\n&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response should look something like this:
<a href="https://192.122.45.33:8481" target="_blank" rel="noopener noreferrer">https://192.122.45.33:8481</a></p>
<p>**Option 2: Non-External Url Access</p>
<p>Run the following command to temporarily expose the License WebUI via port-forwarding:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterwebuiservice 8481:8481 --address=0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># URL: https://`&lt;server&gt;`:8481</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The url depends on the location of the port-forward. If the web browser and the port-forward are on the
same machine, use localhost. Otherwise, use the ip address of the machine with the port-forward:</p>
<p>https://<code>&lt;server&gt;</code>:8481</p>
<ol start="2">
<li>In a web browser, enter the above url. This should trigger an &quot;Unsafe&quot; page similar to the one below:</li>
</ol>
<p>ss</p>
<ol start="3">
<li>Click on Advanced and Proceed to [ EXTERNAL IP ] (unsafe). This will show the login page.</li>
</ol>
<p>ss</p>
<ol start="4">
<li>
<p>Log in using the credentials created in the Helm values yaml file (See cambriaClusterWebUIUser)</p>
</li>
<li>
<p>Verify that the License Status is valid for at least either the Primary or Backup. Preferably, both Primary and
Backup should be valid. If there are issues with the license, wait a few minutes as sometimes it takes a few minutes
to properly update. If still facing issues, contact the Capella support team.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="534-cambria-ingress">5.3.4. Cambria Ingress<a href="#534-cambria-ingress" class="hash-link" aria-label="Direct link to 5.3.4. Cambria Ingress" title="Direct link to 5.3.4. Cambria Ingress">​</a></h4>
<p>Skip this step if not planning to test with Cambria&#x27;s ingress. For any issues, contact the Capella support
team.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="5341-get-the-ingress-endpoints">5.3.4.1. Get the Ingress Endpoints<a href="#5341-get-the-ingress-endpoints" class="hash-link" aria-label="Direct link to 5.3.4.1. Get the Ingress Endpoints" title="Direct link to 5.3.4.1. Get the Ingress Endpoints">​</a></h5>
<p>There are two ways to use the ingress:</p>
<p>** Option 1: Using Default Testing Ingress
Only use this option for testing purposes. Skip to option 2 for production. In order to use the
ingress in the testing state, the hostname needs to be DNS resolvable on the machines that will need
access to the Cambria applications.</p>
<ol>
<li>Get the ingress HOSTS and ADDRESS:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get ingress -A</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response should look similar to the following:</p>
<p><em>Example output:</em></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAMESPACE    NAME                       CLASS   HOSTS                              ADDRESS      PORTS  AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">default      cambriaclusteringress      nginx   api.mydomain.com,webui.mydomain.com 55.99.103.99 80,443 23m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">monitoring   cambriamonitoringingress   nginx   monitoring.mydomain.com             55.99.103.99 80,443 58m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>In your local server(s) or any other server(s) that need to access the ingress, edit the hosts file (in
Linux, usually /etc/hosts) and add the following lines (Example):</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99  api.mydomain.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99  webui.mydomain.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99  monitoring.mydomain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>** Option 2 (production):** Use a publicly registered domain (Production)</p>
<p>Contact Capella if unable to set up a purchased domain with the ingress. If the domain is set up,
the endpoints needed are the following:</p>
<p>Example with mydomain.com as the domain:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5342-test-ingress-endpoints">5.3.4.2. Test Ingress Endpoints<a href="#5342-test-ingress-endpoints" class="hash-link" aria-label="Direct link to 5.3.4.2. Test Ingress Endpoints" title="Direct link to 5.3.4.2. Test Ingress Endpoints">​</a></h4>
<p>If using the test ingress, these steps can only be verified in the machine(s) where the hosts file was
modified. This is because the test ingress is not publicly DNS resolvable and so only those whose
hosts file (or DNS) have been configured to resolve the test ingress will be able to access the
Capella applications in this way.</p>
<ol>
<li>
<p>Test Cambria Cluster WebUI with the ingress that starts with webui. Run steps 2-3 of 5.3.1. Cambria Cluster
WebUI. Example:
<a href="https://webui.myhost.com" target="_blank" rel="noopener noreferrer">https://webui.myhost.com</a></p>
</li>
<li>
<p>Test Cambria REST API with the ingress that starts with api. Run step 2 of 5.3.2. Cambrai Cluster REST API.
Example:
<a href="https://api.myhost.com/CambriaFC/v1/SystemInfo" target="_blank" rel="noopener noreferrer">https://api.myhost.com/CambriaFC/v1/SystemInfo</a></p>
</li>
<li>
<p>Test Grafana Dashboard with the ingress that starts with monitoring. Run the verification steps for the
Grafana Dashboard section 1.4. Verify Grafana Deployment (steps 2-4) in the document in 3.7. Performance
Metrics and Logging. Example:
<a href="https://monitoring.myhost.com" target="_blank" rel="noopener noreferrer">https://monitoring.myhost.com</a></p>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-testing-cambria-ftc--cluster">6. Testing Cambria FTC / Cluster<a href="#6-testing-cambria-ftc--cluster" class="hash-link" aria-label="Direct link to 6. Testing Cambria FTC / Cluster" title="Direct link to 6. Testing Cambria FTC / Cluster">​</a></h2>
<p>The following guide provides information on how to get started testing the Cambria FTC / Cluster software:</p>
<p>See:<br>
<a href="https://www.dropbox.com/scl/fi/ymu5fln1n811a1i92radv/Cambria_Cluster_and_FTC_5_6_0_Kubernetes_User_Guide.pdf?rlkey=cd0unkt9hcs3mhjp1fjbcvi9n&amp;st=fb030h8o&amp;dl=0"><a href="https://www.dropbox.com/scl/fi/ymu5fln1n811a1i92radv/Cambria_Cluster_and_FTC_5_6_0_Kubernetes_User_Guide.pdf?rlkey=cd0unkt9hcs3mhjp1fjbcvi9n&amp;st=fb030h8o&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/ymu5fln1n811a1i92radv/Cambria_Cluster_and_FTC_5_6_0_Kubernetes_User_Guide.pdf?rlkey=cd0unkt9hcs3mhjp1fjbcvi9n&amp;st=fb030h8o&amp;dl=0</a></a></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-updating--upgrading-cambria-cluster--ftc">7. Updating / Upgrading Cambria Cluster / FTC<a href="#7-updating--upgrading-cambria-cluster--ftc" class="hash-link" aria-label="Direct link to 7. Updating / Upgrading Cambria Cluster / FTC" title="Direct link to 7. Updating / Upgrading Cambria Cluster / FTC">​</a></h2>
<p>There are currently two ways to update / upgrade Cambria FTC / Cluster in the kubernetes environment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-option-1--normal-upgrade-helm-upgrade">7.1. Option 1 — Normal Upgrade (Helm Upgrade)<a href="#71-option-1--normal-upgrade-helm-upgrade" class="hash-link" aria-label="Direct link to 7.1. Option 1 — Normal Upgrade (Helm Upgrade)" title="Direct link to 7.1. Option 1 — Normal Upgrade (Helm Upgrade)">​</a></h3>
<p>This upgrade method is best for when changing version numbers, secrets such as the license key, WebUI users,
etc, and Cambria FTC | Cambria Cluster specific settings such as max number of pods, replicas, etc.</p>
<blockquote>
<p><strong>Known issues:</strong> <code>pgClusterPassword</code> and PostgreSQL version cannot be changed via this method.</p>
</blockquote>
<ol>
<li>
<p>Edit the Helm configuration file (yaml) for your Kubernetes environment or create a new configuration file
and edit the new file. See section 4.2. Creating and Editing Helm Configuration File for more details.</p>
</li>
<li>
<p>Run the following command to apply the upgrade</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade capella-cluster ./config/capella-cluster-0.5.4.tgz --values cambriaClusterConfig.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3. Restart the deployments</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl rollout restart deployment cambriaclusterapp cambriaclusterwebui -n default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl rollout restart deployment cambriaftcapp -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-option-2--reinstall-deletes-db-and-jobs">7.2. Option 2 — Reinstall (Deletes DB and Jobs)<a href="#72-option-2--reinstall-deletes-db-and-jobs" class="hash-link" aria-label="Direct link to 7.2. Option 2 — Reinstall (Deletes DB and Jobs)" title="Direct link to 7.2. Option 2 — Reinstall (Deletes DB and Jobs)">​</a></h3>
<p>For any upgrade cases for the Cambria Cluster | Cambria FTC environment, this is the most reliable option. This
upgrade option basically uninstalls all of the Cambria FTC and Cluster components and then reinstall with the
new Helm chart and values (.yaml) file. As a result, this will delete the database and delete all of your
jobs in the Cambria Cluster UI.</p>
<ol>
<li>
<p>Follow section 4.2. Creating and Editing Helm Configuration File to download and edit your new
cambriaClusterConfig.yaml file.</p>
</li>
<li>
<p>In a command line / terminal window in your local server, run the following command:</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster --wait</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3. Deploy the Helm configuration file with the following command</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade --install capella-cluster ./config/capella-cluster-0.5.4.tgz --values cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-upgrade-verification">7.3. Upgrade Verification<a href="#73-upgrade-verification" class="hash-link" aria-label="Direct link to 7.3. Upgrade Verification" title="Direct link to 7.3. Upgrade Verification">​</a></h3>
<p>The best way to verify the upgrade is to use the steps in 5.0. Verify Cambria FTC / Cluster Installation. For any
issues, contact the Capella support team.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-deleting-kubernetes-cluster">8. Deleting Kubernetes Cluster<a href="#8-deleting-kubernetes-cluster" class="hash-link" aria-label="Direct link to 8. Deleting Kubernetes Cluster" title="Direct link to 8. Deleting Kubernetes Cluster">​</a></h2>
<p>Many resources are created in a Kubernetes environment. It is important that each step is followed carefully:</p>
<ol>
<li>Run the following commands to remove the Helm deployments:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster -n default --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>If any volumes are remaining, run the following command:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pv -o name | awk -F&#x27;/&#x27; &#x27;{print $2}&#x27; | xargs -I{} kubectl patch pv {} -p=&#x27;{&quot;spec&quot;: {&quot;persistentVolumeReclaimPolicy&quot;: &quot;Delete&quot;}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Delete the ingress controller:</li>
</ol>
<p>Delete ingress controller:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete namespace ingress-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Run the following commands to uninstall the monitoring deployment:</li>
</ol>
<p><code>&lt;install_type&gt;:</code> the loki install type. If the S3 loki version was installed, use &#x27;s3_embedcred&#x27;. If the Filesystem
loki version was installed, use &#x27;local&#x27;</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/quickDestroyMonitoring.sh &lt;install_type&gt;   # &#x27;s3_embedcred&#x27; or &#x27;local&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>
<p>In the Oracle Cloud dashboard, search for OKE. Look for your kubernetes cluster and click into it for more
details.</p>
</li>
<li>
<p>In the Akamai Cloud Home page, go into the Kubernetes Cluster and Delete Cluster
Wait several minutes for the Kubernetes Cluster to delete completely.</p>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-quick-reference-installation-testing-and-teardown">9. Quick Reference: Installation, Testing, and Teardown<a href="#9-quick-reference-installation-testing-and-teardown" class="hash-link" aria-label="Direct link to 9. Quick Reference: Installation, Testing, and Teardown" title="Direct link to 9. Quick Reference: Installation, Testing, and Teardown">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="91-installation-terraform-quick-path">9.1. Installation (Terraform quick path)<a href="#91-installation-terraform-quick-path" class="hash-link" aria-label="Direct link to 9.1. Installation (Terraform quick path)" title="Direct link to 9.1. Installation (Terraform quick path)">​</a></h3>
<p>For quick installation, use the Terraform installation instructions:</p>
<a href="https://www.dropbox.com/scl/fi/0vhx8634n6s12qjwxw25f/Cambria_Cluster_and_FTC_5_6_0_Terraform_on_Akamai_Kubernetes.pdf?rlkey=xamh1hkjbli55mwfm6gs67tti&amp;st=yp5057bh&amp;dl=0"><a href="https://www.dropbox.com/scl/fi/0vhx8634n6s12qjwxw25f/Cambria_Cluster_and_FTC_5_6_0_Terraform_on_Akamai_Kubernetes.pdf?rlkey=xamh1hkjbli55mwfm6gs67tti&amp;st=yp5057bh&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/0vhx8634n6s12qjwxw25f/Cambria_Cluster_and_FTC_5_6_0_Terraform_on_Akamai_Kubernetes.pdf?rlkey=xamh1hkjbli55mwfm6gs67tti&amp;st=yp5057bh&amp;dl=0</a></a>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="92-upgrades-and-teardown">9.2. Upgrades and Teardown<a href="#92-upgrades-and-teardown" class="hash-link" aria-label="Direct link to 9.2. Upgrades and Teardown" title="Direct link to 9.2. Upgrades and Teardown">​</a></h3>
<p>**9.2.1. Cambria FTC | Cambria Cluster and/or the Kubernetes Cluster Upgrades
Edit the capellaClusterConfig.yaml file and then run the following commands (See section 7. Updating /
Upgrading Kubernetes Cluster for more details and warnings):</p>
<ul>
<li><strong>Upgrade helper:</strong>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./quickUpgradeCambriaCluster.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>**9.2.2. Cambria FTC | Cambria Cluster Uninstall
If just wanting to uninstall Cambria Cluster and Cambria FTC, run the following command:</p>
<ul>
<li><strong>Uninstall apps only:</strong>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<p>**9.2.3. Kubernetes Cluster Teardown
As this involves several components, it is best to do the cluster teardown using the steps in section 8. Deleting
Kubernetes Cluster.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-quick-reference-helpful-commands--info-postinstall">10. Quick Reference: Helpful Commands / Info (Post‑Install)<a href="#10-quick-reference-helpful-commands--info-postinstall" class="hash-link" aria-label="Direct link to 10. Quick Reference: Helpful Commands / Info (Post‑Install)" title="Direct link to 10. Quick Reference: Helpful Commands / Info (Post‑Install)">​</a></h2>
<p>This section provides helpful commands and other information that may be useful after the installation process
such as how to get the WebUI address, what ports are available to use for incoming sources, etc.</p>
<p><strong>General Cambria FTC Deployment Info</strong>
Requires the Cambria FTC Package from 2.2. Cambria FTC Package and all of the prerequisites.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/getFtcInfo.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Adding Extra Cambria FTC Nodes</p>
<ol>
<li>
<p>Go to your kubernetes cluster in the Akamai Cloud dashboard and Add A Node Pool. Select a Plan and
number of nodes to add. Add Pool.</p>
</li>
<li>
<p>In the new node pool&#x27;s &quot;...&quot; settings, choose Labels and Taints. In the Labels, add a new Node Label:</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label node `&lt;node-name&gt;` capella-worker=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Save Changes</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-extra-cambria-manager-nodes">Adding Extra Cambria Manager Nodes<a href="#adding-extra-cambria-manager-nodes" class="hash-link" aria-label="Direct link to Adding Extra Cambria Manager Nodes" title="Direct link to Adding Extra Cambria Manager Nodes">​</a></h2>
<ol>
<li>
<p>Go to your kubernetes cluster in the Akamai Cloud dashboard and Add A Node Pool. Select a Plan and
number of nodes to add. Add Pool.</p>
</li>
<li>
<p>In the new node pool&#x27;s &quot;...&quot; settings, choose Labels and Taints. In the Labels, add a new Node Label:</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label node `&lt;node-name&gt;` capella-manager=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Save Changes</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-cambria-ftc-label-on-new-nodes">Setting Cambria FTC Label on New Nodes<a href="#setting-cambria-ftc-label-on-new-nodes" class="hash-link" aria-label="Direct link to Setting Cambria FTC Label on New Nodes" title="Direct link to Setting Cambria FTC Label on New Nodes">​</a></h2>
<p>For any node that should be an encoding node:</p>
<ol>
<li>Find out which node(s) will be used as Cambria FTC nodes:</li>
</ol>
<p><strong>Kubeconfig</strong> — copy from Akamai console (Clusters → Kubeconfig).</p>
<ol start="2">
<li>Apply the following label to each of those nodes:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label node ``&lt;node-name&gt;`` capella-worker=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-cambria-cluster-label-on-new-nodes">Setting Cambria Cluster Label on New Nodes<a href="#setting-cambria-cluster-label-on-new-nodes" class="hash-link" aria-label="Direct link to Setting Cambria Cluster Label on New Nodes" title="Direct link to Setting Cambria Cluster Label on New Nodes">​</a></h2>
<p>For any node that should be a Cambria management node / management backup:</p>
<ol>
<li>Find out which node(s) will be used as Cambria Cluster nodes:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get nodes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Apply the following label to each of those nodes:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label node `&lt;node-name&gt;` capella-manager=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="akamai-kubernetes-kubeconfig-file">Akamai Kubernetes Kubeconfig File<a href="#akamai-kubernetes-kubeconfig-file" class="hash-link" aria-label="Direct link to Akamai Kubernetes Kubeconfig File" title="Direct link to Akamai Kubernetes Kubeconfig File">​</a></h2>
<p>Log in to the Akamai Cloud dashboard and go to Clusters. Select your cluster from the list and click on the
link below Kubeconfig to download or click on View to see/copy the contents of the kubeconfig.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="akamai-kubernetes-dashboard">Akamai Kubernetes Dashboard<a href="#akamai-kubernetes-dashboard" class="hash-link" aria-label="Direct link to Akamai Kubernetes Dashboard" title="Direct link to Akamai Kubernetes Dashboard">​</a></h2>
<ol>
<li>Log in to the Akamai Cloud dashboard and go to your Kubernetes Cluster. <strong>Copy Token</strong></li>
<li>Click on the <strong>Kubernetes Dashboard</strong> link. Use the token from step 1 to log in.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-webui-via-kubectl">Cambria Cluster WebUI (via kubectl)<a href="#cambria-cluster-webui-via-kubectl" class="hash-link" aria-label="Direct link to Cambria Cluster WebUI (via kubectl)" title="Direct link to Cambria Cluster WebUI (via kubectl)">​</a></h2>
<ol>
<li>Run the following command to get the webui address:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get service/cambriaclusterwebuiservice -n default \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8161&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>To log in to the WebUI, the credentials are located in the Helm values .yaml file that you configure
(See section 4.2. Creating and Editing Helm Configuration File)</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-webui-via-kubectl-1">Cambria Cluster WebUI (via kubectl)<a href="#cambria-cluster-webui-via-kubectl-1" class="hash-link" aria-label="Direct link to Cambria Cluster WebUI (via kubectl)" title="Direct link to Cambria Cluster WebUI (via kubectl)">​</a></h2>
<ol>
<li>
<p>In the Akamai Kubernetes Dashboard for your specific cluster, go to Services and look for the cambriaclusterwebuiservice service. Copy the IP address of one of the External Endpoints.</p>
</li>
<li>
<p>The WebUI address should behttps: https//[ EXTERNAL IP ]:8161. To log in to the WebUI, the credentials are
located in the Helm values .yaml file that you configure (See section 4.2. Creating and Editing Helm
Configuration File)</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-rest-api-via-kbectl">Cambria Cluster REST API (via kbectl)<a href="#cambria-cluster-rest-api-via-kbectl" class="hash-link" aria-label="Direct link to Cambria Cluster REST API (via kbectl)" title="Direct link to Cambria Cluster REST API (via kbectl)">​</a></h2>
<ol>
<li>Run the following command to get the base REST API Web Adress:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get service/cambriaclusterwebuiservice -n default \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:86161&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The REST API url should look similar to this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://23-45-226-151.ip.linodeusercontent.com:8650/CambriaFC/v1/Jobs?usertoken=12345678-1234-43f8-b4fc-53afd3893d5f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-webui-via-kubernetes-dashboard">Cambria Cluster WebUI (via Kubernetes Dashboard)<a href="#cambria-cluster-webui-via-kubernetes-dashboard" class="hash-link" aria-label="Direct link to Cambria Cluster WebUI (via Kubernetes Dashboard)" title="Direct link to Cambria Cluster WebUI (via Kubernetes Dashboard)">​</a></h2>
<ol>
<li>In the Akamai Kubernetes Dashboard for your specific cluster, go to Services and look for the cambriaclusterwebuiservice service. Copy the IP address of one of the External Endpoints.</li>
</ol>
<p>The REST API should look similar to this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://23-45-226-151.ip.linodeusercontent.com:8650/CambriaFC/v1/Jobs?usertoken=12345678-1234-43f8-b4fc-53afd3893d5f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-ftc-instance-external-ip">Cambria FTC Instance External IP<a href="#cambria-ftc-instance-external-ip" class="hash-link" aria-label="Direct link to Cambria FTC Instance External IP" title="Direct link to Cambria FTC Instance External IP">​</a></h2>
<ol>
<li>In the Cambria Cluster WebUI, go to the Machines tab and copy the name of the machine (pod)</li>
<li>Run the following commands with the name of the machine (aka. ):</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Replace with your pod name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pod/ -n capella-worker -o=jsonpath={.spec.nodeName}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Replace `&lt;node-name&gt;` with the result from the above command</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get node/`&lt;node-name&gt;` -n capella-worker -o=jsonpath={.status.addresses[1].address}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="leader-cambria-cluster-pod">Leader Cambria Cluster Pod<a href="#leader-cambria-cluster-pod" class="hash-link" aria-label="Direct link to Leader Cambria Cluster Pod" title="Direct link to Leader Cambria Cluster Pod">​</a></h3>
<p>Run the following command to get the name of the Cambria Cluster leader pod:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get lease -o=jsonpath=&quot;{.items[0].spec.holderIdentity}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="remote-access-to-kubernetes-pod">Remote Access to Kubernetes Pod<a href="#remote-access-to-kubernetes-pod" class="hash-link" aria-label="Direct link to Remote Access to Kubernetes Pod" title="Direct link to Remote Access to Kubernetes Pod">​</a></h3>
<p>The general command for remote accessing a pod is:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl exec -it  -n &lt;namespace&gt; -- /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example with Cambria FTC:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl exec -it cambriaftcapp-5c79586784-wbfvf -n capella-worker -- bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extracting-cambria-cluster--cambria-ftc--cambria-license-logs">Extracting Cambria Cluster | Cambria FTC | Cambria License Logs<a href="#extracting-cambria-cluster--cambria-ftc--cambria-license-logs" class="hash-link" aria-label="Direct link to Extracting Cambria Cluster | Cambria FTC | Cambria License Logs" title="Direct link to Extracting Cambria Cluster | Cambria FTC | Cambria License Logs">​</a></h2>
<p>In a machine that has kubectl and the kubeconfig file for your Kubernetes cluster, open a terminal window and
make sure to set the KUBECONFIG environment variable to the path of your kubeconfig file. Then run one or
more of the following commands depending on what types of logs you need (or that Capella needs). You will get
a folder full of logs. Compress these logs into one zip file and send it to Capella:</p>
<p>: the name of the pod to grab logs from (Eg. cambriaftcapp-5c79586784-wbfvf)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-ftc-1">Cambria FTC<a href="#cambria-ftc-1" class="hash-link" aria-label="Direct link to Cambria FTC" title="Direct link to Cambria FTC">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp :/opt/capella/Cambria/Logs ./CambriaFTCLogs -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster">Cambria Cluster<a href="#cambria-cluster" class="hash-link" aria-label="Direct link to Cambria Cluster" title="Direct link to Cambria Cluster">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp :/opt/capella/CambriaCluster/Logs ./CambriaClusterLogs -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-license-manager-cambria-ftc">Cambria License Manager (Cambria FTC)<a href="#cambria-license-manager-cambria-ftc" class="hash-link" aria-label="Direct link to Cambria License Manager (Cambria FTC)" title="Direct link to Cambria License Manager (Cambria FTC)">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp :/opt/capella/CambriaLicenseManager/Logs ./CambriaFTCLicLogs -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-license-manager-cambria-cluster">Cambria License Manager (Cambria Cluster)<a href="#cambria-license-manager-cambria-cluster" class="hash-link" aria-label="Direct link to Cambria License Manager (Cambria Cluster)" title="Direct link to Cambria License Manager (Cambria Cluster)">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp :/opt/capella/CambriaLicenseManager/Logs ./CambriaClusterLicLogs -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="copy-files-to-cambria-ftc--cluster-pod">Copy File(s) to Cambria FTC / Cluster Pod<a href="#copy-files-to-cambria-ftc--cluster-pod" class="hash-link" aria-label="Direct link to Copy File(s) to Cambria FTC / Cluster Pod" title="Direct link to Copy File(s) to Cambria FTC / Cluster Pod">​</a></h2>
<p>In some cases, you might need to copy files to a Cambria FTC / Cluster pod. For example, you have an MP4 file
you want to use as a source directly from the encoding machine’s file system. In this case, to copy the file over
to the Cambria FTC / Cluster pod, do the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;host-file-path&gt; :&lt;path-inside-container&gt; -n &lt;namespace&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy file to Cambria FTC pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp /mnt/n/MySource.mp4 cambriaftcapp-7c55887db9-t42v7:/var/media/MySource.mp4 -n</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy file to Cambria Cluster pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp C:\MyKeys\MyKeyFile.key cambriaclusterapp-695dcc848f-vjpc7:/var/keys/MyKeyFile.key -n</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy directory to Cambria FTC container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp /mnt/n/MyMediaFiles cambriaftcapp-7c55887db9-t42v7:/var/temp/mediafiles -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="restarting--re-creating-pods">Restarting / Re-creating Pods<a href="#restarting--re-creating-pods" class="hash-link" aria-label="Direct link to Restarting / Re-creating Pods" title="Direct link to Restarting / Re-creating Pods">​</a></h2>
<p>Kubectl does not currently have a way to restart pods. Instead, a pod will need to be “restarted” by deleting the
pod which causes a new pod to be created / existing pod to take over the containers.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod -n &lt;namespace&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Delete Cambria FTC Container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod cambriaftcapp-7c55887db9-t42v7 -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Delete Cambria Cluster Container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod cambriaclusterapp-695dcc848f-vjpc7 -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-glossary">11. Glossary<a href="#11-glossary" class="hash-link" aria-label="Direct link to 11. Glossary" title="Direct link to 11. Glossary">​</a></h2>
<p>This glossary provides a brief definition / description of some of the more common terms found in this guide.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="111-kubernetes">11.1. Kubernetes<a href="#111-kubernetes" class="hash-link" aria-label="Direct link to 11.1. Kubernetes" title="Direct link to 11.1. Kubernetes">​</a></h3>
<p>For Kubernetes terms, see the official glossary: <a href="https://kubernetes.io/docs/reference/glossary/?fundamental=true"><a href="https://kubernetes.io/docs/reference/glossary/?fundamental=true" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/reference/glossary/?fundamental=true</a></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="112-thirdparty-tools">11.2. Third‑Party Tools<a href="#112-thirdparty-tools" class="hash-link" aria-label="Direct link to 11.2. Third‑Party Tools" title="Direct link to 11.2. Third‑Party Tools">​</a></h3>
<ul>
<li>
<p><strong>Argo:</strong> the Argo third-party system is a collection of tools for orchestrating parallel jobs in a Kubernetes
environment.</p>
</li>
<li>
<p><strong>Argo-Events:</strong> an Argo tool that triggers specific Kubernetes functions based on events from other
dependencies such as webhook, s3, etc.</p>
</li>
<li>
<p><strong>Cert-Manager:</strong> the cert-manager addon automates the process of retrieving and managing TLS certificates.
These certificates are periodically renewed to keep the certificates up to date and valid.</p>
</li>
<li>
<p><strong>Helm:</strong> the Helm third-party tool is used for deploying / managing (install, update, delete) deployments for
Kubernetes Cluster applications.</p>
</li>
<li>
<p><strong>Ingress-Nginx:</strong> the ingress-nginx addon is an ingress server using Nginx as a reverse proxy and load balancer.
In this case, ingress-nginx will be used for applying domain name use to the Kubernetes services (REST API, WebUI,
etc).</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="113-capella-applications">11.3. Capella Applications<a href="#113-capella-applications" class="hash-link" aria-label="Direct link to 11.3. Capella Applications" title="Direct link to 11.3. Capella Applications">​</a></h3>
<ul>
<li>
<p><strong>cambriaclusterapp:</strong> the Cambria Cluster application container. This container exists in all
cambriaclusterapp-xyz pods.</p>
</li>
<li>
<p><strong>cambriaftautoscale:</strong> this container is used like a load balancer. It spawns new nodes with Cambria FTC
specific content whenever Cambria Cluster has jobs in the queue.</p>
</li>
<li>
<p><strong>cambriaftcapp:</strong> the Cambria FTC application container. This container exists in all cambriaftcapp-xyz pods.</p>
</li>
<li>
<p><strong>cambriaftcconnect:</strong> this container is used for automatically connecting Cambria FTC instances to Cambria
Cluster. This container exists in all cambriaftcapp-xyz pods.</p>
</li>
<li>
<p><strong>cambrialeaderelector:</strong> this container is used for Cambria Cluster replication in that it decides which of the
Cambria Cluster instances is the primary instance. This container exists in all cambriaclusterapp-xyz pods.</p>
</li>
<li>
<p><strong>pgcluster-capella:</strong> this type of pod holds the PostgreSQL database that Cambria Cluster uses / interacts with.</p>
</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Document Coming Soon</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform-Kubernetes/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Terraform on Akamai Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#document-history" class="table-of-contents__link toc-highlight">Document History</a><ul><li><a href="#limitations-and-security-information" class="table-of-contents__link toc-highlight">Limitations and Security Information</a></li></ul></li><li><a href="#️-critical-information-read-before-proceeding-with-installation" class="table-of-contents__link toc-highlight">⚠️ Critical Information: Read Before Proceeding with Installation</a></li><li><a href="#document-overview" class="table-of-contents__link toc-highlight">Document Overview</a></li><li><a href="#1-overview" class="table-of-contents__link toc-highlight">1. Overview</a><ul><li><a href="#11-cambria-cluster--ftc-kubernetes-deployment" class="table-of-contents__link toc-highlight">1.1. Cambria Cluster / FTC Kubernetes Deployment</a></li><li><a href="#cambria-ftc" class="table-of-contents__link toc-highlight">Cambria FTC:</a></li><li><a href="#12-resource-usage" class="table-of-contents__link toc-highlight">1.2. Resource Usage</a></li><li><a href="#13-akamai-cloud-machine-information-and-benchmark" class="table-of-contents__link toc-highlight">1.3. Akamai Cloud Machine Information and Benchmark</a></li><li><a href="#a-g6-dedicated-16--amd-epyc-7713-" class="table-of-contents__link toc-highlight">a. g6-dedicated-16 [ AMD EPYC 7713 ]</a></li><li><a href="#machine-info" class="table-of-contents__link toc-highlight">Machine Info</a></li><li><a href="#benchmark-results" class="table-of-contents__link toc-highlight">Benchmark Results</a></li><li><a href="#b-g6-dedicated-56--amd-epyc-7713-" class="table-of-contents__link toc-highlight">b. g6-dedicated-56 [ AMD EPYC 7713 ]</a></li><li><a href="#machine-info-1" class="table-of-contents__link toc-highlight">Machine Info</a></li><li><a href="#benchmark-results-1" class="table-of-contents__link toc-highlight">Benchmark Results</a></li><li><a href="#benchmark-findings" class="table-of-contents__link toc-highlight">Benchmark Findings</a></li><li><a href="#14-cambria-application-access" class="table-of-contents__link toc-highlight">1.4. Cambria Application Access</a></li><li><a href="#142-http-ingress-via-reverse-proxy" class="table-of-contents__link toc-highlight">1.4.2. HTTP Ingress via Reverse Proxy</a></li><li><a href="#15-firewall-information" class="table-of-contents__link toc-highlight">1.5. Firewall Information</a></li><li><a href="#16-specifications-for-linux-deployment-server" class="table-of-contents__link toc-highlight">1.6. Specifications for Linux Deployment Server</a></li></ul></li><li><a href="#2-prerequisites" class="table-of-contents__link toc-highlight">2. Prerequisites</a><ul><li><a href="#21-linux-tools" class="table-of-contents__link toc-highlight">2.1. Linux Tools</a></li><li><a href="#22-cambria-ftc-package" class="table-of-contents__link toc-highlight">2.2. Cambria FTC Package</a></li></ul></li><li><a href="#3-create-kubernetes-cluster-akamai-lke" class="table-of-contents__link toc-highlight">3. Create Kubernetes Cluster (Akamai LKE)</a><ul><li><a href="#31-create-lke-cluster-and-cambria-cluster-node-group" class="table-of-contents__link toc-highlight">3.1. Create LKE Cluster and Cambria Cluster Node Group</a></li><li><a href="#32-beta-gpu-operator-for-nvenc-optional" class="table-of-contents__link toc-highlight">3.2. [BETA] GPU Operator for NVENC (optional)</a></li><li><a href="#33-application-ingress-ingressnginx" class="table-of-contents__link toc-highlight">3.3. Application Ingress: ingress‑nginx</a></li><li><a href="#34-performance-metrics-and-logging" class="table-of-contents__link toc-highlight">3.4. Performance Metrics and Logging</a></li></ul></li><li><a href="#4-install-cambria-cluster-ftc-and-dependencies" class="table-of-contents__link toc-highlight">4. Install Cambria Cluster, FTC, and Dependencies</a><ul><li><a href="#41-prerequisite-deploy-external-kubernetes-tools" class="table-of-contents__link toc-highlight">4.1. Prerequisite: Deploy External Kubernetes Tools</a></li><li><a href="#42-creating-and-editing-helm-configuration-file" class="table-of-contents__link toc-highlight">4.2. Creating and Editing Helm Configuration File</a></li><li><a href="#43-installing-cambria-ftc--cluster" class="table-of-contents__link toc-highlight">4.3. Installing Cambria FTC / Cluster</a></li></ul></li><li><a href="#5-verify-cambria-ftc--cluster-installation" class="table-of-contents__link toc-highlight">5. Verify Cambria FTC / Cluster Installation</a><ul><li><a href="#51-verify-cambria-cluster-deployment" class="table-of-contents__link toc-highlight">5.1. Verify Cambria Cluster Deployment</a></li><li><a href="#52-verify-cambria-ftc-deployment" class="table-of-contents__link toc-highlight">5.2. Verify Cambria FTC Deployment</a></li><li><a href="#53-verify-applications-are-accessible" class="table-of-contents__link toc-highlight">5.3. Verify Applications are Accessible</a></li></ul></li><li><a href="#6-testing-cambria-ftc--cluster" class="table-of-contents__link toc-highlight">6. Testing Cambria FTC / Cluster</a></li><li><a href="#7-updating--upgrading-cambria-cluster--ftc" class="table-of-contents__link toc-highlight">7. Updating / Upgrading Cambria Cluster / FTC</a><ul><li><a href="#71-option-1--normal-upgrade-helm-upgrade" class="table-of-contents__link toc-highlight">7.1. Option 1 — Normal Upgrade (Helm Upgrade)</a></li><li><a href="#72-option-2--reinstall-deletes-db-and-jobs" class="table-of-contents__link toc-highlight">7.2. Option 2 — Reinstall (Deletes DB and Jobs)</a></li><li><a href="#73-upgrade-verification" class="table-of-contents__link toc-highlight">7.3. Upgrade Verification</a></li></ul></li><li><a href="#8-deleting-kubernetes-cluster" class="table-of-contents__link toc-highlight">8. Deleting Kubernetes Cluster</a></li><li><a href="#9-quick-reference-installation-testing-and-teardown" class="table-of-contents__link toc-highlight">9. Quick Reference: Installation, Testing, and Teardown</a><ul><li><a href="#91-installation-terraform-quick-path" class="table-of-contents__link toc-highlight">9.1. Installation (Terraform quick path)</a></li><li><a href="#92-upgrades-and-teardown" class="table-of-contents__link toc-highlight">9.2. Upgrades and Teardown</a></li></ul></li><li><a href="#10-quick-reference-helpful-commands--info-postinstall" class="table-of-contents__link toc-highlight">10. Quick Reference: Helpful Commands / Info (Post‑Install)</a></li><li><a href="#adding-extra-cambria-manager-nodes" class="table-of-contents__link toc-highlight">Adding Extra Cambria Manager Nodes</a></li><li><a href="#setting-cambria-ftc-label-on-new-nodes" class="table-of-contents__link toc-highlight">Setting Cambria FTC Label on New Nodes</a></li><li><a href="#setting-cambria-cluster-label-on-new-nodes" class="table-of-contents__link toc-highlight">Setting Cambria Cluster Label on New Nodes</a></li><li><a href="#akamai-kubernetes-kubeconfig-file" class="table-of-contents__link toc-highlight">Akamai Kubernetes Kubeconfig File</a></li><li><a href="#akamai-kubernetes-dashboard" class="table-of-contents__link toc-highlight">Akamai Kubernetes Dashboard</a></li><li><a href="#cambria-cluster-webui-via-kubectl" class="table-of-contents__link toc-highlight">Cambria Cluster WebUI (via kubectl)</a></li><li><a href="#cambria-cluster-webui-via-kubectl-1" class="table-of-contents__link toc-highlight">Cambria Cluster WebUI (via kubectl)</a></li><li><a href="#cambria-cluster-rest-api-via-kbectl" class="table-of-contents__link toc-highlight">Cambria Cluster REST API (via kbectl)</a></li><li><a href="#cambria-cluster-webui-via-kubernetes-dashboard" class="table-of-contents__link toc-highlight">Cambria Cluster WebUI (via Kubernetes Dashboard)</a></li><li><a href="#cambria-ftc-instance-external-ip" class="table-of-contents__link toc-highlight">Cambria FTC Instance External IP</a><ul><li><a href="#leader-cambria-cluster-pod" class="table-of-contents__link toc-highlight">Leader Cambria Cluster Pod</a></li><li><a href="#remote-access-to-kubernetes-pod" class="table-of-contents__link toc-highlight">Remote Access to Kubernetes Pod</a></li></ul></li><li><a href="#extracting-cambria-cluster--cambria-ftc--cambria-license-logs" class="table-of-contents__link toc-highlight">Extracting Cambria Cluster | Cambria FTC | Cambria License Logs</a><ul><li><a href="#cambria-ftc-1" class="table-of-contents__link toc-highlight">Cambria FTC</a></li><li><a href="#cambria-cluster" class="table-of-contents__link toc-highlight">Cambria Cluster</a></li><li><a href="#cambria-license-manager-cambria-ftc" class="table-of-contents__link toc-highlight">Cambria License Manager (Cambria FTC)</a></li><li><a href="#cambria-license-manager-cambria-cluster" class="table-of-contents__link toc-highlight">Cambria License Manager (Cambria Cluster)</a></li></ul></li><li><a href="#copy-files-to-cambria-ftc--cluster-pod" class="table-of-contents__link toc-highlight">Copy File(s) to Cambria FTC / Cluster Pod</a></li><li><a href="#restarting--re-creating-pods" class="table-of-contents__link toc-highlight">Restarting / Re-creating Pods</a></li><li><a href="#11-glossary" class="table-of-contents__link toc-highlight">11. Glossary</a><ul><li><a href="#111-kubernetes" class="table-of-contents__link toc-highlight">11.1. Kubernetes</a></li><li><a href="#112-thirdparty-tools" class="table-of-contents__link toc-highlight">11.2. Third‑Party Tools</a></li><li><a href="#113-capella-applications" class="table-of-contents__link toc-highlight">11.3. Capella Applications</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/about-capella" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/newsfeed" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsfeed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria%20Stream/Installation%20Guides/Kubernetes/AWS/AWS_Kubernetes_Documentation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria Stream<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria_FTC/Installation%20Guides/Kubernetes/AWS/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria FTC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Other</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/terms-of-use" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/online-privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Capella Systems</div></div></div></footer></div>
</body>
</html>