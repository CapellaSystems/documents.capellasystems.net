<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform-Kubernetes/Cambria_Cluster_Terraform_Akamai_Kubernetes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Terraform on Akamai Kubernetes | Capella Documents</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documents.capellasystems.net/img/capellalogo.png"><meta data-rh="true" name="twitter:image" content="https://documents.capellasystems.net/img/capellalogo.png"><meta data-rh="true" property="og:url" content="https://documents.capellasystems.net/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform-Kubernetes/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Terraform on Akamai Kubernetes | Capella Documents"><meta data-rh="true" name="description" content="Terraform Installation"><meta data-rh="true" property="og:description" content="Terraform Installation"><link data-rh="true" rel="icon" href="/img/capellalogo.png"><link data-rh="true" rel="canonical" href="https://documents.capellasystems.net/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform-Kubernetes/"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform-Kubernetes/" hreflang="en"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform-Kubernetes/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://FG2ZSI8I7W-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WQ8DZ3HYRX"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-WQ8DZ3HYRX",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Capella Documents" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.32bb5c81.css">
<script src="/assets/js/runtime~main.a716f0a0.js" defer="defer"></script>
<script src="/assets/js/main.fdb8c634.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/capellalogo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/capellalogo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/capellalogo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Capella Documentation</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder">Cambria FTC</a><a class="navbar__item navbar__link" href="/docs/Cambria Stream/Installation Guides/Kubernetes/AWS/AWS_Kubernetes_Documentation/">Cambria Stream</a><a href="https://www.capellasystems.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Capella Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder">Installation Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder">Kubernetes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/AWS/placeholder">AWS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/">Akamai</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/">Akamai Cloud Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform-Kubernetes/">Terraform on Akamai Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/FTC-Overview/">Cambria FTC 5.x – Overview</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Oracle/placeholder">Oracle</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria_FTC/Installation Guides/Windows/placeholder">Windows</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria_FTC/Release Notes/FTC_v5.6_to_v4.0">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria_FTC/API/REST_API_FTC_5_0_1_index">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria_FTC/Tutorials/AMI_Creation_and_Editing/">Tutorials<button style="margin-left:5px;cursor:pointer;margin-bottom:-2px;z-index:1000;background:transparent;padding:0;display:inline-flex;align-items:center;justify-content:center;border:none;color:var(--ifm-color-primary)" title="Sort A-Z"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-az lucide-arrow-down-a-z tutorial-sort-icon" aria-hidden="true"><path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path></svg></button></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria_FTC/FAQ/">FAQ</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation Guides</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Kubernetes</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Akamai</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Terraform on Akamai Kubernetes</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cambria Cluster / FTC 5.6.0 — Akamai Cloud Kubernetes Help Documentation</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="terraform-installation">Terraform Installation<a href="#terraform-installation" class="hash-link" aria-label="Direct link to Terraform Installation" title="Direct link to Terraform Installation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="document-history">Document History<a href="#document-history" class="hash-link" aria-label="Direct link to Document History" title="Direct link to Document History">​</a></h3>
<table><thead><tr><th style="text-align:right">Version</th><th>Date</th><th>Description</th></tr></thead><tbody><tr><td style="text-align:right">5.5.0</td><td>04/11/2025</td><td>Updated for release 5.5.0.23529 (Linux)</td></tr><tr><td style="text-align:right">5.6.0</td><td>10/31/2025</td><td>Updated for release 5.6.0.26533 (Linux)</td></tr></tbody></table>
<p><em>Download the online version of this document for the latest information and latest files. Always download the latest files.</em></p>
<p>Do not move forward with the installation process if you do not agree with the End User License Agreement (EULA) for our products. You can download and read the EULA for Cambria FTC, Cambria Cluster, and Cambria License Manager from the links below:</p>
<ul>
<li>Cambria License Manager: <a href="https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0</a></li>
<li>Cambria Cluster: <a href="https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0</a></li>
<li>Cambria FTC: <a href="https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="limitations-and-security-information">Limitations and Security Information<a href="#limitations-and-security-information" class="hash-link" aria-label="Direct link to Limitations and Security Information" title="Direct link to Limitations and Security Information">​</a></h3>
<p>Cambria FTC, Cluster, and License Manager are installed on Linux Docker containers. Limitations and security checks done for this version are included in our general Linux Documents below.</p>
<blockquote>
<p><strong>Note:</strong> these documents are for informational use only. The setup for Kubernetes starts in section <strong>2. Create Kubernetes Cluster</strong>.</p>
</blockquote>
<ul>
<li>Cambria FTC / Cluster:<br>
<a href="https://www.dropbox.com/scl/fi/ljzuqv0azo3o7gpyi7y7x/Linux_Cambria_Cluster_and_FTC_5_6_0_Guide.pdf?rlkey=nldkuz4hoirupwvgm3yq1tgcu&amp;st=wfnaz6lz&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/ljzuqv0azo3o7gpyi7y7x/Linux_Cambria_Cluster_and_FTC_5_6_0_Guide.pdf?rlkey=nldkuz4hoirupwvgm3yq1tgcu&amp;st=wfnaz6lz&amp;dl=0</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="important-before-you-begin">Important: Before You Begin<a href="#important-before-you-begin" class="hash-link" aria-label="Direct link to Important: Before You Begin" title="Direct link to Important: Before You Begin">​</a></h3>
<p>PDF documents have a copy/paste issue. For best results, download this document and any referenced PDF documents in this guide and open them in a PDF viewer such as Adobe Acrobat.</p>
<p>For commands that are in more than one line, copy each line one by one and check that the copied command matches the one in the document.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="information">Information<a href="#information" class="hash-link" aria-label="Direct link to Information" title="Direct link to Information">​</a></h3>
<p>This document references <strong>Kubernetes version 1.34</strong> only.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-critical-information-read-before-proceeding-with-installation">⚠ Critical Information: Read Before Proceeding with Installation<a href="#-critical-information-read-before-proceeding-with-installation" class="hash-link" aria-label="Direct link to ⚠ Critical Information: Read Before Proceeding with Installation" title="Direct link to ⚠ Critical Information: Read Before Proceeding with Installation">​</a></h2>
<p>Before starting the installation, carefully review the following considerations. Skipping this section may result in errors, failed deployments, or misconfigurations.</p>
<ol>
<li>
<p><strong>Review the main Akamai Kubernetes Document:</strong></p>
<ul>
<li>Read the <em>Critical Information: Read Before Proceeding with Installation</em> section of the document:<br>
<a href="https://www.dropbox.com/scl/fi/jmndc09hsb308uzfv5yzd/Cambria_Cluster_and_FTC_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=0yx9di8w6k8r79g28mu8quza7&amp;st=rr0ocfdz&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/jmndc09hsb308uzfv5yzd/Cambria_Cluster_and_FTC_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=0yx9di8w6k8r79g28mu8quza7&amp;st=rr0ocfdz&amp;dl=0</a></li>
<li>Read the <em>Critical Information: Read Before Proceeding with Installation</em> section of the document:<br>
<a href="https://www.dropbox.com/scl/fi/cb75lsh6ipvbf0x1y4ysp/Prometheus_Grafana_Setup_for_Cambria_Cluster_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=kcxit4i6ntj5ynv2e26zydhiy&amp;st=1bpaoqrx&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/cb75lsh6ipvbf0x1y4ysp/Prometheus_Grafana_Setup_for_Cambria_Cluster_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=kcxit4i6ntj5ynv2e26zydhiy&amp;st=1bpaoqrx&amp;dl=0</a></li>
</ul>
</li>
<li>
<p><strong>GUI-Based Operating System Required</strong></p>
<ul>
<li>The Terraform deployment uses a desktop UI tool for editing configuration files.</li>
<li>Either the Linux deployment server or an SSH client for the Linux deployment server needs to have a UI.</li>
</ul>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-prerequisites">1. Prerequisites<a href="#1-prerequisites" class="hash-link" aria-label="Direct link to 1. Prerequisites" title="Direct link to 1. Prerequisites">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-x11-forwarding-for-user-interface">1.1. X11 Forwarding for User Interface<a href="#11-x11-forwarding-for-user-interface" class="hash-link" aria-label="Direct link to 1.1. X11 Forwarding for User Interface" title="Direct link to 1.1. X11 Forwarding for User Interface">​</a></h3>
<p>If using SSH to access the Linux deployment server and the SSH client machine is either Windows or Mac, there are some special tools that need to be installed in order to be able to use the user interface from Capella&#x27;s Terraform installer. If using Linux, the machine must have a graphical user interface (GUI).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="111-option-1-microsoft-windows-tools">1.1.1. Option 1: Microsoft Windows Tools<a href="#111-option-1-microsoft-windows-tools" class="hash-link" aria-label="Direct link to 1.1.1. Option 1: Microsoft Windows Tools" title="Direct link to 1.1.1. Option 1: Microsoft Windows Tools">​</a></h4>
<ol>
<li>Download and install the X11 Forwarding Tool <strong>Xming</strong>:<br>
<a href="https://github.com/marchaesen/vcxsrv/releases/download/21.1.16.1/vcxsrv-64.21.1.16.1.installer.noadmin.exe" target="_blank" rel="noopener noreferrer">https://github.com/marchaesen/vcxsrv/releases/download/21.1.16.1/vcxsrv-64.21.1.16.1.installer.noadmin.exe</a></li>
<li>Also, download and install <strong>PuTTY</strong> or similar tool that allows X11 Forwarding SSH:<br>
<a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener noreferrer">https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html</a></li>
<li>Open <strong>XLaunch</strong> and do the following:<br>
<!-- -->a. Window 1: Choose <strong>Multiple windows</strong> and set <strong>Display number</strong> to <strong>0</strong><br>
<!-- -->b. Window 2: Choose to <strong>Start no client</strong><br>
<!-- -->c. Window 3: Enable all checkboxes: <strong>Clipboard</strong>, <strong>Primary Selection</strong>, <strong>Native opengl</strong>, and <strong>Disable access control</strong><br>
<!-- -->d. Window 4: Click on <strong>Save configuration</strong> and save this somewhere to reuse in the future</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="112-option-2-apple-macos-tools">1.1.2. Option 2: Apple macOS Tools<a href="#112-option-2-apple-macos-tools" class="hash-link" aria-label="Direct link to 1.1.2. Option 2: Apple macOS Tools" title="Direct link to 1.1.2. Option 2: Apple macOS Tools">​</a></h4>
<ol>
<li>Download and install the X11 Forwarding Tool <strong>XQuartz</strong>:<br>
<a href="https://github.com/XQuartz/XQuartz/releases/download/XQuartz-2.8.5/XQuartz-2.8.5.pkg" target="_blank" rel="noopener noreferrer">https://github.com/XQuartz/XQuartz/releases/download/XQuartz-2.8.5/XQuartz-2.8.5.pkg</a></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-prepare-deployment-server">1.2. Prepare Deployment Server<a href="#12-prepare-deployment-server" class="hash-link" aria-label="Direct link to 1.2. Prepare Deployment Server" title="Direct link to 1.2. Prepare Deployment Server">​</a></h3>
<ol>
<li>On the Akamai Dashboard, create a new Ubuntu Linode used for the Terraform deployment. For best performance, choose an <strong>8GB RAM</strong> or higher machine as X11 Forwarding uses a lot of memory on the Linode instance.</li>
<li>SSH into the new Linode and install general tools:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt update &amp;&amp; sudo DEBIAN_FRONTEND=noninteractive apt -o Dpkg::Options::=&quot;--force-confold&quot; -y upgrade &amp;&amp; sudo DEBIAN_FRONTEND=noninteractive apt -o Dpkg::Options::=&quot;--force-confold&quot; -y install curl unzip libice6 libsm6 dbus libgtk-3-0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Important:</strong> If during this step, a <em>Configuring openssh-server</em> menu shows up, choose <strong>keep the local version currently installed</strong>.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-cambria-ftc-package">2. Cambria FTC Package<a href="#2-cambria-ftc-package" class="hash-link" aria-label="Direct link to 2. Cambria FTC Package" title="Direct link to 2. Cambria FTC Package">​</a></h2>
<ol>
<li>SSH into the Linux deployment server, if not already done so.</li>
<li>Download the Terraform package:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -o terraform_CambriaClusterLKE_5.6.0.zip -L &quot;https://www.dropbox.com/scl/fi/yubw0u4qm5fu43gvljfsf/terraform_CambriaClusterLKE_5.6.0.zip?rlkey=pwmndosi686btc5fwzh2f8uvm&amp;st=pn69pmm7&amp;dl=0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Unzip the package and make the shell scripts executable:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">unzip -o terraform_CambriaClusterLKE_5.6.0.zip &amp;&amp; chmod +x ./bin/*.sh ./bin/TerraformVariableEditor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Install the tools needed for deployment:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/setupTools.sh &amp;&amp; ./bin/installKubeToolsAkamai.sh &amp;&amp; ./bin/installLogcli.sh &amp;&amp; ./bin/installTerraformDocs.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>Restart the SSH terminal window for the changes to take effect.</li>
<li>Verify the tools are installed:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl version --client &amp;&amp; helm version &amp;&amp; terraform --version &amp;&amp; terraform-docs --version &amp;&amp; linode-cli --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-installation">3. Installation<a href="#3-installation" class="hash-link" aria-label="Direct link to 3. Installation" title="Direct link to 3. Installation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-configure-the-kubernetes-cluster">3.1. Configure the Kubernetes Cluster<a href="#31-configure-the-kubernetes-cluster" class="hash-link" aria-label="Direct link to 3.1. Configure the Kubernetes Cluster" title="Direct link to 3.1. Configure the Kubernetes Cluster">​</a></h3>
<ol>
<li>SSH into the instance created in section <strong>1.2. Prepare Deployment Server</strong> using one of the following methods (depending on the OS being used as the SSH client):</li>
</ol>
<p><strong>Option 1: Windows</strong></p>
<ol>
<li>Open PuTTY or similar tool. Enable <strong>X11 Forwarding</strong> in the configuration. On PuTTY, this can be found in <strong>Connection &gt; SSH &gt; X11 &gt; X11 forwarding</strong>.</li>
<li>SSH into the instance with the created user. Usually, the user is <strong>root</strong>.</li>
</ol>
<p><strong>Option 2: Unix (Linux, macOS)</strong></p>
<ol>
<li>Open a terminal window and <code>ssh</code> into the Linode instance using <code>-Y</code> option and one of the created users. This is usually <strong>root</strong>.</li>
</ol>
<p>Example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ssh -Y -i &quot;mysshkey&quot; root@123.123.123.123</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Run the Terraform editor UI:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/TerraformVariableEditor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Click on <strong>Open Terraform File</strong> and choose the <code>CambriaClusterValues_SENSITIVE_VALUES.tf</code> file from the <strong>values</strong> directory.</li>
<li>Using the UI, edit the fields accordingly. Reference the following table for values that should be changed:</li>
</ol>
<table><thead><tr><th>Terraform UI Editor Field</th><th>Explanation</th></tr></thead><tbody><tr><td><code>linode_token</code></td><td>See <a href="https://www.linode.com/docs/products/tools/api/guides/manage-api-tokens/" target="_blank" rel="noopener noreferrer">https://www.linode.com/docs/products/tools/api/guides/manage-api-tokens/</a></td></tr><tr><td><code>pg_cluster_password</code></td><td>The password for the PostgreSQL database that Cambria Cluster uses. General password rules apply.</td></tr><tr><td><code>cambria_cluster_api_token</code></td><td>A token needed for making calls to the Cambria FTC web server. General token rules apply (Eg. <code>1234-5678-90abcdefg</code>).</td></tr><tr><td><code>cambria_cluster_webui_user</code></td><td>This is the login credentials for all of the Cambria WebUIs for the Kubernetes cluster. Each user is listed in the form: <code>role,username,password</code>.<br><br><strong>Allowed roles:</strong><br>1. <strong>admin</strong> — can view/create/edit/delete anything on the WebUI. Can also create/manage WebUI users.<br>2. <strong>superuser</strong> — can view/create/edit/delete anything on the WebUI.<br>3. <strong>user</strong> — can only view anything on the WebUI.<br><br>For multiple users, separate each by a comma. Example: <code>admin,admin,changethispassword1234,user,guest,password123</code></td></tr><tr><td><code>argo_event_webhook_source_bearer_token</code></td><td>A token needed for making specific argo events calls. General token rules apply (Eg. <code>1234-5678-90abcdefg</code>).</td></tr><tr><td><code>ftc_license_key</code></td><td>This is the Cambria FTC license key that Capella should have provided. The license key should start with a &#x27;2&#x27;. Only one license key is needed here (Eg. <code>2AB122-11123A-ABC890-DEF345-ABC321-543A21</code>).</td></tr><tr><td><code>grafana_admin_password</code></td><td>The password for Grafana Dashboard. General password rules apply.</td></tr><tr><td><code>loki_s3_access_key</code></td><td>The recommended log storage solution is AWS S3 or compatible S3 storage. If using this solution, this is the <code>ACCESS_KEY</code> or <code>AWS_ACCESS_KEY_ID</code>.</td></tr><tr><td><code>loki_s3_secret_key</code></td><td>The recommended log storage solution is AWS S3 or compatible S3 storage. If using this solution, this is the <code>SECRET_KEY</code> or <code>AWS_SECRET_ACCESS_KEY</code>.</td></tr></tbody></table>
<ol start="5">
<li>Once done, click on <strong>Save Changes</strong> and wait for the message <strong>Changes were saved</strong> to appear.</li>
<li>Click on <strong>Open Terraform File</strong> and choose the <code>CambriaClusterValues_IMPORTANT_VALUES.tf</code> file.</li>
<li>Using the UI, edit the fields accordingly. Reference the following table for values that should be changed:</li>
</ol>
<table><thead><tr><th>Terraform UI Editor Field</th><th>Explanation</th></tr></thead><tbody><tr><td><code>lke_cluster_name</code></td><td>The name of the Kubernetes cluster.</td></tr><tr><td><code>lk_region</code></td><td>The region code where the Kubernetes cluster should be deployed.</td></tr><tr><td><code>lke_manager_pool_node_count</code></td><td>The number of Cambria Cluster nodes to create.</td></tr><tr><td><code>lke_worker_pool_node_count</code></td><td>The number of Cambria Stream nodes to create.</td></tr><tr><td><code>manager_instance_type</code></td><td>The instance type of the Cambria Cluster nodes. See Akamai documentation for information on how to get the instance type name.</td></tr><tr><td><code>ftc_instance_type</code></td><td>The instance type of the Cambria FTC nodes. See Akamai documentation for information on how to get the instance type name.</td></tr><tr><td><code>max_ftc_instances</code></td><td>The maximum number of encoders that the Kubernetes cluster can have up and running.</td></tr><tr><td><code>cambria_cluster_replicas</code></td><td>The maximum number of Cambria management + replica machines to have up and running. This should match the <code>lke_manager_pool_node_count</code> or be greater if more manager replicas will be needed after installation.</td></tr><tr><td><code>host_name</code>, <code>acme_registration_email</code>, <code>acme_server</code></td><td>One way to expose the main Cambria applications is to use an ingress. This information is needed to connect a real domain and TLS certificate to the ingress. The default values are only usable under a test environment.</td></tr><tr><td><code>loki_storage_type</code></td><td>Decide what type of storage to use for Loki logs. Recommended to use an S3 compatible storage like AWS S3. For testing purposes only, there is a filesystem version (set this to <code>local</code>).</td></tr><tr><td><code>loki_local_storage_size_gi</code></td><td>Used only for the local <code>loki_storage_type</code>. This is how many GB the Loki log volume should be.  Volumes can fill up quickly so testing different sizes may be required.</td></tr><tr><td><code>loki_s3_bucket_name</code></td><td>Used when <code>loki_storage_type = s3_embedcred</code>. This option should be changed if using the s3_embedcred loki_storage_type. This is the name of the S3 compatible bucket to write logs to</td></tr><tr><td><code>loki_s3_region</code></td><td>This option should be changed if using the s3_embedcred loki_storage_type. This is the region where the S3 bucket is located</td></tr><tr><td><code>loki_log_retention_period</code></td><td>Number of days to retain Loki logs in the storage device. Default is 7 days.</td></tr></tbody></table>
<ol start="8">
<li>Once done, click on <strong>Save Changes</strong> and wait for the message <strong>Changes were saved</strong> to appear.</li>
<li>Close the Terraform UI Editor window.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-optional-cambria-ftc-optional-values">3.2. (Optional) Cambria FTC Optional Values<a href="#32-optional-cambria-ftc-optional-values" class="hash-link" aria-label="Direct link to 3.2. (Optional) Cambria FTC Optional Values" title="Direct link to 3.2. (Optional) Cambria FTC Optional Values">​</a></h3>
<p>Skip this step if the optional values don&#x27;t need to be modified. Review the list of values in the chart below to help determine if any of the features need to be modified, such as <strong>NVENC (GPU)</strong>, <strong>Ingress</strong>, etc.</p>
<ol>
<li>Run the Terraform editor UI:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/TerraformVariableEditor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Click on <strong>Open Terraform File</strong> and choose the <code>CambriaClusterValues_OPTIONAL_VALUES.tf</code> file. Using the UI, edit the fields accordingly. Reference the following table for values that should be changed:</li>
</ol>
<table><thead><tr><th>Terraform UI Editor Field</th><th>Explanation</th></tr></thead><tbody><tr><td><code>workersUseGPU</code> [ BETA ]</td><td>This must be set to true if planning to use NVENC capabilities on the encoding machines. This is set to false by default.</td></tr><tr><td><code>nbGPUs</code></td><td>The max number of GPUs to use from the encoding machines if GPU functionality is enabled. This value should not exceed the amount of GPUs available.</td></tr><tr><td><code>workersUseVPU</code> [ BETA ]</td><td>This must be set to true if planning to use netint VPU capabilities on the encoding machines. This is set to false by default.</td></tr><tr><td><code>nbVPUs</code></td><td>The max number of VPUs to use from the encoding machines if VPU functionality is enabled. This value should not exceed the amount of VPUs available.</td></tr><tr><td><code>ftc_enable_auto_scaler</code></td><td>This is used to enable / disable the FTC autoscaler which controls auto deployment of Cambria FTC encoders to handle encoding tasks dynamically. By default this is enabled (true).</td></tr><tr><td><code>ftc_enable_scriptable_workflow</code></td><td>This is used to enable / disable the FTC scriptable workflow feature. By default, this is disabled.</td></tr><tr><td><code>enable_manager_webui</code></td><td>If enabled, this allows users to use Cambria Clusterr&#x27;s Web UI. Otherwise, only the REST API server can be used to interact with Cambria Cluster.</td></tr><tr><td><code>storage_class_name</code></td><td>The name of the storage class to use for volumes in the Kubernetes cluster.</td></tr><tr><td><code>ftc_encoding_slots</code></td><td>When a Cambria FTC worker node is connected to Cambria Cluster, this is the max number of encoding jobs it can run concurrently by default.</td></tr><tr><td><code>expose_capella_service_externally</code></td><td>This option tells the deployment to create load balancers to publicly expose the Capella application.</td></tr><tr><td><code>enable_ingress</code></td><td>This option tells the deployment to create an ingress for the Capella applications that should be exposed.</td></tr><tr><td><code>ftc_license_mode</code></td><td>The license mode for Cambria Cluster and FTC instances. Do not change this value unless instructed by Capella.</td></tr><tr><td><code>enable_eventing</code></td><td>This enables / disables the argo-events event-based system. By default, this is enabled (true).</td></tr><tr><td><code>kubernetes_version</code></td><td>The Kubernetes version number to use. Do not change this value unless instructed by Capella.</td></tr><tr><td><code>install_monitoring</code></td><td>This controls whether monitoring features (prometheus, grafana) should be installed. Do not change this value unless instructed by Capella.</td></tr><tr><td><code>install_loki</code></td><td>This controls whether the Loki logs feature should be installed. Do not change this value unless instructed by Capella.</td></tr><tr><td><code>expose_grafana</code></td><td>This option tells the deployment to make the Grafana dashboard accessible publicly via a load balancer</td></tr><tr><td><code>loki_replicas </code></td><td>This option should only be changed if using the s3_embedcred loki_storage_type. This is the number of Loki pod replicas to use for handling log requests. At least 2 replicas need to be active for Loki to work properly. Also, there should be at least the same amount of nodes running to cover the number of replicas specified here.</td></tr><tr><td><code>loki_max_unavailable</code></td><td>This option should only be changed if using the s3_embedcred loki_storage_type. This is how many Loki pods can be taken down when performing upgrades. For simplicity, this value should be loki_replicas + 1</td></tr></tbody></table>
<ol start="3">
<li>Once done, click on <strong>Save Changes</strong> and close the UI.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-deploy-kubernetes-cluster">3.3. Deploy Kubernetes Cluster<a href="#33-deploy-kubernetes-cluster" class="hash-link" aria-label="Direct link to 3.3. Deploy Kubernetes Cluster" title="Direct link to 3.3. Deploy Kubernetes Cluster">​</a></h3>
<ol>
<li>Save the configured values to a <code>.tfvars</code> file (change <strong>my-values</strong> to desired name):</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">terraform-docs tfvars hcl . --description --sort=false --output-file=./my-values.tfvars --output-mode=replace --output-template=&quot;{{ .Content }}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Create a Terraform plan. Follow the prompts on the terminal window:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">terraform init &amp;&amp; terraform plan -var-file=./my-values.tfvars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Create the Kubernetes cluster:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">terraform apply -auto-approve -var-file=./my-values.tfvars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Set the <code>KUBECONFIG</code> environment variable:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export KUBECONFIG=kubeconfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="5">
<li>If deployment completes successfully, <strong>store</strong> the following files in a private location:</li>
</ol>
<ul>
<li><code>terraform.tfstate</code></li>
<li><code>my-values.tfvars</code></li>
</ul>
<p>These files are needed to make any changes to the created Kubernetes cluster.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-verification-and-testing">4. Verification and Testing<a href="#4-verification-and-testing" class="hash-link" aria-label="Direct link to 4. Verification and Testing" title="Direct link to 4. Verification and Testing">​</a></h2>
<p>Follow the steps in <strong>section 5. Verify Cambria FTC / Cluster Installation</strong> of the main <em>Cambria Cluster Kubernetes Installation Guide</em> for verification and <strong>section 6. Testing Cambria FTC / Cluster</strong> for testing with Cambria FTC jobs:</p>
<p><a href="https://www.dropbox.com/scl/fi/jmndc09hsb308uzfv5yzd/Cambria_Cluster_and_FTC_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=0yx9di8w6k8r79g28mu8quza7&amp;st=azkbabl8&amp;dl=0" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/jmndc09hsb308uzfv5yzd/Cambria_Cluster_and_FTC_5_6_0_on_Akamai_Kubernetes.pdf?rlkey=0yx9di8w6k8r79g28mu8quza7&amp;st=azkbabl8&amp;dl=0</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-cambria-cluster--ftc-info">4.1. Cambria Cluster / FTC Info<a href="#41-cambria-cluster--ftc-info" class="hash-link" aria-label="Direct link to 4.1. Cambria Cluster / FTC Info" title="Direct link to 4.1. Cambria Cluster / FTC Info">​</a></h3>
<p>Run the following script to get important information such as <strong>Cambria Cluster WebUI URL</strong>, <strong>REST API URL</strong>, etc.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/getFtcInfo.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-upgrading">5. Upgrading<a href="#5-upgrading" class="hash-link" aria-label="Direct link to 5. Upgrading" title="Direct link to 5. Upgrading">​</a></h2>
<p>This is the default way to perform an upgrade for anything from updating license keys, Cambria version, etc.</p>
<blockquote>
<p><strong>Important</strong><br>
<!-- -->In cases where the Cambria installation / upgrade isn&#x27;t working and is in an unrecoverable state, run steps <strong>1–7</strong> of this section and then run this command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>WARNING:</strong> THIS COMMAND WILL DELETE THE CAMBRIA DATABASE. PLEASE SAVE ANY PROJECT FILES, CONFIG FILES, CREDENTIALS, ETC BEFORE RUNNING IT.</p>
</blockquote>
<ol>
<li>
<p>Review <strong>section 1. Prerequisites</strong> to verify they have been met.</p>
</li>
<li>
<p>Verify that you have a <strong>Linux deployment server</strong>. To create a new Linux deployment server or verify that the deployment server tools are installed, run the steps in <strong>1.2. Prepare Deployment Server</strong>.</p>
</li>
<li>
<p>Download / Paste your <code>.tfvars</code> and <code>.tfstate</code> files that were used for the Kubernetes cluster deployment into the Linux deployment server.</p>
</li>
<li>
<p>Follow the steps in <strong>section 2. Cambria FTC Package</strong> to download the new Cambria FTC package.</p>
</li>
<li>
<p>Update the Cambria FTC package with the values from the <code>.tfvars</code> file (replace <code>my-values.tfvars</code> with your file):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/updateTfValuesFromTfvars.sh my-values.tfvars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Follow the steps in <strong>3.1. Configure the Kubernetes Cluster</strong> and <strong>3.2. (Optional) Cambria FTC Optional Values</strong> to configure new values / update previous values.</p>
</li>
<li>
<p>Set the kubeconfig environment variable for the Kubernetes API and Terraform:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export KUBECONFIG=kubeconfig.yaml &amp;&amp; export KUBE_CONFIG_PATH=kubeconfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Make sure all <code>cambriacluster</code> and <code>pgcluster</code> pods are attached to a node. Check that all pods are in a running state:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods -n default &amp;&amp; kubectl get pods -n capella-database</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If any pod in this list is in a <strong>pending</strong> state, see <strong>section 3.1</strong> and make sure the number of manager nodes created equals the amount of <code>cambriastreammanager-xyz</code> pods you see in this list.</p>
</li>
<li>
<p>Run the Terraform install instructions from <strong>section 3.3. Deploy Kubernetes Cluster</strong>.</p>
</li>
<li>
<p><em>(Skip if you ran the “Important” steps above.)</em> Run this command to restart the manager deployments:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl rollout restart deployment cambriaclusterwebui cambriaclusterapp -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><em>(Skip if you ran the “Important” steps above.)</em> Run this command to restart the worker deployment:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl rollout restart deployment cambriaftcapp -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-cleanup--delete">6. Cleanup / Delete<a href="#6-cleanup--delete" class="hash-link" aria-label="Direct link to 6. Cleanup / Delete" title="Direct link to 6. Cleanup / Delete">​</a></h2>
<p>Many resources are created in a Kubernetes environment. It is important that each step is followed carefully.</p>
<ol>
<li>Verify that you have a <strong>Linux deployment server</strong>. To create a new Linux deployment server or verify that the deployment server tools are installed, run the steps in <strong>1.2. Prepare Deployment Server</strong> and also in <strong>2. Cambria Stream Package</strong>.</li>
<li>Download / Paste your <code>.tfvars</code> and <code>.tfstate</code> files that were used for the Kubernetes cluster deployment into the Linux deployment server.</li>
<li>Download / Paste the <code>kubeconfig.yaml</code> file of your Kubernetes cluster into the Linux deployment server.</li>
<li>In Linux deployment server, run the following command to update the Cambria Stream package with the values from the <code>.tfvars</code> file (replace <code>my-values.tfvars</code> with your file):<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./bin/updateTfValuesFromTfvars.sh my-values.tfvars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Run the following command to destroy the Kubernetes cluster:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">terraform init &amp;&amp; terraform apply -destroy -auto-approve -var-file=./my-values.tfvars</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Akamai Cloud Kubernetes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Cambria_FTC/Installation Guides/Kubernetes/Akamai/FTC-Overview/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cambria FTC 5.x – Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#terraform-installation" class="table-of-contents__link toc-highlight">Terraform Installation</a><ul><li><a href="#document-history" class="table-of-contents__link toc-highlight">Document History</a></li><li><a href="#limitations-and-security-information" class="table-of-contents__link toc-highlight">Limitations and Security Information</a></li><li><a href="#important-before-you-begin" class="table-of-contents__link toc-highlight">Important: Before You Begin</a></li><li><a href="#information" class="table-of-contents__link toc-highlight">Information</a></li></ul></li><li><a href="#-critical-information-read-before-proceeding-with-installation" class="table-of-contents__link toc-highlight">⚠ Critical Information: Read Before Proceeding with Installation</a></li><li><a href="#1-prerequisites" class="table-of-contents__link toc-highlight">1. Prerequisites</a><ul><li><a href="#11-x11-forwarding-for-user-interface" class="table-of-contents__link toc-highlight">1.1. X11 Forwarding for User Interface</a></li><li><a href="#12-prepare-deployment-server" class="table-of-contents__link toc-highlight">1.2. Prepare Deployment Server</a></li></ul></li><li><a href="#2-cambria-ftc-package" class="table-of-contents__link toc-highlight">2. Cambria FTC Package</a></li><li><a href="#3-installation" class="table-of-contents__link toc-highlight">3. Installation</a><ul><li><a href="#31-configure-the-kubernetes-cluster" class="table-of-contents__link toc-highlight">3.1. Configure the Kubernetes Cluster</a></li><li><a href="#32-optional-cambria-ftc-optional-values" class="table-of-contents__link toc-highlight">3.2. (Optional) Cambria FTC Optional Values</a></li><li><a href="#33-deploy-kubernetes-cluster" class="table-of-contents__link toc-highlight">3.3. Deploy Kubernetes Cluster</a></li></ul></li><li><a href="#4-verification-and-testing" class="table-of-contents__link toc-highlight">4. Verification and Testing</a><ul><li><a href="#41-cambria-cluster--ftc-info" class="table-of-contents__link toc-highlight">4.1. Cambria Cluster / FTC Info</a></li></ul></li><li><a href="#5-upgrading" class="table-of-contents__link toc-highlight">5. Upgrading</a></li><li><a href="#6-cleanup--delete" class="table-of-contents__link toc-highlight">6. Cleanup / Delete</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/about-capella" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/newsfeed" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsfeed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria%20Stream/Installation%20Guides/Kubernetes/AWS/AWS_Kubernetes_Documentation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria Stream<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria_FTC/Installation%20Guides/Kubernetes/AWS/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria FTC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Other</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/terms-of-use" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/online-privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Capella Systems</div></div></div></footer></div>
</body>
</html>