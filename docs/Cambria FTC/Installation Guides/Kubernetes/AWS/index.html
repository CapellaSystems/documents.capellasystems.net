<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Cambria FTC/Installation Guides/Kubernetes/AWS/cambria-cluster-ftc-aws" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Cambria Cluster / FTC 5.5.0 - AWS Kubernetes | Capella Documents</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documents.capellasystems.net/img/capellalogo.png"><meta data-rh="true" name="twitter:image" content="https://documents.capellasystems.net/img/capellalogo.png"><meta data-rh="true" property="og:url" content="https://documents.capellasystems.net/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cambria Cluster / FTC 5.5.0 - AWS Kubernetes | Capella Documents"><meta data-rh="true" name="description" content="Document History"><meta data-rh="true" property="og:description" content="Document History"><link data-rh="true" rel="icon" href="/img/capellalogo.png"><link data-rh="true" rel="canonical" href="https://documents.capellasystems.net/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/" hreflang="en"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XGNQSHZSNS-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Capella Documents RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Capella Documents Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Capella Documents" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5f527c02.css">
<script src="/assets/js/runtime~main.909cc4c1.js" defer="defer"></script>
<script src="/assets/js/main.715ba7c9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/capellalogo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/capellalogo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/capellalogo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Capella Documentation</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">Cambria FTC</a><a class="navbar__item navbar__link" href="/docs/Cambria Stream/Installation Guides/Kubernetes/AWS/cambria_stream_aws_kubernetes/">Cambria Stream</a><a href="https://www.capellasystems.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Capella Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">Installation Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">Kubernetes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">AWS</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">Cambria Cluster / FTC 5.5.0 - AWS Kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform_Kubernetes/cambria-cluster-ftc-terraform">Akamai</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Oracle/">Oracle</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Windows/placeholder">Windows</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/Release Notes/FTC v5.5 to v4.0">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/API/placeholder">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/Tutorials/aws_ami_creation_editing/">Tutorials<button style="margin-left:5px;cursor:pointer;margin-bottom:-2px;z-index:1000;background:transparent;padding:0;display:inline-flex;align-items:center;justify-content:center;border:none;color:var(--ifm-color-primary)" title="Sort A-Z"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-az lucide-arrow-down-a-z tutorial-sort-icon" aria-hidden="true"><path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path></svg></button></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/FAQ/placeholder">FAQ</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation Guides</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Kubernetes</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">AWS</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Cambria Cluster / FTC 5.5.0 - AWS Kubernetes</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cambria Cluster / FTC 5.5.0 - AWS Kubernetes</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-history">Document History<a href="#document-history" class="hash-link" aria-label="Direct link to Document History" title="Direct link to Document History">‚Äã</a></h2>
<table><thead><tr><th>Version</th><th>Date</th><th>Description</th></tr></thead><tbody><tr><td>5.4.0</td><td>10/03/2024</td><td>Updated for release 5.4.0.21627 (Linux)</td></tr><tr><td>5.5.0</td><td>04/11/2025</td><td>Updated for release 5.5.0.23529 (Linux)</td></tr></tbody></table>
<blockquote>
<p><strong>Download the online version of this document for the latest information and latest files. Always download the latest files.</strong></p>
</blockquote>
<p>Do not move forward with the installation process if you do not agree with the End User License Agreement (EULA) for our products.<br>
<!-- -->You can download and read the EULA for Cambria FTC, Cambria Cluster, and Cambria License Manager from the links below:</p>
<ul>
<li><a href="https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0" target="_blank" rel="noopener noreferrer">Cambria License Manager EULA</a></li>
<li><a href="https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0" target="_blank" rel="noopener noreferrer">Cambria Cluster EULA</a></li>
<li><a href="https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0" target="_blank" rel="noopener noreferrer">Cambria FTC EULA</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="limitations-and-security-information">Limitations and Security Information<a href="#limitations-and-security-information" class="hash-link" aria-label="Direct link to Limitations and Security Information" title="Direct link to Limitations and Security Information">‚Äã</a></h3>
<p>Cambria FTC, Cluster, and License Manager are installed on Linux Docker containers. Limitations and security checks done for this version are included in our general Linux Documents below:</p>
<ul>
<li><a href="https://www.dropbox.com/scl/fi/0rvskhpqtla6dffhbfli5/Linux_Cambria_Cluster_and_FTC_5_5_0_Guide.pdf?rlkey=ngryjzox121ow5fgbc4y8n2yd" target="_blank" rel="noopener noreferrer">Linux Cambria Cluster and FTC 5.5.0 Guide</a></li>
</ul>
<blockquote>
<p><strong>Note:</strong> These documents are for informational use only. The setup for Kubernetes starts in section 3. Create Kubernetes Cluster.<br>
<!-- -->This document references Kubernetes version 1.32.1 only.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-important-before-you-begin">‚ö†Ô∏è Important: Before You Begin<a href="#Ô∏è-important-before-you-begin" class="hash-link" aria-label="Direct link to ‚ö†Ô∏è Important: Before You Begin" title="Direct link to ‚ö†Ô∏è Important: Before You Begin">‚Äã</a></h2>
<p>PDF documents have a copy/paste issue. For best results, download this document and any referenced PDF documents in this guide and open them in a PDF viewer such as Adobe Acrobat.</p>
<p>For commands that are in more than one line, copy each line one by one and check that the copied command matches the one in the document.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="Ô∏è-critical-information-read-before-proceeding-with-installation">‚ö†Ô∏è Critical Information: Read Before Proceeding with Installation<a href="#Ô∏è-critical-information-read-before-proceeding-with-installation" class="hash-link" aria-label="Direct link to ‚ö†Ô∏è Critical Information: Read Before Proceeding with Installation" title="Direct link to ‚ö†Ô∏è Critical Information: Read Before Proceeding with Installation">‚Äã</a></h2>
<p>Before starting the installation, carefully review the following considerations. Skipping this section may result in errors, failed deployments, or misconfigurations.</p>
<ol>
<li>
<p><strong>A New Kubernetes Cluster Will Be Deployed</strong><br>
<!-- -->‚óè The installation process creates a brand-new Kubernetes cluster to keep the Cambria ecosystem isolated from other applications.</p>
</li>
<li>
<p><strong>Default Installation is Non-Secure</strong><br>
<!-- -->‚óè The guide covers installation with default settings in an open environment (not secure).<br>
<!-- -->‚óè If you require a secure or customized setup, you will need AWS expertise, which is not covered in this guide.<br>
<!-- -->‚óè Firewall information is provided in section 1.5. Firewall Information</p>
</li>
<li>
<p><strong>Understand Your Transcoding Requirements</strong><br>
<!-- -->‚óè Know your expected transcoding volume, input/output specs, and whether a GPU is needed.<br>
<!-- -->‚óè Refer to section 1.3. AWS EC2 Instance Information and Benchmark for guidelines on machine requirements.</p>
</li>
<li>
<p><strong>Administrative Rights Required</strong><br>
<!-- -->‚óè Many of the steps in this guide require administrative rights to AWS for adding permissions and performing other administrative functions of that sort.</p>
</li>
<li>
<p><strong>Check AWS Account Quota</strong><br>
<!-- -->‚óè Ensure the AWS account has sufficient quota to deploy Kubernetes resources.<br>
<!-- -->‚óè See section 1.2. Resource Usage for estimated resource requirements.</p>
</li>
<li>
<p><strong>A Separate Linux Machine is Required</strong><br>
<!-- -->‚óè A dedicated Linux machine (preferably Ubuntu) is needed to deploy Kubernetes.<br>
<!-- -->‚óè Keeping Kubernetes tools and configuration files on a dedicated system is strongly recommended.</p>
</li>
<li>
<p><strong>Verify Region-Specific Resource Availability</strong><br>
<!-- -->‚óè Not all AWS regions support the same resources (e.g., GPU availability varies by region).<br>
<!-- -->‚óè Consult AWS documentation to confirm available resources in your desired region.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-overview">Document Overview<a href="#document-overview" class="hash-link" aria-label="Direct link to Document Overview" title="Direct link to Document Overview">‚Äã</a></h2>
<p>The purpose of this document is to provide a walkthrough of the installation and initial testing process of the <strong>Cambria Cluster</strong> and <strong>Cambria FTC</strong> applications in a Kubernetes environment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="document-structure">Document Structure<a href="#document-structure" class="hash-link" aria-label="Direct link to Document Structure" title="Direct link to Document Structure">‚Äã</a></h3>
<ol>
<li>Overview of the Cambria Cluster / FTC Environment in a Kubernetes Environment</li>
<li>Preparation for the installation (Prerequisites)</li>
<li>Create and configure the Kubernetes Cluster</li>
<li>Install Cambria Cluster and Cambria FTC on the Kubernetes Cluster</li>
<li>Verify the installation is working properly</li>
<li>Test the Cambria Cluster / FTC applications</li>
<li>Update the Cambria Cluster / FTC applications on Kubernetes Cluster</li>
<li>Delete a Kubernetes Cluster</li>
<li>Quick Reference of Kubernetes Installation</li>
<li>Quick Reference of Important Kubernetes Components (URLs, template projects, test player, etc.)</li>
<li>Glossary of important terms</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-overview">1. Overview<a href="#1-overview" class="hash-link" aria-label="Direct link to 1. Overview" title="Direct link to 1. Overview">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-cambria-cluster--ftc-kubernetes-deployment">1.1 Cambria Cluster / FTC Kubernetes Deployment<a href="#11-cambria-cluster--ftc-kubernetes-deployment" class="hash-link" aria-label="Direct link to 1.1 Cambria Cluster / FTC Kubernetes Deployment" title="Direct link to 1.1 Cambria Cluster / FTC Kubernetes Deployment">‚Äã</a></h3>
<p>There are two major applications involved in this Kubernetes installation:</p>
<ul>
<li><strong>Cambria Cluster</strong></li>
<li><strong>Cambria FTC</strong></li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster">Cambria Cluster<a href="#cambria-cluster" class="hash-link" aria-label="Direct link to Cambria Cluster" title="Direct link to Cambria Cluster">‚Äã</a></h3>
<p>This deployment is recommended to run on <strong>at least 3 nodes</strong> (<code>replica = 3</code>) with a <strong>LoadBalancer service</strong> that exposes the application externally.</p>
<ul>
<li>Each Cambria Cluster pod is installed on its own node.</li>
<li>One pod acts as the <strong>leader</strong>, and the other two serve as <strong>replicas</strong>, allowing automatic failover.</li>
</ul>
<p>Each <strong>Cambria Cluster pod</strong> includes:</p>
<ol>
<li><code>Cambria Cluster</code> (application container)</li>
<li><code>Leader Elector</code> tool ‚Äì designates the pod leader</li>
<li><code>Cambria FTC Autoscaler</code> tool ‚Äì auto-deploys FTC workers based on job load:</li>
</ol>
<blockquote>
<p><strong>Scaling Formula:</strong><br>
<!-- -->Number of Nodes to Deploy = <code>(Number of Queued Jobs + 2) / 3</code></p>
</blockquote>
<p>Additionally:</p>
<ul>
<li>A <strong>PostgreSQL database</strong> pod is deployed per active Cambria Cluster pod.</li>
<li>Databases are <strong>replicated</strong> for fault tolerance and data integrity.</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-ftc">Cambria FTC<a href="#cambria-ftc" class="hash-link" aria-label="Direct link to Cambria FTC" title="Direct link to Cambria FTC">‚Äã</a></h3>
<p>Capella‚Äôs <strong>Cambria FTC</strong> deployment consists of <strong>one or more nodes</strong>, often using different instance types than the Cluster nodes.</p>
<ul>
<li>FTC pods are responsible for executing encoding jobs.</li>
<li>Each pod is assigned its <strong>own node</strong>.</li>
</ul>
<p>Each <strong>Cambria FTC pod</strong> includes:</p>
<ol>
<li><code>Cambria FTC</code> (application container)</li>
<li><code>Auto-Connect FTC</code> (dotnet tool) ‚Äì performs:<!-- -->
<ul>
<li>Pod discovery</li>
<li>Cluster identification</li>
<li>FTC-Cluster auto-connect logic</li>
<li>If no Cluster is found within ~20 minutes, the node is recycled</li>
</ul>
</li>
<li><code>Pgcluster</code> ‚Äì PostgreSQL container for job and state persistence (pod lifetime only)</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-note">Deployment Note<a href="#deployment-note" class="hash-link" aria-label="Direct link to Deployment Note" title="Direct link to Deployment Note">‚Äã</a></h3>
<p>Each node in the Kubernetes Cluster will either be running the <strong>Cambria Cluster deployment</strong> or the <strong>Cambria FTC deployment</strong>, but not both.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-resource-usage">1.2 Resource Usage<a href="#12-resource-usage" class="hash-link" aria-label="Direct link to 1.2 Resource Usage" title="Direct link to 1.2 Resource Usage">‚Äã</a></h3>
<p>The resources used and their quantities will vary depending on requirements and environments.<br>
<!-- -->Below is general information about major resource usage. Other resources may also be required.<br>
<!-- -->Please consult AWS and <code>eksctl</code> documentation for more details.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reference-documentation">Reference Documentation:<a href="#reference-documentation" class="hash-link" aria-label="Direct link to Reference Documentation:" title="Direct link to Reference Documentation:">‚Äã</a></h4>
<ul>
<li><a href="https://docs.aws.amazon.com/eks/latest/userguide/eks-deployment-options.html" target="_blank" rel="noopener noreferrer">EKS Deployment Options</a></li>
<li><a href="https://eksctl.io/usage/creating-and-managing-clusters/" target="_blank" rel="noopener noreferrer">eksctl: Creating and Managing Clusters</a></li>
<li><a href="https://eksctl.io/usage/vpc-networking/" target="_blank" rel="noopener noreferrer">eksctl: VPC Networking</a></li>
<li><a href="https://docs.aws.amazon.com/eks/latest/best-practices/subnets.html" target="_blank" rel="noopener noreferrer">EKS Subnet Best Practices</a></li>
<li><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AvailableIpPerENI.html" target="_blank" rel="noopener noreferrer">AWS EC2: Available IPs per ENI</a></li>
<li><a href="https://docs.aws.amazon.com/eks/latest/best-practices/network-security.html" target="_blank" rel="noopener noreferrer">EKS Network Security Best Practices</a></li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resource-overview">Resource Overview<a href="#resource-overview" class="hash-link" aria-label="Direct link to Resource Overview" title="Direct link to Resource Overview">‚Äã</a></h4>
<table><thead><tr><th>Component</th><th>Description</th></tr></thead><tbody><tr><td><strong>Load Balancers</strong></td><td>- 0‚Äì3 Classic Load Balancers (Manager WebUI, Manager Web Server, Grafana)</td></tr></tbody></table>
<ul>
<li>0‚Äì1 Network Load Balancer (Ingress)                                    |
| <strong>Nodes</strong>          | - <code>X</code> Cambria Manager Instances (Default: 3)</li>
<li><code>Y</code> Cambria FTC Instances (Default max: 20)                            |
| <strong>Networking</strong>     | - 1 VPC (default)</li>
<li>3 public subnets and 3 private subnets (2 subnets reserved)</li>
<li>Default <code>/16</code> CIDR</li>
<li>Each subnet: <code>/19</code> CIDR                                                 |</li>
</ul>
<blockquote>
<p><strong>Note:</strong> For CIDR planning, refer to<br>
<a href="https://docs.aws.amazon.com/eks/latest/best-practices/networking.html" target="_blank" rel="noopener noreferrer">EKS Best Practices: Networking</a></p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="security-groups">Security Groups<a href="#security-groups" class="hash-link" aria-label="Direct link to Security Groups" title="Direct link to Security Groups">‚Äã</a></h4>
<ul>
<li>Default: 1 security group for the <strong>control plane</strong></li>
<li>Default: <code>X</code> security groups ‚Äî one per <strong>node group</strong></li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-aws-machine-information-and-benchmark">1.3 AWS Machine Information and Benchmark<a href="#13-aws-machine-information-and-benchmark" class="hash-link" aria-label="Direct link to 1.3 AWS Machine Information and Benchmark" title="Direct link to 1.3 AWS Machine Information and Benchmark">‚Äã</a></h3>
<p>The following benchmark compares two AWS EC2 instance types.<br>
<!-- -->This information is current as of <strong>September 2023</strong>.</p>
<blockquote>
<p>‚ö†Ô∏è Benchmark results reflect workloads that involve read/write access to <strong>AWS S3</strong>, which affects transcoding speed.</p>
</blockquote>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-job-configuration">Benchmark Job Configuration<a href="#benchmark-job-configuration" class="hash-link" aria-label="Direct link to Benchmark Job Configuration" title="Direct link to Benchmark Job Configuration">‚Äã</a></h4>
<table><thead><tr><th>Type</th><th>Codec</th><th>Frame Rate</th><th>Resolution</th></tr></thead><tbody><tr><td><strong>Source</strong></td><td>TS</td><td>H.264</td><td>30 fps, 1920√ó1080 @ 8 Mbps</td></tr><tr><td><strong>Output</strong></td><td>HLS/TS</td><td>H.264</td><td>29.97 fps</td></tr></tbody></table>
<ul>
<li>1920√ó1080 @ 4 Mbps</li>
<li>1280√ó720 @ 2.4 Mbps</li>
<li>640√ó480 @ 0.8 Mbps</li>
<li>320√ó240 @ 0.3 Mbps |</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-c6a4xlarge-amd-epyc-7r13">a. <code>c6a.4xlarge</code> [AMD EPYC 7R13]<a href="#a-c6a4xlarge-amd-epyc-7r13" class="hash-link" aria-label="Direct link to a-c6a4xlarge-amd-epyc-7r13" title="Direct link to a-c6a4xlarge-amd-epyc-7r13">‚Äã</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="machine-info">Machine Info<a href="#machine-info" class="hash-link" aria-label="Direct link to Machine Info" title="Direct link to Machine Info">‚Äã</a></h5>
<table><thead><tr><th>Name</th><th>RAM</th><th>CPUs</th><th>Storage</th><th>Network Performance</th><th>Cost/Hour</th></tr></thead><tbody><tr><td>c6a.4xlarge</td><td>32 GB</td><td>16</td><td>Any</td><td>12.5 Gbps</td><td>$0.612</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-results">Benchmark Results<a href="#benchmark-results" class="hash-link" aria-label="Direct link to Benchmark Results" title="Direct link to Benchmark Results">‚Äã</a></h5>
<table><thead><tr><th>Concurrent Jobs</th><th>Real-Time Speed</th><th>CPU Usage</th></tr></thead><tbody><tr><td>2</td><td>- 0.73x RT per job (slower than real-time)</td><td></td></tr></tbody></table>
<ul>
<li>Total throughput: 1.46x RT<br>
<!-- -->(‚âà 42 sec to transcode 1 min)          | 100%      |</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="b-c6a16xlarge-amd-epyc-7r13">b. <code>c6a.16xlarge</code> [AMD EPYC 7R13]<a href="#b-c6a16xlarge-amd-epyc-7r13" class="hash-link" aria-label="Direct link to b-c6a16xlarge-amd-epyc-7r13" title="Direct link to b-c6a16xlarge-amd-epyc-7r13">‚Äã</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="machine-info-1">Machine Info<a href="#machine-info-1" class="hash-link" aria-label="Direct link to Machine Info" title="Direct link to Machine Info">‚Äã</a></h5>
<table><thead><tr><th>Name</th><th>RAM</th><th>CPUs</th><th>Storage</th><th>Network Performance</th><th>Cost/Hour</th></tr></thead><tbody><tr><td>c6a.16xlarge</td><td>128 GB</td><td>64</td><td>Any</td><td>25 Gbps</td><td>$2.448</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-results-1">Benchmark Results<a href="#benchmark-results-1" class="hash-link" aria-label="Direct link to Benchmark Results" title="Direct link to Benchmark Results">‚Äã</a></h5>
<table><thead><tr><th>Concurrent Jobs</th><th>Real-Time Speed</th><th>CPU Usage</th></tr></thead><tbody><tr><td>2</td><td>- 2.17x RT per job (faster than real-time)</td><td></td></tr></tbody></table>
<ul>
<li>Total throughput: 4.34x RT<br>
<!-- -->(‚âà 21 sec to transcode 1 min)           | ~84%       |</li>
</ul>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-summary">Benchmark Summary<a href="#benchmark-summary" class="hash-link" aria-label="Direct link to Benchmark Summary" title="Direct link to Benchmark Summary">‚Äã</a></h4>
<ul>
<li>The <strong>c6a.16xlarge</strong> instance provides significantly higher throughput due to increased compute resources.</li>
<li>However, the <strong>c6a.4xlarge</strong> instance is <strong>more cost-effective per hour</strong>.</li>
<li>The choice between the two should consider both budget and throughput requirements.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-cambria-application-access">1.4 Cambria Application Access<a href="#14-cambria-application-access" class="hash-link" aria-label="Direct link to 1.4 Cambria Application Access" title="Direct link to 1.4 Cambria Application Access">‚Äã</a></h3>
<p>The Cambria applications can be accessed using the following methods:</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="141-external-access-via-tcp-load-balancer">1.4.1 External Access via TCP Load Balancer<a href="#141-external-access-via-tcp-load-balancer" class="hash-link" aria-label="Direct link to 1.4.1 External Access via TCP Load Balancer" title="Direct link to 1.4.1 External Access via TCP Load Balancer">‚Äã</a></h4>
<p>By default, Cambria installs with one TCP Load Balancer for:</p>
<ul>
<li><strong>Manager WebUI + License Manager</strong></li>
<li><strong>Web / REST API Server</strong></li>
</ul>
<p>These load balancers are publicly reachable by IP or domain name with their configured ports.</p>
<p><strong>Examples</strong>:</p>
<ul>
<li><strong>Cambria Manager WebUI:</strong> <code>https://44.33.212.155:8161</code></li>
<li><strong>Cambria REST API:</strong> <code>https://121.121.121.121:8650/CambriaFC/v1/SystemInfo</code></li>
</ul>
<blockquote>
<p>üîÑ You can enable or disable external access via TCP Load Balancer by editing the Helm configuration (see section 4.2).<br>
<!-- -->If disabled, you&#x27;ll need to configure another access method below.</p>
</blockquote>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="142-http-ingress-via-reverse-proxy">1.4.2 HTTP Ingress via Reverse Proxy<a href="#142-http-ingress-via-reverse-proxy" class="hash-link" aria-label="Direct link to 1.4.2 HTTP Ingress via Reverse Proxy" title="Direct link to 1.4.2 HTTP Ingress via Reverse Proxy">‚Äã</a></h4>
<p>If you‚Äôd rather use a purchased domain (e.g., from GoDaddy) or disable public IP access, you can expose services through an HTTP Ingress.</p>
<ul>
<li>
<p>Only <strong>one IP/domain name</strong> is needed.</p>
</li>
<li>
<p>Traffic is routed by subdomain:</p>
<ul>
<li><code>webui.mydomain.com</code> ‚Üí Cambria WebUI</li>
<li><code>api.mydomain.com</code> ‚Üí Cambria Web Server / REST API</li>
<li><code>monitoring.mydomain.com</code> ‚Üí Grafana Dashboard</li>
</ul>
</li>
</ul>
<blockquote>
<p>‚ö†Ô∏è Capella provides a default ingress hostname for testing. In production, you must configure your own hostname, SSL certificate, and domain settings (detailed later in this guide).</p>
</blockquote>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="15-firewall-information">1.5 Firewall Information<a href="#15-firewall-information" class="hash-link" aria-label="Direct link to 1.5 Firewall Information" title="Direct link to 1.5 Firewall Information">‚Äã</a></h3>
<p>Default Kubernetes cluster setup includes basic virtual network firewalling. If using custom or more restrictive firewall rules, ensure the following ports are open:</p>
<table><thead><tr><th>Port</th><th>Protocol</th><th>Traffic Direction</th><th>Description</th></tr></thead><tbody><tr><td>8650</td><td>TCP</td><td>Inbound</td><td>Cambria Cluster REST API</td></tr><tr><td>8161</td><td>TCP</td><td>Inbound</td><td>Cambria Cluster WebUI</td></tr><tr><td>8678</td><td>TCP</td><td>Inbound</td><td>Cambria License Manager Web Server</td></tr><tr><td>8481</td><td>TCP</td><td>Inbound</td><td>Cambria License Manager WebUI</td></tr><tr><td>9100</td><td>TCP</td><td>Inbound</td><td>Prometheus Exporter for Cambria Cluster</td></tr><tr><td>8648</td><td>TCP</td><td>Inbound</td><td>Cambria FTC REST API</td></tr><tr><td>3100</td><td>TCP</td><td>Inbound</td><td>Loki Logging Service</td></tr><tr><td>3000</td><td>TCP</td><td>Inbound</td><td>Grafana Dashboard</td></tr><tr><td>443</td><td>TCP</td><td>Inbound</td><td>Capella Ingress</td></tr><tr><td>‚Äî</td><td>TCP/UDP</td><td>Outbound</td><td>All outbound traffic</td></tr></tbody></table>
<p>Additionally, ensure outbound/inbound access for Cambria licensing domains:</p>
<table><thead><tr><th>Domain</th><th>Port</th><th>Protocol</th><th>Description</th></tr></thead><tbody><tr><td><code>api.cryptlex.com</code></td><td>443</td><td>TCP</td><td>License Server</td></tr><tr><td><code>cryptlexapi.capellasystems.net</code></td><td>8485</td><td>TCP</td><td>License Cache Server</td></tr><tr><td><code>cpfs.capellasystems.net</code></td><td>8483</td><td>TCP</td><td>License Backup Server</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-prerequisites">2. Prerequisites<a href="#2-prerequisites" class="hash-link" aria-label="Direct link to 2. Prerequisites" title="Direct link to 2. Prerequisites">‚Äã</a></h3>
<p>The following steps must be completed before starting the deployment process.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="21-tools-kubectl-helm-eksctl-and-aws-cli">2.1 Tools: Kubectl, Helm, Eksctl, and AWS CLI<a href="#21-tools-kubectl-helm-eksctl-and-aws-cli" class="hash-link" aria-label="Direct link to 2.1 Tools: Kubectl, Helm, Eksctl, and AWS CLI" title="Direct link to 2.1 Tools: Kubectl, Helm, Eksctl, and AWS CLI">‚Äã</a></h4>
<p>This guide uses <code>curl</code> and <code>unzip</code> to run commands and download required applications.</p>
<p>Install dependencies on Ubuntu:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt update; sudo apt upgrade; sudo apt install curl unzip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then download and prepare the deployment package:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -o CambriaClusterKubernetesAWS_5_5_0.zip -L &quot;https://www.dropbox.com/scl/fi/4dg2024wbbq0lx1qbnk8e/CambriaClusterKubernetesAWS_5_5_0.zip?rlkey=j0q7xgxv2v60x4bcwfoesd8nv&amp;st=zfnff3f2&amp;dl=1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">unzip CambriaClusterKubernetesAWS_5_5_0.zip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x *.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Note:</strong> Scripts are tested on <strong>Ubuntu</strong>. Other Linux distributions may work but are untested.</p>
</blockquote>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="211-installation">2.1.1 Installation<a href="#211-installation" class="hash-link" aria-label="Direct link to 2.1.1 Installation" title="Direct link to 2.1.1 Installation">‚Äã</a></h5>
<p>There are two options to install Kubernetes tools:</p>
<p><strong>Option 1: Use Provided Scripts</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./installKubeTools.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./installKubeToolsAws.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Manual Installation</strong></p>
<ul>
<li><a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">Kubectl</a></li>
<li><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Helm</a></li>
<li><a href="https://eksctl.io/installation/" target="_blank" rel="noopener noreferrer">Eksctl</a></li>
<li><a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html" target="_blank" rel="noopener noreferrer">AWS CLI</a></li>
</ul>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="212-verification">2.1.2 Verification<a href="#212-verification" class="hash-link" aria-label="Direct link to 2.1.2 Verification" title="Direct link to 2.1.2 Verification">‚Äã</a></h5>
<p>Run the following to verify installations:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl version --client</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm version</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl version</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="22-create-and-configure-aws-permissions">2.2 Create and Configure AWS Permissions<a href="#22-create-and-configure-aws-permissions" class="hash-link" aria-label="Direct link to 2.2 Create and Configure AWS Permissions" title="Direct link to 2.2 Create and Configure AWS Permissions">‚Äã</a></h4>
<p>To create Kubernetes resources, IAM permissions must be configured.</p>
<p>Run this to set your AWS account ID:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export AWS_ACCOUNT_ID=$(aws sts get-caller-identity --query &quot;Account&quot; --output text)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="221-create-custom-policies">2.2.1 Create Custom Policies<a href="#221-create-custom-policies" class="hash-link" aria-label="Direct link to 2.2.1 Create Custom Policies" title="Direct link to 2.2.1 Create Custom Policies">‚Äã</a></h5>
<p>Eksctl requires specific IAM policies. To create them:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./createEksctlCustomAwsPolicies.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If creation fails, verify the script and existing policies. Delete old ones if necessary.</p>
<p>For more details: <a href="https://eksctl.io/usage/minimum-iam-policies/" target="_blank" rel="noopener noreferrer">Minimum eksctl IAM Policies</a></p>
<hr>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="222-create-and-assign-eksctl-aws-role">2.2.2 Create and Assign Eksctl AWS Role<a href="#222-create-and-assign-eksctl-aws-role" class="hash-link" aria-label="Direct link to 2.2.2 Create and Assign Eksctl AWS Role" title="Direct link to 2.2.2 Create and Assign Eksctl AWS Role">‚Äã</a></h5>
<ol>
<li>Create a role <code>eksctl-user</code> with the following policies:</li>
</ol>
<ul>
<li>AmazonEC2FullAccess</li>
<li>AWSCloudFormationFullAccess</li>
<li>EksAllAccess</li>
<li>IamLimitedAccess</li>
</ul>
<ol start="2">
<li>Create the role via:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./createEksctlClusterUserRole.sh eksctl-user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Must have permissions to create roles and instance profiles.</p>
</blockquote>
<ol start="3">
<li>On EC2, attach the new IAM role:
Go to <strong>Actions &gt; Security &gt; Modify IAM role</strong> and choose <code>eksctl-user-instance-profile</code>.</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-kubernetes-cluster">3. Create Kubernetes Cluster<a href="#3-create-kubernetes-cluster" class="hash-link" aria-label="Direct link to 3. Create Kubernetes Cluster" title="Direct link to 3. Create Kubernetes Cluster">‚Äã</a></h3>
<p>This section describes how to create an EKS cluster and Cambria Cluster node group.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="31-create-aws-eks-cluster-and-node-group">3.1 Create AWS EKS Cluster and Node Group<a href="#31-create-aws-eks-cluster-and-node-group" class="hash-link" aria-label="Direct link to 3.1 Create AWS EKS Cluster and Node Group" title="Direct link to 3.1 Create AWS EKS Cluster and Node Group">‚Äã</a></h4>
<p>Recommendations:</p>
<ul>
<li><strong>Cambria Cluster</strong> handles encoding job scheduling.</li>
<li>Use at least <strong>c7i.xlarge</strong> for each node.</li>
<li>Set node count to <strong>3</strong> for redundancy.</li>
<li>One node is active; the other two serve as failover.</li>
</ul>
<hr>
<p><strong>Step 1: Set environment variables</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export CLUSTER_NAME=cambria-cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export REGION=us-west-2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export KUBEVERSION=1.32</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<p><strong>Step 2: Create the cluster</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl create cluster \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--name=$CLUSTER_NAME \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--region=$REGION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--version=$KUBEVERSION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--kubeconfig=./$CLUSTER_NAME-kubeconfig.yaml \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--node-private-networking \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--nodegroup-name=manager-nodes \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--with-oidc \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--node-ami-family=Ubuntu2204 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--nodes=3 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--instance-types=c7i.xlarge \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--vpc-cidr=10.0.0.0/16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Capella has also tested AmazonLinux2, but it does not support GPU workloads.
The lowest CIDR tested by Capella is <code>/19</code>.</p>
</blockquote>
<p>Run the following command to create the Kubernetes cluster using <code>eksctl</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl create cluster \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --name=$CLUSTER_NAME \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --region=$REGION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --version=$KUBEVERSION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --kubeconfig=./$CLUSTER_NAME-kubeconfig.yaml \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --node-private-networking \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --nodegroup-name=manager-nodes \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --with-oidc \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --node-ami-family=Ubuntu2204 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --nodes=3 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --instance-types=c7i.xlarge \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --vpc-cidr=10.0.0.0/16</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3. Set kubeconfig as an Environment Variable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export KUBECONFIG=$CLUSTER_NAME-kubeconfig.yaml</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4. Verify Cluster Access</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get nodes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Expected output should resemble:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pgsql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                                         STATUS   ROLES    AGE     VERSION</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ip-10-0-12-44.us-west-2.compute.internal     Ready    &lt;none&gt;   118m    v1.32.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ip-10-0-16-207.us-west-2.compute.internal    Ready    &lt;none&gt;   118m    v1.32.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ip-10-0-22-84.us-west-2.compute.internal     Ready    &lt;none&gt;   118m    v1.32.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">‚ö†Ô∏è If the output is different or an error occurs, verify deployment information, credentials, and permissions.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3.2 Create EBS CSI Driver</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step 1: Create IAM Role for CSI Plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This IAM role is required to allow the CSI plugin to manage EBS volumes.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl create iamserviceaccount \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --name=ebs-csi-controller-sa \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace=kube-system \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cluster=$CLUSTER_NAME \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --region=$REGION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --role-only \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --attach-policy-arn=arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --approve \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --role-name=eksctl-ebs-csi-driver-role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">üîß The role name (--role-name) must:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Start with eksctl-</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Be unique to the cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Be ‚â§ 64 characters</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Step 2: Install AWS EBS CSI Driver Addon</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl create addon \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --name aws-ebs-csi-driver \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cluster=$CLUSTER_NAME \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --region=$REGION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --force \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --service-account-role-arn=arn:aws:iam::$AWS_ACCOUNT_ID:role/eksctl-ebs-csi-driver-role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">‚ö†Ô∏è This step installs the AWS EBS CSI plugin.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">It must be in Active status before continuing.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">If this fails, consider re-creating the cluster as the safest option.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl-ebs-csi-driver-role: the role name from the command in step 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl create addon \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--name aws-ebs-csi-driver \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--cluster=$CLUSTER_NAME \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--region=$REGION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--force \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--service-account-role-arn=arn:aws:iam::$AWS_ACCOUNT_ID:role/eksctl-ebs-csi-driver-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>un the following command to verify the AWS EBS CSI Driver plugin state:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl get addon   --name=aws-ebs-csi-driver   --cluster=$CLUSTER_NAME   --region=$REGION</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>‚ö†Ô∏è <strong>DO NOT proceed to the next step until the plugin status shows <code>ACTIVE</code>.</strong></p>
</blockquote>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-aws-iam-permissions-for-ftc">3.3 AWS IAM Permissions for FTC<a href="#33-aws-iam-permissions-for-ftc" class="hash-link" aria-label="Direct link to 3.3 AWS IAM Permissions for FTC" title="Direct link to 3.3 AWS IAM Permissions for FTC">‚Äã</a></h3>
<p>Certain permissions must be granted for Cambria FTC to access S3 and use the FTC autoscaler.<br>
<!-- -->This requires <strong>IAM administrative privileges</strong>.</p>
<blockquote>
<p>‚ÑπÔ∏è These steps can be done via the AWS Console, but this guide uses the AWS CLI on a Linux deployment machine.</p>
</blockquote>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="331-create-ftc-iam-role">3.3.1 Create FTC IAM Role<a href="#331-create-ftc-iam-role" class="hash-link" aria-label="Direct link to 3.3.1 Create FTC IAM Role" title="Direct link to 3.3.1 Create FTC IAM Role">‚Äã</a></h3>
<p>The Cambria FTC application requires a role with read/write permissions for S3 buckets.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./createRoleForFtcInstances.sh eksctl-ftc-role ftcS3PermissionSample.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>eksctl-ftc-role</code>: IAM role name (must start with <code>eksctl-</code>, be unique to the cluster, ‚â§ 64 characters)</li>
<li><code>ftcS3PermissionSample.json</code>: Capella-provided sample policy allowing S3 read/write/list access</li>
</ul>
<blockquote>
<p>üìÑ Refer to AWS documentation to customize or generate your own S3 access policy:<br>
<a href="https://awspolicygen.s3.amazonaws.com/policygen.html" target="_blank" rel="noopener noreferrer">AWS IAM Policy Generator</a></p>
</blockquote>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="332-create-ftc-autoscaler-roles">3.3.2 Create FTC Autoscaler Roles<a href="#332-create-ftc-autoscaler-roles" class="hash-link" aria-label="Direct link to 3.3.2 Create FTC Autoscaler Roles" title="Direct link to 3.3.2 Create FTC Autoscaler Roles">‚Äã</a></h3>
<blockquote>
<p>Only required if using Cambria FTC&#x27;s autoscaler feature.</p>
</blockquote>
<p>Run the following script:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./createRolesForFtcAutoscaler.sh eksctl-autoscaler-role eksctl-autoscaler-cfg-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>eksctl-autoscaler-role</code>: IAM role for the autoscaler container</li>
<li><code>eksctl-autoscaler-cfg-role</code>: IAM role for autoscaler configuration</li>
</ul>
<blockquote>
<p>üí° Both role names must:</p>
<ul>
<li>Start with <code>eksctl-</code></li>
<li>Be unique to the EKS cluster</li>
<li>Be ‚â§ 64 characters in length</li>
</ul>
</blockquote>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./createRolesForFtcAutoscaler.sh eksctl-autoscaler-role eksctl-autoscaler-cfg-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-optional-restricting-cambria-ftc-encoder-designated-nodes-via-exclusion-label">3.4 (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label<a href="#34-optional-restricting-cambria-ftc-encoder-designated-nodes-via-exclusion-label" class="hash-link" aria-label="Direct link to 3.4 (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label" title="Direct link to 3.4 (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label">‚Äã</a></h3>
<p>Follow these steps only if more precise control is required over which nodes Cambria FTC is installed on.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">‚Äã</a></h4>
<p>By default, the Cambria management and encoding applications are installed on separate nodes according to a specified node instance type.<br>
<!-- -->For example, if the management node instance type is set to <code>c7i.xlarge</code>, Cambria Cluster can only be installed on nodes of that instance type, while Cambria FTC can be installed on nodes of other instance types.</p>
<p>In some scenarios, the default setup may not be sufficient. For example, certain nodes may need to handle both management and encoding, or specific nodes in the cluster may be designated for other tasks and should not run encoding tasks.<br>
<!-- -->To accommodate these workflows, an exclusion label must be added to the nodes where Cambria FTC should be restricted.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="steps">Steps<a href="#steps" class="hash-link" aria-label="Direct link to Steps" title="Direct link to Steps">‚Äã</a></h4>
<ol>
<li>
<p>Find out which node(s) will be Cambria FTC restricted and note down the name:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get nodes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Apply the following label to each of those nodes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label node &lt;node-name&gt; no-capella-worker=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>To apply the same restriction to all nodes in a node group:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl set labels \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cluster=$CLUSTER_NAME \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --region=$REGION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --labels=&quot;no-capella-worker=true&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --nodegroup=&lt;node-group&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>In section 4.2 (Helm Configuration), set:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">workersCanUseManagerNodes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-create-cambria-ftc-node-groups">3.5 Create Cambria FTC Node Group(s)<a href="#35-create-cambria-ftc-node-groups" class="hash-link" aria-label="Direct link to 3.5 Create Cambria FTC Node Group(s)" title="Direct link to 3.5 Create Cambria FTC Node Group(s)">‚Äã</a></h3>
<blockquote>
<p><strong>Skip this step if planning to use Cambria FTC&#x27;s autoscaler.</strong></p>
</blockquote>
<p>Run the following command to create a Node Group for the FTC worker application instances (replace highlighted values):</p>
<p><strong>Recommendation:</strong><br>
<!-- -->Use <code>c6a.4xlarge</code> instances based on [Section 1.3 Benchmarking]. Start with 1 node for testing.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl create nodegroup \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --name=worker-nodes \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --cluster=$CLUSTER_NAME \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --region=$REGION \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --node-private-networking \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --nodes=1 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --instance-types=c6a.4xlarge \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --node-ami-family=Ubuntu2204</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="36-gpu-operator-for-nvenc">3.6 GPU Operator for NVENC<a href="#36-gpu-operator-for-nvenc" class="hash-link" aria-label="Direct link to 3.6 GPU Operator for NVENC" title="Direct link to 3.6 GPU Operator for NVENC">‚Äã</a></h3>
<blockquote>
<p>Required only if using GPU instances.<br>
<strong>Not compatible with Cambria FTC&#x27;s autoscaler.</strong></p>
</blockquote>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add nvidia https://helm.ngc.nvidia.com/nvidia; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo update; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm install nvidia-operator nvidia/gpu-operator \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --create-namespace \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace gpu-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Wait at least 5 minutes for installation to complete. Then run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods -n gpu-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If pods are still initializing after 10 minutes:</p>
<p>a. Confirm at least one AWS GPU instance is present<br>
<!-- -->b. Run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl describe pod &lt;your-pod-name&gt; -n gpu-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check the <strong>Events</strong> section and contact Capella Support if needed.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="37-performance-metrics-and-logging">3.7 Performance Metrics and Logging<a href="#37-performance-metrics-and-logging" class="hash-link" aria-label="Direct link to 3.7 Performance Metrics and Logging" title="Direct link to 3.7 Performance Metrics and Logging">‚Äã</a></h3>
<p>This section is required for logging and performance metrics.</p>
<p>Follow the guide below to install <strong>Prometheus</strong>, <strong>Grafana</strong>, <strong>Loki</strong>, and <strong>Promtail</strong>:</p>
<p><a href="https://www.dropbox.com/scl/fi/b9x59y4n3ff2i3g8if36s/Prometheus_Grafana_Setup_for_Cambria_Cluster_5_5_0_on_AWS_Kubernetes.pdf?rlkey=s1jz68o18s2ajyrak2334mdeh&amp;st=wltynfq9&amp;dl=1" target="_blank" rel="noopener noreferrer">Prometheus &amp; Grafana Setup for Cambria 5.5.0 on AWS (PDF)</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-install-cambria-cluster-ftc-and-dependencies">4. Install Cambria Cluster, FTC, and Dependencies<a href="#4-install-cambria-cluster-ftc-and-dependencies" class="hash-link" aria-label="Direct link to 4. Install Cambria Cluster, FTC, and Dependencies" title="Direct link to 4. Install Cambria Cluster, FTC, and Dependencies">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-prerequisite-deploy-external-kubernetes-tools">4.1 Prerequisite: Deploy External Kubernetes Tools<a href="#41-prerequisite-deploy-external-kubernetes-tools" class="hash-link" aria-label="Direct link to 4.1 Prerequisite: Deploy External Kubernetes Tools" title="Direct link to 4.1 Prerequisite: Deploy External Kubernetes Tools">‚Äã</a></h3>
<p>These tools must be deployed before Cambria FTC / Cluster can function properly.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="411-required-tools">4.1.1 Required Tools<a href="#411-required-tools" class="hash-link" aria-label="Direct link to 4.1.1 Required Tools" title="Direct link to 4.1.1 Required Tools">‚Äã</a></h4>
<ol>
<li>
<p>Run the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./deployCambriaKubeDependencies.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Verify resource statuses:</p>
<ul>
<li>Pods should be <code>Running</code></li>
<li>All containers in <code>READY</code> should be active</li>
<li>Services should have <code>CLUSTER-IP</code> assigned</li>
<li>Check with:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n cnpg-system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n argo-events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n cert-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ol>
<p>If resources aren&#x27;t ready after 1 minute, contact Capella support.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="412-optional-ingress-nginx">4.1.2 (Optional) Ingress-Nginx<a href="#412-optional-ingress-nginx" class="hash-link" aria-label="Direct link to 4.1.2 (Optional) Ingress-Nginx" title="Direct link to 4.1.2 (Optional) Ingress-Nginx">‚Äã</a></h4>
<blockquote>
<p>Run these steps if ingress is needed, or for testing. See section 1.4 for access options.</p>
</blockquote>
<blockquote>
<p>‚ö†Ô∏è <strong>Important:</strong> Load balancer created <strong>will not auto-delete</strong> with the cluster and must be removed manually.</p>
</blockquote>
<ol>
<li>
<p>Deploy Ingress-Nginx:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.12.1/deploy/static/provider/aws/deploy.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Verify status:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n ingress-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Pods should be <code>Running</code></li>
<li><code>ingress-nginx-controller</code> service should have an <code>EXTERNAL-IP</code></li>
</ul>
</li>
</ol>
<p>If resources remain unready, contact Capella support.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="for-production-or-public-domaintls-access">For Production or Public Domain/TLS Access<a href="#for-production-or-public-domaintls-access" class="hash-link" aria-label="Direct link to For Production or Public Domain/TLS Access" title="Direct link to For Production or Public Domain/TLS Access">‚Äã</a></h5>
<ol>
<li>Go to AWS Load Balancer and find the VPC ID of your cluster.</li>
<li>In Security Groups, locate and open the matching VPC ID.</li>
<li>Add inbound rule:<!-- -->
<ul>
<li>Type: <code>Custom ICMP - IPv4</code></li>
<li>Protocol: <code>Echo Request</code></li>
<li>Source: <code>0.0.0.0/0</code></li>
</ul>
</li>
<li>Add DNS entries for:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">api.mydomain.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">webui.mydomain.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">monitoring.mydomain.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-creating-and-editing-helm-configuration-file">4.2 Creating and Editing Helm Configuration File<a href="#42-creating-and-editing-helm-configuration-file" class="hash-link" aria-label="Direct link to 4.2 Creating and Editing Helm Configuration File" title="Direct link to 4.2 Creating and Editing Helm Configuration File">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="steps-1">Steps:<a href="#steps-1" class="hash-link" aria-label="Direct link to Steps:" title="Direct link to Steps:">‚Äã</a></h4>
<ol>
<li>
<p>Create default config:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm show values capella-cluster.tgz &gt; cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Edit <code>cambriaClusterConfig.yaml</code> with a text editor.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="key-settings">Key Settings:<a href="#key-settings" class="hash-link" aria-label="Direct link to Key Settings:" title="Direct link to Key Settings:">‚Äã</a></h4>
<ul>
<li>
<p><code>workersCanUseManagerNodes: false</code></p>
<blockquote>
<p>Set to <code>true</code> if using exclusion labels (see section 3.4).</p>
</blockquote>
</li>
<li>
<p><code>workersUseGPU: false</code></p>
<blockquote>
<p>Set to <code>true</code> for NVENC GPU workflows.</p>
</blockquote>
</li>
<li>
<p><code>nbGPUs: 1</code></p>
<blockquote>
<p>Set to the number of GPUs per worker node.</p>
</blockquote>
</li>
<li>
<p><code>managerInstanceType: &quot;c7i.xlarge&quot;</code></p>
<blockquote>
<p>Set to your selected manager node instance type.</p>
</blockquote>
</li>
<li>
<p><code>ftcEnableAutoScaler: true</code></p>
<blockquote>
<p>Set to <code>false</code> to manually add FTC nodes instead of autoscaling.</p>
</blockquote>
</li>
</ul>
<h1>4.2. Helm Configuration YAML Reference</h1>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ftcAutoScalerExtraConfig: extra config for autoscaler.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">ftcAutoScalerExtraConfig</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cpClusterName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> cambria</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cpCloudVendor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> AWS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cpRegion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> us</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">west</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cpNodeRole</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> arn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">aws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">iam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">12341234</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">role/eksctl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">autoscaler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cpCapacityType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> dedicated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ftcInstanceType: instance type for the FTC nodes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">ftcInstanceType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;c6a.4xlarge&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># maxFTCInstances: maximum number of FTC instances</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">maxFTCInstances</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># pgInstances: number of postgresql database instances</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">pgInstances</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cambriaClusterReplicas: number of Cambria Cluster instances</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">cambriaClusterReplicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">externalAccess</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">exposeStreamServiceExternally</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enableIngress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">hostName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">acmeRegistrationEmail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> test@example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">acmeServer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">//acme</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">staging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">v02.api.letsencrypt.org/directory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">secrets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">pgClusterPassword</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;xrtVeQ4nN82SSiYHoswqdURZ‚Ä¶&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ftcLicenseKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2XXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cambriaClusterAPIToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;12345678-1234-43f8-b4fc-53afd3893d5f&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cambriaClusterWebUIUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;admin,defaultWebUIUser,RZvSSd3ffsElsCEEe9&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">argoEventWebhookSourceBearerToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L9Em5WIW8yth6H4uPtzT&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">aws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ftc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> arn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">aws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">iam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">12341234</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">role/eksctl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">ftc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">autoscaler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> arn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">aws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">iam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">12341234</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">role/eksctl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">autoscaler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">optionalInstall</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enableEventing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">## 4.3. Installing Cambria FTC / Cluster</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Wait at least 5 minutes after installing prerequisites before moving on to this step. In a command line / terminal window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```bash</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">install capella</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cluster capella</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cluster.tgz </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">values cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Expected output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Release &quot;capella-cluster&quot; does not exist. Installing it now.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME: capella-cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LAST DEPLOYED: Thu May 3 10:09:47 2023</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAMESPACE: default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">STATUS: deployed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">REVISION: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TEST SUITE: None</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Several components are now being deployed. Wait a few minutes.</p>
<p>The default VPC and security groups will be created. Refer to <a href="https://docs.aws.amazon.com/eks/latest/best-practices/network-security.html" target="_blank" rel="noopener noreferrer">AWS Network Security Best Practices</a> and section 1.5 for required Capella ports.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-verify-cambria-ftc--cluster-installation">5. Verify Cambria FTC / Cluster Installation<a href="#5-verify-cambria-ftc--cluster-installation" class="hash-link" aria-label="Direct link to 5. Verify Cambria FTC / Cluster Installation" title="Direct link to 5. Verify Cambria FTC / Cluster Installation">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-verify-cambria-cluster-deployment">5.1. Verify Cambria Cluster Deployment<a href="#51-verify-cambria-cluster-deployment" class="hash-link" aria-label="Direct link to 5.1. Verify Cambria Cluster Deployment" title="Direct link to 5.1. Verify Cambria Cluster Deployment">‚Äã</a></h3>
<p>Run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check for the following:</p>
<table><thead><tr><th>Resource</th><th>Expected Content</th></tr></thead><tbody><tr><td>Deployments</td><td>1 <code>cambriaclusterapp</code> and 1 <code>cambriaclusterwebui</code> deployment with all items active</td></tr><tr><td>Pods</td><td><code>X</code> pods named <code>cambriaclusterapp</code>, <code>X</code> pods with <code>pgcluster</code>, and 1 <code>cambriaclusterwebui</code> pod‚Äîall Running</td></tr><tr><td>Services</td><td>3 <code>pgcluster</code> services with <code>CLUSTER-IP</code>, 1 <code>cambriaclusterservice</code>, and 1 <code>cambriaclusterwebuiservice</code> with <code>EXTERNAL-IP</code> if <code>exposeStreamServiceExternally</code> is true</td></tr></tbody></table>
<p>If resources aren&#x27;t ready after a few minutes, contact Capella support.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-verify-cambria-ftc-deployment">5.2. Verify Cambria FTC Deployment<a href="#52-verify-cambria-ftc-deployment" class="hash-link" aria-label="Direct link to 5.2. Verify Cambria FTC Deployment" title="Direct link to 5.2. Verify Cambria FTC Deployment">‚Äã</a></h3>
<p>Run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Check for the following:</p>
<table><thead><tr><th>Resource</th><th>Expected Content</th></tr></thead><tbody><tr><td>Pods</td><td><code>X</code> pods with <code>cambriaftcapp</code>. If autoscaler is enabled, they will be pending. If not, <code>Y</code> pods should be active</td></tr><tr><td>Deployments</td><td>1 <code>cambriaftcapp</code> deployment</td></tr></tbody></table>
<p>Wait a few minutes if needed. If issues persist, contact Capella support.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-verify-applications-are-accessible">5.3. Verify Applications are Accessible<a href="#53-verify-applications-are-accessible" class="hash-link" aria-label="Direct link to 5.3. Verify Applications are Accessible" title="Direct link to 5.3. Verify Applications are Accessible">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="531-cambria-cluster-webui">5.3.1. Cambria Cluster WebUI<a href="#531-cambria-cluster-webui" class="hash-link" aria-label="Direct link to 5.3.1. Cambria Cluster WebUI" title="Direct link to 5.3.1. Cambria Cluster WebUI">‚Äã</a></h4>
<p>Skip if WebUI is disabled in the Helm config or if ingress is used.</p>
<p><strong>Option 1: External URL</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8161&#x27;}{&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://192.122.45.33:8161</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Non-External Access (Port Forwarding)</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterwebuiservice 8161:8161 --address=0.0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Access URL depends on your machine:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://&lt;server&gt;:8161</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Use <code>localhost</code> if browser and terminal are the same machine.</p>
<p>Open the URL in a browser. You may encounter an &quot;Unsafe&quot; warning page:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">![Screenshot](01_filter_icon.png)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3. Click on Advanced and Proceed to [ EXTERNAL IP ] (unsafe). This will show the login page.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">![Screenshot](02_filter_icon.png)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4. Log in using the credentials created in the helm values yaml file (See cambriaClusterWebUIUser)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 5.3.1. Cambria Cluster WebUI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1. Get the WebUI address. A web browser is required to access the WebUI:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Option 1: External Url if External Access is Enabled**</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```bash</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8161&#x27;}{&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://192.122.45.33:8161</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Non-External Url Access</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterwebuiservice 8161:8161 --address=0.0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Access using a web browser:<br>
<code>https://&lt;server&gt;:8161</code> (replace <code>&lt;server&gt;</code> with localhost or the server&#x27;s IP)</p>
<ol start="3">
<li>Click on <strong>Advanced</strong> and <strong>Proceed to [ EXTERNAL IP ] (unsafe)</strong>.</li>
<li>Log in using the credentials from <code>cambriaClusterWebUIUser</code> in the Helm config.</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="532-cambria-cluster-rest-api">5.3.2. Cambria Cluster REST API<a href="#532-cambria-cluster-rest-api" class="hash-link" aria-label="Direct link to 5.3.2. Cambria Cluster REST API" title="Direct link to 5.3.2. Cambria Cluster REST API">‚Äã</a></h2>
<p><strong>Option 1: External Url if External Access is Enabled</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8650&#x27;}{&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Non-External Url Access</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterservice 8650:8650 --address=0.0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Check API:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -k -X GET https://&lt;server&gt;:8650/CambriaFC/v1/SystemInfo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="533-cambria-ingress">5.3.3. Cambria Ingress<a href="#533-cambria-ingress" class="hash-link" aria-label="Direct link to 5.3.3. Cambria Ingress" title="Direct link to 5.3.3. Cambria Ingress">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5331-get-the-ingress-endpoints">5.3.3.1. Get the Ingress Endpoints<a href="#5331-get-the-ingress-endpoints" class="hash-link" aria-label="Direct link to 5.3.3.1. Get the Ingress Endpoints" title="Direct link to 5.3.3.1. Get the Ingress Endpoints">‚Äã</a></h3>
<p><strong>Option 1: Default Testing Ingress</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get ingress -A</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Resolve ELB hostname</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ping a1c1d1a23a121.us-west-2.elb.amazonaws.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Edit <code>/etc/hosts</code>:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 api.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 webui.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 monitoring.myhost.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Publicly Registered Domain (Production)</strong></p>
<p>Example URLs:</p>
<ul>
<li>REST API: <code>https://api.myhost.com</code></li>
<li>WebUI: <code>https://webui.myhost.com</code></li>
<li>Grafana: <code>https://monitoring.myhost.com</code></li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5332-test-ingress-endpoints">5.3.3.2. Test Ingress Endpoints<a href="#5332-test-ingress-endpoints" class="hash-link" aria-label="Direct link to 5.3.3.2. Test Ingress Endpoints" title="Direct link to 5.3.3.2. Test Ingress Endpoints">‚Äã</a></h3>
<p>Example:</p>
<ul>
<li>WebUI: <code>https://webui.myhost.com</code></li>
<li>REST API: <code>https://api.myhost.com/CambriaFC/v1/SystemInfo</code></li>
<li>Grafana: <code>https://monitoring.myhost.com</code></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="534-cambria-license">5.3.4. Cambria License<a href="#534-cambria-license" class="hash-link" aria-label="Direct link to 5.3.4. Cambria License" title="Direct link to 5.3.4. Cambria License">‚Äã</a></h2>
<p><strong>Option 1: External Url if External Access is Enabled</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8481&#x27;}{&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Non-External Url Access</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterwebuiservice 8481:8481 --address=0.0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Access using a browser:<br>
<code>https://&lt;server&gt;:8481</code></p>
<ol start="2">
<li>In a web browser, enter the above url. This should trigger an &quot;Unsafe&quot; page similar to the one below:</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/03_filter_icon-74e5813eade408ffadb6b3408975b2a9.png" width="536" height="404" class="img_ev3q"></p>
<ol start="3">
<li>Click on Advanced and Proceed to [ EXTERNAL IP ] (unsafe). This will show the login page.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/04_filter_icon-74e5813eade408ffadb6b3408975b2a9.png" width="536" height="404" class="img_ev3q"></p>
<ol start="4">
<li>Log in using the credentials created in the Helm values yaml file (See cambriaClusterWebUIUser)</li>
<li>Verify that the License Status is valid for at least either the Primary or Backup. Preferably, both Primary and Backup should be valid. If there are issues with the license, wait a few minutes as sometimes it takes a few minutes to properly update. If still facing issues, contact the Capella support team.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-testing-cambria-ftc--cluster">6. Testing Cambria FTC / Cluster<a href="#6-testing-cambria-ftc--cluster" class="hash-link" aria-label="Direct link to 6. Testing Cambria FTC / Cluster" title="Direct link to 6. Testing Cambria FTC / Cluster">‚Äã</a></h2>
<p>The following guide provides information on how to get started testing the Cambria FTC / Cluster software:<br>
<a href="https://www.dropbox.com/scl/fi/5vra6xff23vvng7aa4qyx/Cambria_Cluster_and_FTC_5_5_0_Kubernetes_User_Guide.pdf?rlkey=j3l9wjjo5ncbub9bh9bizrukr&amp;st=ablrc3pz&amp;dl=1" target="_blank" rel="noopener noreferrer">https://www.dropbox.com/scl/fi/5vra6xff23vvng7aa4qyx/Cambria_Cluster_and_FTC_5_5_0_Kubernetes_User_Guide.pdf?rlkey=j3l9wjjo5ncbub9bh9bizrukr&amp;st=ablrc3pz&amp;dl=1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-updating--upgrading-cambria-cluster--ftc">7. Updating / Upgrading Cambria Cluster / FTC<a href="#7-updating--upgrading-cambria-cluster--ftc" class="hash-link" aria-label="Direct link to 7. Updating / Upgrading Cambria Cluster / FTC" title="Direct link to 7. Updating / Upgrading Cambria Cluster / FTC">‚Äã</a></h2>
<p>There are currently two ways to update / upgrade Cambria FTC / Cluster in the Kubernetes environment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-option-1-normal-upgrade-via-helm-upgrade">7.1. Option 1: Normal Upgrade via Helm Upgrade<a href="#71-option-1-normal-upgrade-via-helm-upgrade" class="hash-link" aria-label="Direct link to 7.1. Option 1: Normal Upgrade via Helm Upgrade" title="Direct link to 7.1. Option 1: Normal Upgrade via Helm Upgrade">‚Äã</a></h3>
<p>This upgrade method is best for when changing version numbers, secrets such as the license key, WebUI users, etc, and Cambria FTC / Cambria Cluster-specific settings such as max number of pods, replicas, etc.</p>
<blockquote>
<p><strong>Warning:</strong></p>
<ul>
<li><code>pgClusterPassword</code> cannot currently be updated via this method</li>
<li>Changing PostgreSQL version also cannot be updated via this method</li>
</ul>
</blockquote>
<ol>
<li>Edit the Helm configuration YAML for your Kubernetes environment or create a new configuration file.</li>
<li>Run the following command:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Restart the deployments:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl rollout restart deployment cambriaclusterapp cambriaclusterwebui -n default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl rollout restart deployment cambriaftcapp -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Wait a few minutes for the Kubernetes pods to install properly.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-option-2-upgrade-via-cambria-cluster-reinstallation">7.2. Option 2: Upgrade via Cambria Cluster Reinstallation<a href="#72-option-2-upgrade-via-cambria-cluster-reinstallation" class="hash-link" aria-label="Direct link to 7.2. Option 2: Upgrade via Cambria Cluster Reinstallation" title="Direct link to 7.2. Option 2: Upgrade via Cambria Cluster Reinstallation">‚Äã</a></h3>
<p>This is the most reliable option and involves uninstalling all Cambria components and reinstalling with a new Helm chart and values YAML file. <strong>Note</strong>: This will delete the database and all jobs in the Cambria Cluster UI.</p>
<ol>
<li>Follow section 4.2 to create/edit the new <code>cambriaClusterConfig.yaml</code>.</li>
<li>Run:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>Then reinstall:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade --install capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-upgrade-verification">7.3. Upgrade Verification<a href="#73-upgrade-verification" class="hash-link" aria-label="Direct link to 7.3. Upgrade Verification" title="Direct link to 7.3. Upgrade Verification">‚Äã</a></h3>
<p>Use the steps in <strong>Section 5: Verify Cambria FTC / Cluster Installation</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-deleting-kubernetes-cluster">8. Deleting Kubernetes Cluster<a href="#8-deleting-kubernetes-cluster" class="hash-link" aria-label="Direct link to 8. Deleting Kubernetes Cluster" title="Direct link to 8. Deleting Kubernetes Cluster">‚Äã</a></h2>
<ol>
<li>
<p>Remove the Helm deployments:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster -n default --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Delete any persistent volumes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pv -o name | awk -F&#x27;/&#x27; &#x27;{print $2}&#x27; | xargs -I{} kubectl patch pv {} -p=&#x27;{&quot;spec&quot;: {&quot;persistentVolumeReclaimPolicy&quot;: &quot;Delete&quot;}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If ingress-nginx was deployed:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete namespace ingress-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Follow delete steps in Section 3.7 if applicable.</p>
</li>
<li>
<p>Set cluster name and region:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export CLUSTER_NAME=cambria-cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export REGION=us-west-2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Delete FTC role policy:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws iam delete-role-policy --role-name=eksctl-ftc-role --policy-name=S3AccessPolicy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If using autoscaler:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws iam delete-role-policy --role-name=eksctl-autoscaler-role --policy-name=FTCAutoscalerPolicy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./deleteConfigRoleForFtcAutoscaler.sh eksctl-autoscaler-cfg-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Delete the cluster:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">eksctl delete cluster --name=$CLUSTER_NAME --region=$REGION --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Confirm via AWS Console: check that the cluster is no longer listed under Elastic Kubernetes Service in the chosen region.</p>
</li>
</ol>
<p>a. Search for Elastic Kubernetes Service in the region that the Kubernetes Cluster is located. Make sure the
deleted cluster does not show up on the list</p>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/05_filter_icon-154420a4fb0a00390f9b69114ba89b57.png" width="901" height="266" class="img_ev3q"></p>
<p>b. Search for CloudFormation in the region that the Kubernetes Cluster is located. Make sure there are no stacks
specific to the Kubernetes Cluster on the list</p>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/06_filter_icon-0d3cba70b4c9317379310ae3244900b4.png" width="920" height="256" class="img_ev3q"></p>
<p>c. Important: Check in EC2 Volumes and Load Balancers to make sure no volumes or load balancers were
leftover from the kubernetes cluster. Most will have the name of the EKS cluster in the resource name</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-quick-reference-installation-testing-and-teardown">9. Quick Reference: Installation, Testing, and Teardown<a href="#9-quick-reference-installation-testing-and-teardown" class="hash-link" aria-label="Direct link to 9. Quick Reference: Installation, Testing, and Teardown" title="Direct link to 9. Quick Reference: Installation, Testing, and Teardown">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="91-installation-deploy-from-linux-to-aws-kubernetes">9.1. Installation (Deploy from Linux to AWS Kubernetes)<a href="#91-installation-deploy-from-linux-to-aws-kubernetes" class="hash-link" aria-label="Direct link to 9.1. Installation (Deploy from Linux to AWS Kubernetes)" title="Direct link to 9.1. Installation (Deploy from Linux to AWS Kubernetes)">‚Äã</a></h3>
<p>Use a Linux deployment machine (preferably an EC2 instance). Certain steps require an IAM Administrator to run the commands as they create specific roles for the deployment process.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="911-prerequisites">9.1.1. Prerequisites<a href="#911-prerequisites" class="hash-link" aria-label="Direct link to 9.1.1. Prerequisites" title="Direct link to 9.1.1. Prerequisites">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt update; sudo apt upgrade; sudo apt install curl unzip; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -o CambriaClusterKubernetesAWS_5_5_0.zip -L &quot;https://www.dropbox.com/scl/fi/4dg2024wbbq0lx1qbnk8e/CambriaClusterKubernetesAWS_5_5_0.zip?rlkey=j0q7xgxv2v60x4bcwfoesd8nv&amp;st=31ajhgif&amp;dl=1&quot;; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">unzip CambriaClusterKubernetesAWS_5_5_0.zip; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x *.sh; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./installKubeTools.sh; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./installKubeToolsAws.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="912-iam-administrator-required-steps">9.1.2. IAM Administrator Required Steps<a href="#912-iam-administrator-required-steps" class="hash-link" aria-label="Direct link to 9.1.2. IAM Administrator Required Steps" title="Direct link to 9.1.2. IAM Administrator Required Steps">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export AWS_ACCOUNT_ID=$(aws sts get-caller-identity --query &quot;Account&quot; --output text); \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./createEksctlCustomAwsPolicies.sh</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">./createEksctlClusterUserRole.sh eksctl-user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="913-installation">9.1.3. Installation<a href="#913-installation" class="hash-link" aria-label="Direct link to 9.1.3. Installation" title="Direct link to 9.1.3. Installation">‚Äã</a></h4>
<p>Make sure that the Linux deployment machine assumes the role created in section 9.1.2.</p>
<ol>
<li>Set the following environment variables:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export CLUSTER_NAME=cambria-cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export REGION=us-west-2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export KUBEVERSION=1.32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export CAMBRIA_CLUSTER_NODE_COUNT=3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export CAMBRIA_CLUSTER_INSTANCE_TYPE=c7i.xlarge</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export EBS_CSI_CONTROLLER_ROLE_NAME=eksctl-ebs-csi-driver-role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export FTC_ROLE_NAME=eksctl-ftc-role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export FTC_ROLE_POLICY_JSON=ftcS3PermissionSample.json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export AUTOSCALER_ROLE_NAME=eksctl-autoscaler-role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">export AUTOSCALER_CONFIG_ROLE_NAME=eksctl-autoscaler-cfg-role</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Configure the Helm values file:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm show values capella-cluster.tgz &gt; cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Run the install script:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./quickInstallCambriaClusterAws.sh; export KUBECONFIG=$CLUSTER_NAME-kubeconfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>
<p>Install the monitoring/logging tools (see section 3.7).</p>
</li>
<li>
<p>Perform installation verification (see section 5).</p>
</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="92-upgrades-and-teardown">9.2. Upgrades and Teardown<a href="#92-upgrades-and-teardown" class="hash-link" aria-label="Direct link to 9.2. Upgrades and Teardown" title="Direct link to 9.2. Upgrades and Teardown">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="921-cambria-ftccluster-andor-kubernetes-cluster-upgrades">9.2.1. Cambria FTC/Cluster and/or Kubernetes Cluster Upgrades<a href="#921-cambria-ftccluster-andor-kubernetes-cluster-upgrades" class="hash-link" aria-label="Direct link to 9.2.1. Cambria FTC/Cluster and/or Kubernetes Cluster Upgrades" title="Direct link to 9.2.1. Cambria FTC/Cluster and/or Kubernetes Cluster Upgrades">‚Äã</a></h4>
<p>Edit the <code>capellaClusterConfig.yaml</code> file and run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./quickUpgradeCambriaCluster.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="922-cambria-ftc--cluster-uninstall">9.2.2. Cambria FTC | Cluster Uninstall<a href="#922-cambria-ftc--cluster-uninstall" class="hash-link" aria-label="Direct link to 9.2.2. Cambria FTC | Cluster Uninstall" title="Direct link to 9.2.2. Cambria FTC | Cluster Uninstall">‚Äã</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="923-kubernetes-cluster-teardown">9.2.3. Kubernetes Cluster Teardown<a href="#923-kubernetes-cluster-teardown" class="hash-link" aria-label="Direct link to 9.2.3. Kubernetes Cluster Teardown" title="Direct link to 9.2.3. Kubernetes Cluster Teardown">‚Äã</a></h4>
<p>See section 8 for full teardown instructions.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-quick-reference-helpful-commandsinfo-for-after-installation">10. Quick Reference: Helpful Commands/Info for After Installation<a href="#10-quick-reference-helpful-commandsinfo-for-after-installation" class="hash-link" aria-label="Direct link to 10. Quick Reference: Helpful Commands/Info for After Installation" title="Direct link to 10. Quick Reference: Helpful Commands/Info for After Installation">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-kubernetes-kubeconfig-file">AWS Kubernetes Kubeconfig File<a href="#aws-kubernetes-kubeconfig-file" class="hash-link" aria-label="Direct link to AWS Kubernetes Kubeconfig File" title="Direct link to AWS Kubernetes Kubeconfig File">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws eks update-kubeconfig --name=CapellaEKS --region=us-west-2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-webui">Cambria Cluster WebUI<a href="#cambria-cluster-webui" class="hash-link" aria-label="Direct link to Cambria Cluster WebUI" title="Direct link to Cambria Cluster WebUI">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get service/cambriaclusterwebuiservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8161&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Login credentials are defined in the Helm values YAML file (see section 3.3).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-rest-api">Cambria Cluster REST API<a href="#cambria-cluster-rest-api" class="hash-link" aria-label="Direct link to Cambria Cluster REST API" title="Direct link to Cambria Cluster REST API">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get service/cambriaclusterservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8650&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example REST URL:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://&lt;hostname&gt;:8650/CambriaFC/v1/Jobs?usertoken=&lt;token&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="leader-cambria-cluster-pod">Leader Cambria Cluster Pod<a href="#leader-cambria-cluster-pod" class="hash-link" aria-label="Direct link to Leader Cambria Cluster Pod" title="Direct link to Leader Cambria Cluster Pod">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get lease -o=jsonpath=&quot;{.items[0].spec.holderIdentity}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-ftc-instance-external-ip">Cambria FTC Instance External IP<a href="#cambria-ftc-instance-external-ip" class="hash-link" aria-label="Direct link to Cambria FTC Instance External IP" title="Direct link to Cambria FTC Instance External IP">‚Äã</a></h3>
<ol>
<li>In the WebUI, go to the <strong>Machines</strong> tab and get the pod name.</li>
<li>Run:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get node/$(kubectl get pod/&lt;pod-name&gt; -n capella-worker -o=jsonpath={.spec.nodeName}) -o=jsonpath=&quot;{.status.addresses[1].address}{&#x27;\n&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="remote-access-to-kubernetes-pod">Remote Access to Kubernetes Pod<a href="#remote-access-to-kubernetes-pod" class="hash-link" aria-label="Direct link to Remote Access to Kubernetes Pod" title="Direct link to Remote Access to Kubernetes Pod">‚Äã</a></h2>
<p>The general command for remote accessing a pod is:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl exec -it &lt;pod-name&gt; -n &lt;namespace&gt; -- /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Example with Cambria FTC:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl exec -it cambriaftcapp-5c79586784-wbfvf -n capella-worker -- /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="extracting-cambria-logs">Extracting Cambria Logs<a href="#extracting-cambria-logs" class="hash-link" aria-label="Direct link to Extracting Cambria Logs" title="Direct link to Extracting Cambria Logs">‚Äã</a></h2>
<p>In a machine that has kubectl and the kubeconfig file for your Kubernetes cluster, open a terminal window and
make sure to set the KUBECONFIG environment variable to the path of your kubeconfig file. Then run one or
more of the following commands depending on what types of logs you need (or that Capella needs). You will get
a folder full of logs. Compress these logs into one zip file and send it to Capella:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cambria FTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;pod-name&gt;:/opt/capella/Cambria/Logs ./CambriaFTCLogs -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cambria Cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;pod-name&gt;:/opt/capella/CambriaCluster/Logs ./CambriaClusterLogs -n default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cambria License Manager (FTC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;pod-name&gt;:/opt/capella/CambriaLicenseManager/Logs ./CambriaFTCLicLogs -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cambria License Manager (Cluster)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;pod-name&gt;:/opt/capella/CambriaLicenseManager/Logs ./CambriaClusterLicLogs -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="copy-files-to-cambria-pods">Copy Files to Cambria Pods<a href="#copy-files-to-cambria-pods" class="hash-link" aria-label="Direct link to Copy Files to Cambria Pods" title="Direct link to Copy Files to Cambria Pods">‚Äã</a></h2>
<p>In some cases, you might need to copy files to a Cambria FTC / Cluster pod. For example, you have an MP4 file
you want to use as a source directly from the encoding machine‚Äôs file system. In this case, to copy the file over
to the Cambria FTC / Cluster pod, do the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy a file to Cambria FTC pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp /mnt/n/MySource.mp4 cambriaftcapp-7c55887db9-t42v7:/var/media/MySource.mp4 -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy a file to Cambria Cluster pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp C:\MyKeys\MyKeyFile.key cambriaclusterapp-695dcc848f-vjpc7:/var/keys/MyKeyFile.key -n default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy a directory to Cambria FTC pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp /mnt/n/MyMediaFiles cambriaftcapp-7c55887db9-t42v7:/var/temp/mediafiles -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="restarting-pods">Restarting Pods<a href="#restarting-pods" class="hash-link" aria-label="Direct link to Restarting Pods" title="Direct link to Restarting Pods">‚Äã</a></h2>
<p>Kubectl does not currently have a way to restart pods. Instead, a pod will need to be ‚Äúrestarted‚Äù by deleting the pod
which causes a new pod to be created / existing pod to take over the containers.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Delete Cambria FTC pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod cambriaftcapp-7c55887db9-t42v7 -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Delete Cambria Cluster pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod cambriaclusterapp-695dcc848f-vjpc7 -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="find-the-arn-of-a-role">Find the ARN of a Role<a href="#find-the-arn-of-a-role" class="hash-link" aria-label="Direct link to Find the ARN of a Role" title="Direct link to Find the ARN of a Role">‚Äã</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">aws iam get-role --role-name=eksctl-autoscaler-role-$CLUSTER_NAME --query &quot;Role.Arn&quot; --output text</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-glossary">11. Glossary<a href="#11-glossary" class="hash-link" aria-label="Direct link to 11. Glossary" title="Direct link to 11. Glossary">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="111-kubernetes">11.1 Kubernetes<a href="#111-kubernetes" class="hash-link" aria-label="Direct link to 11.1 Kubernetes" title="Direct link to 11.1 Kubernetes">‚Äã</a></h3>
<p><a href="https://kubernetes.io/docs/reference/glossary/?fundamental=true" target="_blank" rel="noopener noreferrer">Kubernetes Glossary</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="112-third-party-tools">11.2 Third-Party Tools<a href="#112-third-party-tools" class="hash-link" aria-label="Direct link to 11.2 Third-Party Tools" title="Direct link to 11.2 Third-Party Tools">‚Äã</a></h3>
<ul>
<li><strong>Argo:</strong> Orchestrates parallel jobs in Kubernetes.</li>
<li><strong>Argo-Events:</strong> Triggers K8s functions based on external events.</li>
<li><strong>Cert-Manager:</strong> Manages TLS certificate automation.</li>
<li><strong>Helm:</strong> Tool for managing K8s apps.</li>
<li><strong>Ingress-Nginx:</strong> Reverse proxy/load balancer for ingress.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="113-capella-applications">11.3 Capella Applications<a href="#113-capella-applications" class="hash-link" aria-label="Direct link to 11.3 Capella Applications" title="Direct link to 11.3 Capella Applications">‚Äã</a></h3>
<ul>
<li><strong>cambriaclusterapp:</strong> Core Cambria Cluster container.</li>
<li><strong>cambriaftautoscale:</strong> Spawns new FTC nodes.</li>
<li><strong>cambriaftcapp:</strong> Main FTC container.</li>
<li><strong>cambriaftcconnect:</strong> Auto-connects FTC instances to Cluster.</li>
<li><strong>cambrialeaderelector:</strong> Elects primary Cluster instance.</li>
<li><strong>pgcluster-capella:</strong> PostgreSQL backend for Cambria Cluster.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-ftc-autoscaler">Troubleshooting FTC Autoscaler<a href="#troubleshooting-ftc-autoscaler" class="hash-link" aria-label="Direct link to Troubleshooting FTC Autoscaler" title="Direct link to Troubleshooting FTC Autoscaler">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="no-instances-are-being-deployed">No Instances Are Being Deployed<a href="#no-instances-are-being-deployed" class="hash-link" aria-label="Direct link to No Instances Are Being Deployed" title="Direct link to No Instances Are Being Deployed">‚Äã</a></h3>
<ol>
<li>In the Linux deployment machine, run this command to get the logs of the FTC autoscaler:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl logs -c cambriaftcautoscale -n default $(kubectl get lease -o=jsonpath=&quot;{.items[0].spec.holderIdentity}&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Check for any errors. Here are a few that have been found in the past:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[AWS] NodePoolCreate exception: One or more errors occurred. (No cluster found for name: xyz.)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Edit the Helm values (<code>cambriaClusterConfig.yaml</code>) and verify that <code>cpClusterName</code> in<br>
<code>ftcAutoScalerExtraConfig</code> is set to the correct kubernetes cluster name. If not, change the name in the<br>
<!-- -->Helm values file and run the steps in <strong>7. Updating / Upgrading Cambria Cluster / FTC</strong>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[AWS] NodePoolCreate exception: One or more errors occurred. (Cross-account pass role is not allowed.)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This error can happen for many reasons but usually it means the IAM roles were not set up correctly or<br>
<!-- -->they were not configured correctly in the Helm values file. First, check the Helm values file and make<br>
<!-- -->sure all IAM roles specified are correct (See <strong>4.2. Creating and Editing Helm Configuration File</strong>).<br>
<!-- -->Otherwise, destroy the kubernetes cluster and re-create it.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[AWS] NodePoolCreate exception: One or more errors occurred. (User:  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">arn:aws:sts::12341234:assumed-role/eksctl-XYZ/i-12341234  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">is not authorized to perform: ABC on resource: arn:aws::xyzabc1234)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Similar to the previous error. Verify that the correct roles were set in the Helm values file. Otherwise,<br>
<!-- -->destroy the kubernetes cluster and re-create it.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform_Kubernetes/cambria-cluster-ftc-terraform"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cambria Cluster / FTC 5.5.0 - Terraform on Akamai Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#document-history" class="table-of-contents__link toc-highlight">Document History</a><ul><li><a href="#limitations-and-security-information" class="table-of-contents__link toc-highlight">Limitations and Security Information</a></li></ul></li><li><a href="#Ô∏è-important-before-you-begin" class="table-of-contents__link toc-highlight">‚ö†Ô∏è Important: Before You Begin</a></li><li><a href="#Ô∏è-critical-information-read-before-proceeding-with-installation" class="table-of-contents__link toc-highlight">‚ö†Ô∏è Critical Information: Read Before Proceeding with Installation</a></li><li><a href="#document-overview" class="table-of-contents__link toc-highlight">Document Overview</a><ul><li><a href="#document-structure" class="table-of-contents__link toc-highlight">Document Structure</a></li></ul></li><li><a href="#1-overview" class="table-of-contents__link toc-highlight">1. Overview</a><ul><li><a href="#11-cambria-cluster--ftc-kubernetes-deployment" class="table-of-contents__link toc-highlight">1.1 Cambria Cluster / FTC Kubernetes Deployment</a></li><li><a href="#cambria-cluster" class="table-of-contents__link toc-highlight">Cambria Cluster</a></li><li><a href="#cambria-ftc" class="table-of-contents__link toc-highlight">Cambria FTC</a></li><li><a href="#deployment-note" class="table-of-contents__link toc-highlight">Deployment Note</a></li><li><a href="#12-resource-usage" class="table-of-contents__link toc-highlight">1.2 Resource Usage</a></li><li><a href="#13-aws-machine-information-and-benchmark" class="table-of-contents__link toc-highlight">1.3 AWS Machine Information and Benchmark</a></li><li><a href="#14-cambria-application-access" class="table-of-contents__link toc-highlight">1.4 Cambria Application Access</a></li><li><a href="#15-firewall-information" class="table-of-contents__link toc-highlight">1.5 Firewall Information</a></li><li><a href="#2-prerequisites" class="table-of-contents__link toc-highlight">2. Prerequisites</a></li><li><a href="#3-create-kubernetes-cluster" class="table-of-contents__link toc-highlight">3. Create Kubernetes Cluster</a></li><li><a href="#33-aws-iam-permissions-for-ftc" class="table-of-contents__link toc-highlight">3.3 AWS IAM Permissions for FTC</a></li><li><a href="#331-create-ftc-iam-role" class="table-of-contents__link toc-highlight">3.3.1 Create FTC IAM Role</a></li><li><a href="#332-create-ftc-autoscaler-roles" class="table-of-contents__link toc-highlight">3.3.2 Create FTC Autoscaler Roles</a></li><li><a href="#34-optional-restricting-cambria-ftc-encoder-designated-nodes-via-exclusion-label" class="table-of-contents__link toc-highlight">3.4 (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label</a></li><li><a href="#35-create-cambria-ftc-node-groups" class="table-of-contents__link toc-highlight">3.5 Create Cambria FTC Node Group(s)</a></li><li><a href="#36-gpu-operator-for-nvenc" class="table-of-contents__link toc-highlight">3.6 GPU Operator for NVENC</a></li><li><a href="#37-performance-metrics-and-logging" class="table-of-contents__link toc-highlight">3.7 Performance Metrics and Logging</a></li></ul></li><li><a href="#4-install-cambria-cluster-ftc-and-dependencies" class="table-of-contents__link toc-highlight">4. Install Cambria Cluster, FTC, and Dependencies</a><ul><li><a href="#41-prerequisite-deploy-external-kubernetes-tools" class="table-of-contents__link toc-highlight">4.1 Prerequisite: Deploy External Kubernetes Tools</a></li><li><a href="#42-creating-and-editing-helm-configuration-file" class="table-of-contents__link toc-highlight">4.2 Creating and Editing Helm Configuration File</a></li></ul></li><li><a href="#5-verify-cambria-ftc--cluster-installation" class="table-of-contents__link toc-highlight">5. Verify Cambria FTC / Cluster Installation</a><ul><li><a href="#51-verify-cambria-cluster-deployment" class="table-of-contents__link toc-highlight">5.1. Verify Cambria Cluster Deployment</a></li><li><a href="#52-verify-cambria-ftc-deployment" class="table-of-contents__link toc-highlight">5.2. Verify Cambria FTC Deployment</a></li><li><a href="#53-verify-applications-are-accessible" class="table-of-contents__link toc-highlight">5.3. Verify Applications are Accessible</a></li></ul></li><li><a href="#532-cambria-cluster-rest-api" class="table-of-contents__link toc-highlight">5.3.2. Cambria Cluster REST API</a></li><li><a href="#533-cambria-ingress" class="table-of-contents__link toc-highlight">5.3.3. Cambria Ingress</a><ul><li><a href="#5331-get-the-ingress-endpoints" class="table-of-contents__link toc-highlight">5.3.3.1. Get the Ingress Endpoints</a></li><li><a href="#5332-test-ingress-endpoints" class="table-of-contents__link toc-highlight">5.3.3.2. Test Ingress Endpoints</a></li></ul></li><li><a href="#534-cambria-license" class="table-of-contents__link toc-highlight">5.3.4. Cambria License</a></li><li><a href="#6-testing-cambria-ftc--cluster" class="table-of-contents__link toc-highlight">6. Testing Cambria FTC / Cluster</a></li><li><a href="#7-updating--upgrading-cambria-cluster--ftc" class="table-of-contents__link toc-highlight">7. Updating / Upgrading Cambria Cluster / FTC</a><ul><li><a href="#71-option-1-normal-upgrade-via-helm-upgrade" class="table-of-contents__link toc-highlight">7.1. Option 1: Normal Upgrade via Helm Upgrade</a></li><li><a href="#72-option-2-upgrade-via-cambria-cluster-reinstallation" class="table-of-contents__link toc-highlight">7.2. Option 2: Upgrade via Cambria Cluster Reinstallation</a></li><li><a href="#73-upgrade-verification" class="table-of-contents__link toc-highlight">7.3. Upgrade Verification</a></li></ul></li><li><a href="#8-deleting-kubernetes-cluster" class="table-of-contents__link toc-highlight">8. Deleting Kubernetes Cluster</a></li><li><a href="#9-quick-reference-installation-testing-and-teardown" class="table-of-contents__link toc-highlight">9. Quick Reference: Installation, Testing, and Teardown</a><ul><li><a href="#91-installation-deploy-from-linux-to-aws-kubernetes" class="table-of-contents__link toc-highlight">9.1. Installation (Deploy from Linux to AWS Kubernetes)</a></li><li><a href="#92-upgrades-and-teardown" class="table-of-contents__link toc-highlight">9.2. Upgrades and Teardown</a></li></ul></li><li><a href="#10-quick-reference-helpful-commandsinfo-for-after-installation" class="table-of-contents__link toc-highlight">10. Quick Reference: Helpful Commands/Info for After Installation</a><ul><li><a href="#aws-kubernetes-kubeconfig-file" class="table-of-contents__link toc-highlight">AWS Kubernetes Kubeconfig File</a></li><li><a href="#cambria-cluster-webui" class="table-of-contents__link toc-highlight">Cambria Cluster WebUI</a></li><li><a href="#cambria-cluster-rest-api" class="table-of-contents__link toc-highlight">Cambria Cluster REST API</a></li><li><a href="#leader-cambria-cluster-pod" class="table-of-contents__link toc-highlight">Leader Cambria Cluster Pod</a></li><li><a href="#cambria-ftc-instance-external-ip" class="table-of-contents__link toc-highlight">Cambria FTC Instance External IP</a></li></ul></li><li><a href="#remote-access-to-kubernetes-pod" class="table-of-contents__link toc-highlight">Remote Access to Kubernetes Pod</a></li><li><a href="#extracting-cambria-logs" class="table-of-contents__link toc-highlight">Extracting Cambria Logs</a></li><li><a href="#copy-files-to-cambria-pods" class="table-of-contents__link toc-highlight">Copy Files to Cambria Pods</a></li><li><a href="#restarting-pods" class="table-of-contents__link toc-highlight">Restarting Pods</a></li><li><a href="#find-the-arn-of-a-role" class="table-of-contents__link toc-highlight">Find the ARN of a Role</a></li><li><a href="#11-glossary" class="table-of-contents__link toc-highlight">11. Glossary</a><ul><li><a href="#111-kubernetes" class="table-of-contents__link toc-highlight">11.1 Kubernetes</a></li><li><a href="#112-third-party-tools" class="table-of-contents__link toc-highlight">11.2 Third-Party Tools</a></li><li><a href="#113-capella-applications" class="table-of-contents__link toc-highlight">11.3 Capella Applications</a></li></ul></li><li><a href="#troubleshooting-ftc-autoscaler" class="table-of-contents__link toc-highlight">Troubleshooting FTC Autoscaler</a><ul><li><a href="#no-instances-are-being-deployed" class="table-of-contents__link toc-highlight">No Instances Are Being Deployed</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/about-capella" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/newsfeed" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsfeed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria%20Stream/Installation%20Guides/Kubernetes/AWS/placeholder" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria Stream<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria%20FTC/Installation%20Guides/Kubernetes/AWS/Akamai_Linode_Kubernetes_CambriaClusterFTC_Installation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria FTC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Other</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/terms-of-use" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/online-privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2025 Capella Systems</div></div></div></footer></div>
</body>
</html>