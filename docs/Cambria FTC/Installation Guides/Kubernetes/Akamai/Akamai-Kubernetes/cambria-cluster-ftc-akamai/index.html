<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/cambria-cluster-ftc-akamai" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Cambria Cluster / FTC 5.5.0 - Akamai Kubernetes | Capella Documents</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documents.capellasystems.net/img/capellalogo.png"><meta data-rh="true" name="twitter:image" content="https://documents.capellasystems.net/img/capellalogo.png"><meta data-rh="true" property="og:url" content="https://documents.capellasystems.net/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/cambria-cluster-ftc-akamai"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Cambria Cluster / FTC 5.5.0 - Akamai Kubernetes | Capella Documents"><meta data-rh="true" name="description" content="Document History"><meta data-rh="true" property="og:description" content="Document History"><link data-rh="true" rel="icon" href="/img/capellalogo.png"><link data-rh="true" rel="canonical" href="https://documents.capellasystems.net/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/cambria-cluster-ftc-akamai"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/cambria-cluster-ftc-akamai" hreflang="en"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/cambria-cluster-ftc-akamai" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://XGNQSHZSNS-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Capella Documents RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Capella Documents Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Capella Documents" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.e348f251.css">
<script src="/assets/js/runtime~main.5f128d9b.js" defer="defer"></script>
<script src="/assets/js/main.d29e579a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/capellalogo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/capellalogo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/capellalogo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Capella Documentation</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">Cambria FTC</a><a class="navbar__item navbar__link" href="/docs/Cambria Stream/Installation Guides/Kubernetes/AWS/cambria_stream_aws_kubernetes/">Cambria Stream</a><a href="https://www.capellasystems.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Capella Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">Installation Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">Kubernetes</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/">AWS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform_Kubernetes/cambria-cluster-ftc-terraform">Akamai</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform_Kubernetes/cambria-cluster-ftc-terraform">Cambria Cluster / FTC 5.5.0 - Terraform on Akamai Kubernetes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Kubernetes/cambria-cluster-ftc-akamai">Cambria Cluster / FTC 5.5.0 - Akamai Kubernetes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Oracle/">Oracle</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/Cambria FTC/Installation Guides/Windows/placeholder">Windows</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/Release Notes/FTC v5.5 to v4.0">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/API/placeholder">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/Tutorials/aws_ami_creation_editing/">Tutorials<button style="margin-left:5px;cursor:pointer;margin-bottom:-2px;z-index:1000;background:transparent;padding:0;display:inline-flex;align-items:center;justify-content:center;border:none;color:var(--ifm-color-primary)" title="Sort A-Z"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-az lucide-arrow-down-a-z tutorial-sort-icon" aria-hidden="true"><path d="m3 16 4 4 4-4"></path><path d="M7 20V4"></path><path d="M20 8h-5"></path><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"></path><path d="M15 14h5l-5 6h5"></path></svg></button></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/FAQ/placeholder">FAQ</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation Guides</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Kubernetes</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Akamai</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Cambria Cluster / FTC 5.5.0 - Akamai Kubernetes</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Cambria Cluster / FTC 5.5.0 - Akamai Kubernetes</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-history">Document History<a href="#document-history" class="hash-link" aria-label="Direct link to Document History" title="Direct link to Document History">​</a></h2>
<table><thead><tr><th>Version</th><th>Date</th><th>Description</th></tr></thead><tbody><tr><td>5.4.0</td><td>10/03/2024</td><td>Updated for release 5.4.0.21627 (Linux)</td></tr><tr><td>5.5.0</td><td>04/11/2025</td><td>Updated for release 5.5.0.23529 (Linux)</td></tr></tbody></table>
<blockquote>
<p><strong>Download the online version of this document for the latest information and latest files. Always download the latest files.</strong></p>
</blockquote>
<p>Do not move forward with the installation process if you do not agree with the End User License Agreement (EULA) for our products.<br>
<!-- -->You can download and read the EULA for Cambria FTC, Cambria Cluster, and Cambria License Manager from the links below:</p>
<ul>
<li><a href="https://www.dropbox.com/s/1wg7ee7a59kzi8h/EULA_Cambria_License_Manager.pdf?dl=0" target="_blank" rel="noopener noreferrer">Cambria License Manager EULA</a></li>
<li><a href="https://www.dropbox.com/s/oemlax63aatjjiw/EULA_Cluster.pdf?dl=0" target="_blank" rel="noopener noreferrer">Cambria Cluster EULA</a></li>
<li><a href="https://www.dropbox.com/s/ualv9usxsowh6m2/EULA_FTC.pdf?dl=0" target="_blank" rel="noopener noreferrer">Cambria FTC EULA</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="limitations-and-security-information">Limitations and Security Information<a href="#limitations-and-security-information" class="hash-link" aria-label="Direct link to Limitations and Security Information" title="Direct link to Limitations and Security Information">​</a></h3>
<p>Cambria FTC, Cluster, and License Manager are installed on Linux Docker containers. Limitations and security checks done for this version are included in our general Linux Documents below:</p>
<ul>
<li><a href="https://www.dropbox.com/scl/fi/0rvskhpqtla6dffhbfli5/Linux_Cambria_Cluster_and_FTC_5_5_0_Guide.pdf?rlkey=ngryjzox121ow5fgbc4y8n2yd" target="_blank" rel="noopener noreferrer">Linux Cambria Cluster and FTC 5.5.0 Guide</a></li>
</ul>
<blockquote>
<p><strong>Note:</strong> These documents are for informational use only. The setup for Kubernetes starts in section 3. Create Kubernetes Cluster.<br>
<!-- -->This document references Kubernetes version 1.32.1 only.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-important-before-you-begin">⚠️ Important: Before You Begin<a href="#️-important-before-you-begin" class="hash-link" aria-label="Direct link to ⚠️ Important: Before You Begin" title="Direct link to ⚠️ Important: Before You Begin">​</a></h2>
<p>PDF documents have a copy/paste issue. For best results, download this document and any referenced PDF documents in this guide and open them in a PDF viewer such as Adobe Acrobat.</p>
<p>For commands that are in more than one line, copy each line one by one and check that the copied command matches the one in the document.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-critical-information-read-before-proceeding-with-installation">⚠️ Critical Information: Read Before Proceeding with Installation<a href="#️-critical-information-read-before-proceeding-with-installation" class="hash-link" aria-label="Direct link to ⚠️ Critical Information: Read Before Proceeding with Installation" title="Direct link to ⚠️ Critical Information: Read Before Proceeding with Installation">​</a></h2>
<p>Before starting the installation, carefully review the following considerations. Skipping this section may result in errors, failed deployments, or misconfigurations.</p>
<ol>
<li>
<p><strong>A New Kubernetes Cluster Will Be Deployed</strong><br>
<!-- -->● The installation process creates a brand-new Kubernetes cluster to keep the Cambria ecosystem isolated from other applications.</p>
</li>
<li>
<p><strong>Default Installation is Non-Secure</strong><br>
<!-- -->● The guide covers installation with default settings in an open environment (not secure).<br>
<!-- -->● If you require a secure or customized setup, you will need Akamai Cloud expertise, which is not covered in this guide.<br>
<!-- -->● Firewall information is provided in section 1.5. Firewall Information</p>
</li>
<li>
<p><strong>Understand Your Transcoding Requirements</strong><br>
<!-- -->● Know your expected transcoding volume, input/output specs, and whether a GPU is needed.<br>
<!-- -->● Refer to section 1.3. Akamai Cloud Machine Information and Benchmark for guidelines on machine requirements.</p>
</li>
<li>
<p><strong>Administrative Rights Required</strong><br>
<!-- -->● Many of the steps in this guide require administrative rights to Akamai Cloud for adding permissions and performing other administrative functions of that sort.</p>
</li>
<li>
<p><strong>Check Akamai Cloud Account Quota</strong><br>
<!-- -->● Ensure the Akamai Cloud account has sufficient quota to deploy Kubernetes resources.<br>
<!-- -->● See section 1.2. Resource Usage for estimated resource requirements.</p>
</li>
<li>
<p><strong>A Separate Linux Machine is Required</strong><br>
<!-- -->● A dedicated Linux machine (preferably Ubuntu) is needed to deploy Kubernetes.<br>
<!-- -->● Keeping Kubernetes tools and configuration files on a dedicated system is strongly recommended.</p>
</li>
<li>
<p><strong>Verify Region-Specific Resource Availability</strong><br>
<!-- -->● Not all Akamai Cloud regions support the same resources (e.g., GPU availability varies by region).<br>
<!-- -->● Consult Akamai Cloud documentation to confirm available resources in your desired region.</p>
</li>
</ol>
<h1>Document Overview</h1>
<p>The purpose of this document is to provide a walkthrough of the installation and initial testing process of the Cambria Cluster and Cambria FTC applications in the Kubernetes environment. The basic view of the document is the following:</p>
<ol>
<li>Overview of the Cambria Cluster / FTC Environment in a Kubernetes Environment</li>
<li>Preparation for the installation (Prerequisites)</li>
<li>Create and configure the Kubernetes Cluster</li>
<li>Install Cambria Cluster and Cambria FTC on the Kubernetes Cluster</li>
<li>Verify the installation is working properly</li>
<li>Test the Cambria Cluster / FTC applications</li>
<li>Update the Cambria Cluster / FTC applications on Kubernetes Cluster</li>
<li>Delete a Kubernetes Cluster</li>
<li>Quick Reference of Kubernetes Installation</li>
<li>Quick Reference of Important Kubernetes Components (urls, template projects, test player, etc)</li>
<li>Glossary of important terms</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-overview">1. Overview<a href="#1-overview" class="hash-link" aria-label="Direct link to 1. Overview" title="Direct link to 1. Overview">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-cambria-cluster--ftc-kubernetes-deployment">1.1. Cambria Cluster / FTC Kubernetes Deployment<a href="#11-cambria-cluster--ftc-kubernetes-deployment" class="hash-link" aria-label="Direct link to 1.1. Cambria Cluster / FTC Kubernetes Deployment" title="Direct link to 1.1. Cambria Cluster / FTC Kubernetes Deployment">​</a></h3>
<p>There are two major applications involved in this Kubernetes installation: Cambria Cluster and Cambria FTC.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster">Cambria Cluster:<a href="#cambria-cluster" class="hash-link" aria-label="Direct link to Cambria Cluster:" title="Direct link to Cambria Cluster:">​</a></h4>
<p>This deployment is recommended to run on at least 3 nodes (replica = 3) with a service (Load Balancer) that exposes the application externally. For each of these nodes, Cambria Cluster will be installed on its own pod and designated to its own node. One node acts as the leader and the other two are replicas for the purpose of replacing the leader in the case it becomes inactive, corrupted, etc. Each Cambria Cluster pod has three containers:</p>
<ol>
<li>Cambria Cluster (application)</li>
<li>Leader Elector tool that chooses which of the Cambria Cluster node/pod will be the leader</li>
<li>Cambria FTC Autoscaler tool that, when enabled, automatically deploys worker nodes for encoding purposes based on the number of encoding jobs queued to the system:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Number of Nodes to Deploy = (Number of Queued Jobs + 2) / 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>Each Cluster deployment has a corresponding PostgreSQL database installed on a separate pod. The data is replicated across the database pods to preserve state.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-ftc">Cambria FTC:<a href="#cambria-ftc" class="hash-link" aria-label="Direct link to Cambria FTC:" title="Direct link to Cambria FTC:">​</a></h4>
<p>Capella’s Cambria FTC deployment consists of one or more nodes that are (by default) of different instance types than the Cambria Cluster nodes. These focus specifically on running encoding tasks. Each Cambria FTC pod has three containers:</p>
<ol>
<li>Cambria FTC (application)</li>
<li>Auto-Connect FTC dotnet tool:<!-- -->
<ul>
<li>Lists pods</li>
<li>Attempts to find Cambria Cluster</li>
<li>Connects the Cambria FTC application to the Cambria Cluster</li>
<li>Deletes its own node pool if no Cambria Cluster is found (~20 min timeout)</li>
</ul>
</li>
<li>Pgcluster database: Stores encoding job content and runtime data</li>
</ol>
<p>Each node in the Kubernetes Cluster is assigned either a Cluster or FTC role.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-resource-usage">1.2. Resource Usage<a href="#12-resource-usage" class="hash-link" aria-label="Direct link to 1.2. Resource Usage" title="Direct link to 1.2. Resource Usage">​</a></h3>
<p>Resources used and their quantities vary by requirement and environment. Below is a general overview (refer to Akamai Cloud documentation for full details):</p>
<ul>
<li><strong>NodeBalancers</strong>: 0-3 (Manager WebUI, Manager Web Server, Grafana); 0-1 (Ingress)</li>
<li><strong>Nodes</strong>:<!-- -->
<ul>
<li>X Cambria Manager Instances (default: 3)</li>
<li>Y Cambria FTC Instances (default: 20; based on config)</li>
</ul>
</li>
<li><strong>Networking</strong>: No VPCs are created</li>
<li><strong>Security</strong>: By default, no firewalls are created. However, Firewalls can be applied to the LKE cluster nodes for stricter security</li>
</ul>
<h1>1.3. Akamai Cloud Machine Information and Benchmark</h1>
<p>The following is a benchmark of two Akamai Cloud machines. The information below is as of September 2024.<br>
<!-- -->Note that the benchmark involves read from / write to Akamai ObjectStorage which influences the real-time speed of transcoding jobs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-job-information">Benchmark Job Information<a href="#benchmark-job-information" class="hash-link" aria-label="Direct link to Benchmark Job Information" title="Direct link to Benchmark Job Information">​</a></h2>
<table><thead><tr><th>Type</th><th>Codec</th><th>Frame Rate</th><th>Resolution</th><th>Bitrate</th></tr></thead><tbody><tr><td>Source</td><td>TS H.264</td><td>30</td><td>1920 x 1080</td><td>8 Mbps</td></tr><tr><td>Output</td><td>HLS/TS H.264</td><td>29.97</td><td>1920 x 1080, 1280 x 720, 640 x 480, 320 x 240</td><td>4 Mbps, 2.4 Mbps, 0.8 Mbps, 0.3 Mbps</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-g6-dedicated-16--amd-epyc-7713-">a. g6-dedicated-16 [ AMD EPYC 7713 ]<a href="#a-g6-dedicated-16--amd-epyc-7713-" class="hash-link" aria-label="Direct link to a. g6-dedicated-16 [ AMD EPYC 7713 ]" title="Direct link to a. g6-dedicated-16 [ AMD EPYC 7713 ]">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="machine-info">Machine Info<a href="#machine-info" class="hash-link" aria-label="Direct link to Machine Info" title="Direct link to Machine Info">​</a></h3>
<table><thead><tr><th>Name</th><th>RAM</th><th>CPUs</th><th>Storage</th><th>Transfer</th><th>Network In/Out</th><th>Cost per Hour</th></tr></thead><tbody><tr><td>Dedicated 32 GB</td><td>32 GB</td><td>16</td><td>640 GB</td><td>7 TB</td><td>40 Gbps / 7 Gbps</td><td>$0.432 (As of 05/28/2024)</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-results">Benchmark Results<a href="#benchmark-results" class="hash-link" aria-label="Direct link to Benchmark Results" title="Direct link to Benchmark Results">​</a></h3>
<ul>
<li><strong># of Concurrent Jobs</strong>: 2</li>
<li><strong>Real Time Speed per Job</strong>: 0.43x RT (slower than real-time)</li>
<li><strong>Total Throughput</strong>: 0.86x RT (1 minute of source takes ~1m10s to transcode)</li>
<li><strong>CPU Usage</strong>: 100%</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="b-g6-dedicated-64--amd-epyc-7713-">b. g6-dedicated-64 [ AMD EPYC 7713 ]<a href="#b-g6-dedicated-64--amd-epyc-7713-" class="hash-link" aria-label="Direct link to b. g6-dedicated-64 [ AMD EPYC 7713 ]" title="Direct link to b. g6-dedicated-64 [ AMD EPYC 7713 ]">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="machine-info-1">Machine Info<a href="#machine-info-1" class="hash-link" aria-label="Direct link to Machine Info" title="Direct link to Machine Info">​</a></h3>
<table><thead><tr><th>Name</th><th>RAM</th><th>CPUs</th><th>Storage</th><th>Transfer</th><th>Network In/Out</th><th>Cost per Hour</th></tr></thead><tbody><tr><td>Dedicated 512 GB</td><td>512 GB</td><td>64</td><td>7200 GB</td><td>12 TB</td><td>40 Gbps / 12 Gbps</td><td>$6.912 (As of 05/28/2024)</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-results-1">Benchmark Results<a href="#benchmark-results-1" class="hash-link" aria-label="Direct link to Benchmark Results" title="Direct link to Benchmark Results">​</a></h3>
<ul>
<li><strong># of Concurrent Jobs</strong>: 2</li>
<li><strong>Real Time Speed per Job</strong>: 1.45x RT (faster than real-time)</li>
<li><strong>Total Throughput</strong>: 2.90x RT (1 minute of source takes ~14 seconds to transcode)</li>
<li><strong>CPU Usage</strong>: ~80%</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmark-findings">Benchmark Findings<a href="#benchmark-findings" class="hash-link" aria-label="Direct link to Benchmark Findings" title="Direct link to Benchmark Findings">​</a></h3>
<p>The results show the g6-dedicated-64 has higher overall throughput. This is expected as the instance has more processing power than the g6-dedicated-16.<br>
<!-- -->However, if you take into account the cost per hour for each machine, the more cost-efficient option is to go with the <strong>g6-dedicated-16</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="14-cambria-application-access">1.4. Cambria Application Access<a href="#14-cambria-application-access" class="hash-link" aria-label="Direct link to 1.4. Cambria Application Access" title="Direct link to 1.4. Cambria Application Access">​</a></h2>
<p>The Cambria applications are accessible via the following methods:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="141-external-access-via-tcp-load-balancer">1.4.1. External Access via TCP Load Balancer<a href="#141-external-access-via-tcp-load-balancer" class="hash-link" aria-label="Direct link to 1.4.1. External Access via TCP Load Balancer" title="Direct link to 1.4.1. External Access via TCP Load Balancer">​</a></h3>
<p>The default Cambria installation configures the Cambria applications to be exposed through load balancers.<br>
<!-- -->There is one for the Cambria Manager WebUI + License Manager, and one for the web / REST API server.<br>
<!-- -->The load balancers are publicly available and can be accessed either through its public IP address or domain name, and the application&#x27;s TCP port.</p>
<p><strong>Example:</strong></p>
<ul>
<li>
<p><strong>Cambria Manager WebUI:</strong><br>
<code>https://44.33.212.155:8161</code></p>
</li>
<li>
<p><strong>Cambria REST API:</strong><br>
<code>https://121.121.121.121:8650/CambriaFC/v1/SystemInfo</code></p>
</li>
</ul>
<p>External access in this way can be turned on/off via a configuration variable. See section <strong>4.2. Creating and Editing Helm Configuration File</strong>.<br>
<!-- -->If this feature is disabled, another method of access will need to be configured.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="142-http-ingress-via-reverse-proxy">1.4.2. HTTP Ingress via Reverse Proxy<a href="#142-http-ingress-via-reverse-proxy" class="hash-link" aria-label="Direct link to 1.4.2. HTTP Ingress via Reverse Proxy" title="Direct link to 1.4.2. HTTP Ingress via Reverse Proxy">​</a></h3>
<p>In cases where the external access via TCP load balancer is not acceptable or for using a purchased domain name<br>
<!-- -->from services such as GoDaddy, the Cambria installation provides the option to expose an ingress.</p>
<p>Similar to the external access load balancers, the Cambria Manager WebUI and web / REST API server are exposed.<br>
<!-- -->However, only one IP address / domain name is needed in this case.</p>
<p>How it works:</p>
<ul>
<li>The Cambria WebUI is exposed through the subdomain <strong>webui</strong></li>
<li>The Cambria web server through the subdomain <strong>api</strong></li>
<li>The Grafana dashboard through the subdomain <strong>monitoring</strong></li>
</ul>
<p><strong>Example with the domain <code>mydomain.com</code>:</strong></p>
<ul>
<li>
<p><strong>Cambria Manager WebUI:</strong><br>
<code>https://webui.mydomain.com</code></p>
</li>
<li>
<p><strong>Cambria REST API:</strong><br>
<code>https://api.mydomain.com</code></p>
</li>
<li>
<p><strong>Grafana Dashboard:</strong><br>
<code>https://monitoring.mydomain.com</code></p>
</li>
</ul>
<p>Capella provides a default ingress hostname for testing purposes only.<br>
<!-- -->In production, the default hostname, SSL certificate, and other such information need to be configured.<br>
<!-- -->More information about ingress configuration is explained later in this guide.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="15-firewall-information">1.5. Firewall Information<a href="#15-firewall-information" class="hash-link" aria-label="Direct link to 1.5. Firewall Information" title="Direct link to 1.5. Firewall Information">​</a></h3>
<p>By default, this guide creates a Kubernetes cluster with default settings which do not include a firewall. For custom or non-default configurations, or to use a more restrictive network based on the default virtual network created, the following is a list of known ports that the Cambria applications use:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ports-used-by-cambria-applications">Ports Used by Cambria Applications<a href="#ports-used-by-cambria-applications" class="hash-link" aria-label="Direct link to Ports Used by Cambria Applications" title="Direct link to Ports Used by Cambria Applications">​</a></h4>
<table><thead><tr><th>Port(s)</th><th>Protocol</th><th>Traffic Direction</th><th>Description</th></tr></thead><tbody><tr><td>8650</td><td>TCP</td><td>Inbound</td><td>Cambria Cluster REST API</td></tr><tr><td>8161</td><td>TCP</td><td>Inbound</td><td>Cambria Cluster WebUI</td></tr><tr><td>8678</td><td>TCP</td><td>Inbound</td><td>Cambria License Manager Web Server</td></tr><tr><td>8481</td><td>TCP</td><td>Inbound</td><td>Cambria License Manager WebUI</td></tr><tr><td>9100</td><td>TCP</td><td>Inbound</td><td>Prometheus System Exporter for Cambria Cluster</td></tr><tr><td>8648</td><td>TCP</td><td>Inbound</td><td>Cambria FTC REST API</td></tr><tr><td>3100</td><td>TCP</td><td>Inbound</td><td>Loki Logging Service</td></tr><tr><td>3000</td><td>TCP</td><td>Inbound</td><td>Grafana Dashboard</td></tr><tr><td>443</td><td>TCP</td><td>Inbound</td><td>Capella Ingress</td></tr><tr><td>ALL</td><td>TCP/UDP</td><td>Outbound</td><td>Expose all outbound traffic</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="required-firewall-domains-for-cambria-licensing">Required Firewall Domains for Cambria Licensing<a href="#required-firewall-domains-for-cambria-licensing" class="hash-link" aria-label="Direct link to Required Firewall Domains for Cambria Licensing" title="Direct link to Required Firewall Domains for Cambria Licensing">​</a></h4>
<p>For Cambria licensing, any Cambria Cluster and Cambria FTC machine requires the following domains be exposed in your firewall (both inbound and outbound traffic):</p>
<table><thead><tr><th>Domain</th><th>Port(s)</th><th>Protocol</th><th>Traffic Direction</th><th>Description</th></tr></thead><tbody><tr><td>api.cryptlex.com</td><td>443</td><td>TCP</td><td>In/Out</td><td>License Server</td></tr><tr><td>cryptlexapi.capellasystems.net</td><td>8485</td><td>TCP</td><td>In/Out</td><td>License Cache Server</td></tr><tr><td>cpfs.capellasystems.net</td><td>8483</td><td>TCP</td><td>In/Out</td><td>License Backup Server</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-prerequisites">2. Prerequisites<a href="#2-prerequisites" class="hash-link" aria-label="Direct link to 2. Prerequisites" title="Direct link to 2. Prerequisites">​</a></h2>
<p>The following steps need to be completed before the deployment process.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-tools-kubectl-and-helm">2.1. Tools: Kubectl and Helm<a href="#21-tools-kubectl-and-helm" class="hash-link" aria-label="Direct link to 2.1. Tools: Kubectl and Helm" title="Direct link to 2.1. Tools: Kubectl and Helm">​</a></h3>
<p>This guide uses cURL and unzip to run certain commands and download the required tools and applications.<br>
<!-- -->Therefore, the Linux server used for deployment will need to have these tools installed. Here is an example with Ubuntu:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo apt update; sudo apt upgrade; sudo apt install curl unzip</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The components of this installation are packaged in a zip archive. Download it using the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -o CambriaClusterKubernetesAkamai_5_5_0.zip -L &quot;https://www.dropbox.com/scl/fi/djskqq0ve21vlgjk6bmiq/CambriaClusterKubernetesAkamai_5_5_0.zip?rlkey=dlw857nygf22e901tcakpbxm2&amp;st=fibyo4zd&amp;dl=1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">unzip CambriaClusterKubernetesAkamai_5_5_0.zip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod +x *.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p><strong>Important:</strong> The scripts included have been tested with Ubuntu. They may work with other Linux distributions but have not been tested.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211-installation">2.1.1. Installation<a href="#211-installation" class="hash-link" aria-label="Direct link to 2.1.1. Installation" title="Direct link to 2.1.1. Installation">​</a></h4>
<p>There are 2 options available for installing the Kubernetes required tools for deployment to Akamai Cloud:</p>
<p><strong>Option 1: Use Installation Script (Verified on Ubuntu)</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./installKubeTools.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Other Installation Options</strong></p>
<ol>
<li><a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">Kubectl</a></li>
<li><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Helm</a></li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="212-verification">2.1.2. Verification<a href="#212-verification" class="hash-link" aria-label="Direct link to 2.1.2. Verification" title="Direct link to 2.1.2. Verification">​</a></h4>
<p>If any of the commands below fail, review the installation instructions for the failing tool and try again:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl version --client; helm version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-kubernetes-cluster">3. Create Kubernetes Cluster<a href="#3-create-kubernetes-cluster" class="hash-link" aria-label="Direct link to 3. Create Kubernetes Cluster" title="Direct link to 3. Create Kubernetes Cluster">​</a></h2>
<p>The following section provides the basic steps needed to create a Kubernetes Cluster on Akamai Cloud.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-create-lke-cluster-and-cambria-cluster-node-group">3.1. Create LKE Cluster and Cambria Cluster Node Group<a href="#31-create-lke-cluster-and-cambria-cluster-node-group" class="hash-link" aria-label="Direct link to 3.1. Create LKE Cluster and Cambria Cluster Node Group" title="Direct link to 3.1. Create LKE Cluster and Cambria Cluster Node Group">​</a></h3>
<ol>
<li>In the Akamai Cloud dashboard, create a Cluster on the Dashboard in the Kubernetes section.
a. Choose a label for your Kubernetes Cluster, the region where it should be created, and version 1.32 for the Kubernetes Version.<br>
<!-- -->b. If this Kubernetes setup is for production, it is recommended to enable the HA Control Plane to activate high availability for the Kubernetes Cluster.<!-- -->
<blockquote>
<p>Note: This does incur an additional cost on top of the Kubernetes Cluster specific costs. Otherwise, select the <strong>No</strong> option.</p>
</blockquote>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/01_add_logo-50b93b3176e6451c725baa95edf2da67.png" width="553" height="409" class="img_ev3q"></p>
<p>c. In the Add Node Pools section, there is one node pool that needs to be added at this time (for Cambria
Cluster). Set the number of nodes for Cambria Cluster to the amount desired and click the Add button
(See example below).</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Information / Recommendation</div><div class="admonitionContent_BuS1"><p>Cambria Cluster manages scheduling and handling Cambria FTC encoding / packaging programs.<br>
<!-- -->Think about how many programs will be intended to run and choose an instance type accordingly.</p><p>The lowest recommended machine type for the manager machines is <strong>Dedicated 8GB</strong>.<br>
<!-- -->It is also recommended to set the node count to <strong>3</strong>. This is because one of the nodes will act as the Cambria Cluster node while the other two nodes act as backups (web server and database are replicated / duplicated).</p><p>In the case that the Cambria Cluster node goes down or stops responding, one of the other two nodes will take over as the Cambria Cluster node.</p><p>Depending on your workflow(s), think about how many backup nodes may be needed.</p></div></div>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/02_add_logo-9f0daf61e94f2be2cbe940f6f07a19f5.png" width="632" height="255" class="img_ev3q"></p>
<p>placeholder</p>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/03_add_logo-b71692948d624808448619c859f7b0ba.png" width="944" height="290" class="img_ev3q"></p>
<p>This will show details about the LKE cluster in its current state. This dashboard can be used to view and manage
the LKE cluster from a graphical point of view.</p>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/04_add_logo-158c5454c8f10b0073f44dd2567656ba.png" width="945" height="296" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-optional-restricting-cambria-ftc-encoder-designated-nodes-via-exclusion-label">3.2. (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label<a href="#32-optional-restricting-cambria-ftc-encoder-designated-nodes-via-exclusion-label" class="hash-link" aria-label="Direct link to 3.2. (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label" title="Direct link to 3.2. (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label">​</a></h3>
<p>Follow these steps only if more precise control is required over which nodes Cambria FTC is installed on.<br>
<!-- -->If unsure, refer to the following overview for more details before moving forward.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h4>
<p>By default, the Cambria management and encoding applications are installed on separate nodes according to a specified node instance type.<br>
<!-- -->For example, if the management node instance type is set to <code>g6-dedicated-4</code>, Cambria Cluster can only be installed on nodes of that instance type, while Cambria FTC can be installed on nodes of other instance types.</p>
<p>In some scenarios, the default setup may not be sufficient.<br>
<!-- -->For example, certain nodes may need to handle both management and encoding, or specific nodes in the cluster may be designated for other tasks and should not run encoding tasks.<br>
<!-- -->To accommodate these workflows, an exclusion label must be added to the nodes where Cambria FTC should be restricted.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="steps">Steps<a href="#steps" class="hash-link" aria-label="Direct link to Steps" title="Direct link to Steps">​</a></h4>
<ol>
<li>
<p>Find out which node(s) will be Cambria FTC restricted and note down the name:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get nodes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Apply the following label to each of those nodes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl label node &lt;node-name&gt; no-capella-worker=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Follow this step only for each node pool that should apply the Cambria FTC exclusion tag to all of its existing and new nodes.</p>
<p>To apply the same restriction to all nodes in a node pool, add the same label to the node pool.<br>
<!-- -->In Akamai, when labeling a node pool, the label will apply to existing and new nodes. One way to do this is via the Akamai Cloud Dashboard:</p>
<p>a. In the Akamai Cloud Dashboard, go into the Kubernetes cluster and look for the node pool(s) to label<br>
<!-- -->b. Select <strong>Labels and Taints</strong> and <strong>Add Label</strong>. In the Label field, enter:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">no-capella-worker: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and then save the changes.</p>
</li>
<li>
<p>When in section <strong>4.2. Creating and Editing Helm Configuration File</strong>, make sure to set this option in the Helm values file:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">workersCanUseManagerNodes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-create-cambria-ftc-node-groups">3.3. Create Cambria FTC Node Group(s)<a href="#33-create-cambria-ftc-node-groups" class="hash-link" aria-label="Direct link to 3.3. Create Cambria FTC Node Group(s)" title="Direct link to 3.3. Create Cambria FTC Node Group(s)">​</a></h3>
</li>
</ol>
<p><em>Skip this step if planning to use Cambria FTC&#x27;s autoscaler.</em></p>
<p>Run the following steps to create the Node Group(s) for the worker application instances (replace the highlighted values to those of your specific environment):</p>
<p><strong>Information / Recommendation</strong></p>
<p>For this particular case, Cambria FTC nodes need to be added manually. Therefore, you will need to think about what machine / instance types are needed for running the Cambria FTC workflows.</p>
<p>Based on benchmarks (See section 1.3. <em>Akamai Cloud Machine Information and Benchmark</em>), the recommended machine / instance type to get started is <code>g6-dedicated-16</code>.</p>
<p>To get started, it is recommended to start with <strong>one instance</strong>. This way, when the installation is complete, there will already be one Cambria FTC instance to test with. The number of instances can always be scaled up and down, up to the <strong>maximum FTC instance count</strong> that will be configured in section 4.2. <em>Creating and Editing Helm Configuration File</em>.</p>
<hr>
<p><strong>Steps:</strong></p>
<ol>
<li>In the Akamai Dashboard, go to the LKE cluster.</li>
<li>Select <strong>Add a Node Pool</strong> and choose the node instance types and number of nodes to add to the node group.<!-- -->
<ul>
<li>The instance types <strong>MUST</strong> be different from the Cambria Cluster nodes except if the steps in section 3.2 <em>Optional: Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label</em> were followed.</li>
</ul>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/05_add_logo-c31e157869b9257fcafe45fe4439e337.png" width="631" height="273" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-gpu-operator-for-nvenc">3.4. GPU Operator for NVENC<a href="#34-gpu-operator-for-nvenc" class="hash-link" aria-label="Direct link to 3.4. GPU Operator for NVENC" title="Direct link to 3.4. GPU Operator for NVENC">​</a></h3>
<p>This section is only required for a Kubernetes cluster that will use GPUs.<br>
<strong>Skip this step if GPUs will not be used in this Kubernetes cluster.</strong></p>
<p><strong>Limitation</strong>: This currently does not work with the FTC autoscaler.</p>
<p>In a command prompt / terminal, run the following commands to deploy the GPU Operator to the Kubernetes cluster:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo add nvidia https://helm.ngc.nvidia.com/nvidia</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm repo update</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm install nvidia-operator nvidia/gpu-operator \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --create-namespace \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --namespace gpu-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Wait at least 5 minutes for the GPU operator to install completely.<br>
<!-- -->Run this command with <code>kubectl</code> and make sure that all of the pods are in a <code>Running</code> or <code>Completed</code> state:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pods -n gpu-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If any pod is still in an <code>Init</code> state or <code>PodCreating</code> state, wait another 5 minutes to see if the pods will complete their install process.</p>
<p>For any pods that are in an errored state or that are still in an <code>Init</code> state after 10 minutes, do the following:</p>
<ul>
<li>Check that at least one node is one of the supported Akamai Cloud GPU instances.</li>
<li>Use the following command to check the state of a failing pod (check the Events section):</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl describe pod &lt;your-pod-name&gt; -n gpu-operator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Either look up the error for a potential solution or send the entire Events section to the Capella support team for investigation.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-performance-metrics-and-logging">3.5. Performance Metrics and Logging<a href="#35-performance-metrics-and-logging" class="hash-link" aria-label="Direct link to 3.5. Performance Metrics and Logging" title="Direct link to 3.5. Performance Metrics and Logging">​</a></h3>
<p>This section is required for logging and other performance information about the Cambria applications.<br>
<!-- -->Follow the steps in the document below to install Prometheus, Grafana, Loki, and Promtail:</p>
<p><a href="https://www.dropbox.com/scl/fi/rxshb6038wd9yg81kxagd/Prometheus_Grafana_Setup_for_Cambria_Cluster_5_5_0_on_Akamai_Kubernetes.pdf?rlkey=5l561e8x251y46gywx57k5svm&amp;st=m58td12z&amp;dl=1" target="_blank" rel="noopener noreferrer">Prometheus_Grafana_Setup_for_Cambria_Cluster_5_5_0_on_Akamai_Kubernetes.pdf</a></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-install-cambria-cluster-ftc-and-dependencies">4. Install Cambria Cluster, FTC, and Dependencies<a href="#4-install-cambria-cluster-ftc-and-dependencies" class="hash-link" aria-label="Direct link to 4. Install Cambria Cluster, FTC, and Dependencies" title="Direct link to 4. Install Cambria Cluster, FTC, and Dependencies">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-prerequisite-deploy-external-kubernetes-tools">4.1. Prerequisite: Deploy External Kubernetes Tools<a href="#41-prerequisite-deploy-external-kubernetes-tools" class="hash-link" aria-label="Direct link to 4.1. Prerequisite: Deploy External Kubernetes Tools" title="Direct link to 4.1. Prerequisite: Deploy External Kubernetes Tools">​</a></h3>
<p>There are a few tools that need to be deployed in order to make Cambria FTC / Cluster work properly.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="411-required-tools">4.1.1. Required Tools<a href="#411-required-tools" class="hash-link" aria-label="Direct link to 4.1.1. Required Tools" title="Direct link to 4.1.1. Required Tools">​</a></h4>
<ol>
<li>Run the following commands to deploy the pre-requisite tools for the kubernetes cluster:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./deployCambriaKubeDependencies.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Verify that resources are created and in an active / online state:<!-- -->
<ul>
<li>Pods should be in a <code>Running</code> STATUS and all containers in <code>READY</code> should be active.</li>
<li>Services should have a <code>CLUSTER-IP</code> assigned.</li>
<li>All other resources (e.g., replicasets, deployments, statefulsets, etc) should have all desired resources active.</li>
</ul>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n cnpg-system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n argo-events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n cert-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If any resources are still not ready, wait about a minute for them to complete.<br>
<!-- -->If still not working, contact the Capella support team.</p>
<hr>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="412-optional-ingress-nginx">4.1.2. (Optional) Ingress-Nginx<a href="#412-optional-ingress-nginx" class="hash-link" aria-label="Direct link to 4.1.2. (Optional) Ingress-Nginx" title="Direct link to 4.1.2. (Optional) Ingress-Nginx">​</a></h4>
<p>Run the steps in this section if either an ingress is required or for testing purposes.<br>
<!-- -->If unsure, read section <strong>1.4. Cambria Application Access</strong> which provides a brief overview of the different ways to access the Cambria applications.</p>
<p>By default, certain parts of the Cambria applications are exposed via an ingress. In order to access these, the <code>ingress-nginx</code> service needs to be created and attached to the ingress via a reverse-proxy.</p>
<blockquote>
<p><strong>Important:</strong> This will create a load balancer that is <strong>not automatically deleted</strong> when the Kubernetes cluster is destroyed. This load balancer has to be deleted manually.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="412-optional-ingress-nginx-continued">4.1.2. (Optional) Ingress-Nginx (continued)<a href="#412-optional-ingress-nginx-continued" class="hash-link" aria-label="Direct link to 4.1.2. (Optional) Ingress-Nginx (continued)" title="Direct link to 4.1.2. (Optional) Ingress-Nginx (continued)">​</a></h3>
<ol>
<li>Run the following command:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.12.1/deploy/static/provider/cloud/deploy.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Verify that the resources are created and in an active / online state:</li>
</ol>
<ul>
<li>Pods should be in a <code>Running</code> STATUS and all containers in <code>READY</code> should be active.</li>
<li>Services should have a <code>CLUSTER-IP</code> assigned. The <code>ingress-nginx-controller</code> should have an <code>EXTERNAL-IP</code>.</li>
<li>All other resources (e.g. replicasets, deployments, statefulsets) should have all desired resources active:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n ingress-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If any resources are still not ready, wait about a minute for them to complete. If still not complete, contact the Capella support team.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-production--using-publicly-registered-domain-name-and-tls-certificate">For Production / Using Publicly Registered Domain Name and TLS Certificate:<a href="#for-production--using-publicly-registered-domain-name-and-tls-certificate" class="hash-link" aria-label="Direct link to For Production / Using Publicly Registered Domain Name and TLS Certificate:" title="Direct link to For Production / Using Publicly Registered Domain Name and TLS Certificate:">​</a></h4>
<p>Follow this document:</p>
<p><a href="https://www.dropbox.com/scl/fi/3vlap75xs8r5zo1d47gr0/Cambria_Kubernetes_Domain_DNS_Guide.pdf?rlkey=ei34633z8elzu7jvmv8w6ezou" target="_blank" rel="noopener noreferrer">Cambria Kubernetes Domain DNS Guide (Dropbox)</a></p>
<blockquote>
<p>Important: Connect the domain to the ingress and make sure to have entries in the domain registry for the following subdomains (assuming <code>mydomain.com</code> is your registered domain):</p>
<ul>
<li><code>api.mydomain.com</code></li>
<li><code>webui.mydomain.com</code></li>
<li><code>monitoring.mydomain.com</code></li>
</ul>
</blockquote>
<p>If not working or unsure of how to do this, contact Capella support.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-creating-and-editing-helm-configuration-file">4.2. Creating and Editing Helm Configuration File<a href="#42-creating-and-editing-helm-configuration-file" class="hash-link" aria-label="Direct link to 4.2. Creating and Editing Helm Configuration File" title="Direct link to 4.2. Creating and Editing Helm Configuration File">​</a></h3>
<p>With Helm and Kubectl installed on the Linux deployment server, create the Helm configuration file (<code>yaml</code>) that will be used to deploy Cambria Cluster / FTC to the Kubernetes environment.</p>
<ol>
<li>In a terminal, run the following command to create the configuration file:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm show values capella-cluster.tgz &gt; cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Open the configuration file in your preferred editor and edit the following values:</li>
</ol>
<p><strong>Blue</strong> = provided by Capella<br>
<strong>Red</strong> = specific to your environment</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambriaclusterconfigyaml-explanation">cambriaClusterConfig.yaml Explanation<a href="#cambriaclusterconfigyaml-explanation" class="hash-link" aria-label="Direct link to cambriaClusterConfig.yaml Explanation" title="Direct link to cambriaClusterConfig.yaml Explanation">​</a></h3>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># allow worker pods to run on the same nodes as manager pods</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">workersCanUseManagerNodes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># workersUseGPU: allow workers to use nvidia GPU</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">workersUseGPU</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># nbGPUs: how many GPUs are on the nodes...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">nbGPUs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># managerInstanceType: database and Cambria Cluster will be...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">managerInstanceType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;g6-dedicated-4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ftcEnableAutoScaler: if true, auto-scaler pod for FTC will be deployed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">ftcEnableAutoScaler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ftcInstanceType: instance type for the FTC nodes which will be...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">ftcInstanceType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;g6-dedicated-16&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># maxFTCInstances: maximum number of FTC instances (ie replicas)...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">maxFTCInstances</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># pgInstances: number of postgresql database instances (ie replicas)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">pgInstances</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cambriaClusterReplicas: number of Cambria Cluster instances...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">cambriaClusterReplicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">externalAccess</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># exposeClusterServiceExternally: main Cambria Cluster service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">exposeStreamServiceExternally</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># enableIngress: enable nginx ingress</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enableIngress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># hostName: use for the nginx ingress. Replace this with your domain name.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">hostName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># acmeRegistrationEmail: email for Automated Certificate Management</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">acmeRegistrationEmail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> test@example.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># acmeServer: server to get TLS certificate from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">acmeServer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">//acme</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">staging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">v02.api.letsencrypt.org/directory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">secrets</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># pgClusterPassword: password for the postgresql database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">pgClusterPassword</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;xrtVeQ4nN82SSiYHoswqdURZ…&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ftcLicenseKey: FTC license key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ftcLicenseKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2XXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX-XXXXXX&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cambriaClusterAPIToken: API token for Cambria Cluster...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cambriaClusterAPIToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;12345678-1234-43f8-b4fc-53afd3893d5f&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># cambriaClusterWebUIUser: user/password to access Cambria Cluster UI...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">cambriaClusterWebUIUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;admin,defaultWebUIUser,RZvSSd3ffsElsCEEe9&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># akamaiCloudAPIToken: API token, used for horizontal scaling...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">akamaiCloudAPIToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;d02732530a2bcfd4d028425eb55f366f74631…&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># argoEventWebhookSourceBearerToken: bearer token used by webhook-ftc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">argoEventWebhookSourceBearerToken</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L9Em5WIW8yth6H4uPtzT&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">optionalInstall</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enableEventing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="43-installing-cambria-ftc--cluster">4.3. Installing Cambria FTC / Cluster<a href="#43-installing-cambria-ftc--cluster" class="hash-link" aria-label="Direct link to 4.3. Installing Cambria FTC / Cluster" title="Direct link to 4.3. Installing Cambria FTC / Cluster">​</a></h2>
<p>Wait at least 5 minutes after installing prerequisites before moving on to this step. In a command line / terminal window, run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade --install capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The result of running the command should look something like this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Release &quot;capella-cluster&quot; does not exist. Installing it now.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAME: capella-cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LAST DEPLOYED: Thu May 3 10:09:47 2023</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAMESPACE: default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">STATUS: deployed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">REVISION: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TEST SUITE: None</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>At this point, several components are being deployed to the Kubernetes environment. Wait a few minutes for everything to be deployed.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-verify-cambria-ftc--cluster-installation">5. Verify Cambria FTC / Cluster Installation<a href="#5-verify-cambria-ftc--cluster-installation" class="hash-link" aria-label="Direct link to 5. Verify Cambria FTC / Cluster Installation" title="Direct link to 5. Verify Cambria FTC / Cluster Installation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-verify-cambria-cluster-deployment">5.1. Verify Cambria Cluster Deployment<a href="#51-verify-cambria-cluster-deployment" class="hash-link" aria-label="Direct link to 5.1. Verify Cambria Cluster Deployment" title="Direct link to 5.1. Verify Cambria Cluster Deployment">​</a></h3>
<blockquote>
<p><strong>Important:</strong> The components below are only a subset of the whole installation. These are the components considered as key to a proper deployment.</p>
</blockquote>
<ol>
<li>Run the following command:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Verify the following information:</li>
</ol>
<table><thead><tr><th>Resources</th><th>Content</th></tr></thead><tbody><tr><td>Deployments</td><td>- 1 <code>cambriaclusterapp</code> deployment with all items active<br>- 1 <code>cambriaclusterwebui</code> deployment with all items active</td></tr><tr><td>Pods</td><td>- X pods with <code>cambriaclusterapp</code> in the name (X = # of replicas specified in config file) with all items active / Running<br>- X pods with <code>pgcluster</code> in the name (X = # of replicas specified in config file) with all items active / Running<br>- 1 pod with <code>cambriaclusterwebui</code> in the name</td></tr><tr><td>Services</td><td>- 3 services with <code>pgcluster</code> in the name with a <code>CLUSTER-IP</code> assigned<br>- 1 service named <code>cambriaclusterservice</code>. If <code>exposeStreamServiceExternally</code> is true, this should have an <code>EXTERNAL-IP</code><br>- 1 service named <code>cambriaclusterwebuiservice</code>. If <code>exposeStreamServiceExternally</code> is true, this should have an <code>EXTERNAL-IP</code></td></tr></tbody></table>
<ol start="3">
<li>If any of the above are not in an expected state, wait a few more minutes in case some resources take longer than expected to complete. If after a few minutes there are still resources in an unexpected state, contact the Capella support team.</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-verify-cambria-ftc-deployment">5.2. Verify Cambria FTC Deployment<a href="#52-verify-cambria-ftc-deployment" class="hash-link" aria-label="Direct link to 5.2. Verify Cambria FTC Deployment" title="Direct link to 5.2. Verify Cambria FTC Deployment">​</a></h3>
<blockquote>
<p><strong>Important:</strong> The components below are only a subset of the whole installation. These are the components considered as key to a proper deployment.</p>
</blockquote>
<ol>
<li>Run the following command:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get all -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Verify the following information:</li>
</ol>
<table><thead><tr><th>Resources</th><th>Content</th></tr></thead><tbody><tr><td>Pods</td><td>- X pods with <code>cambriaftcapp</code> in the name (X = Max # of FTCs specified in the config file)<br><strong>Notes:</strong><br>1. If using Cambria FTC autoscaler, all of these pods should be in a pending state. Every time the autoscaler deploys a Cambria FTC node, one pod will be assigned to it.<br>2. If not using Cambria FTC autoscaler, Y of the pods should be in an active / running state and all containers running (Y = # of Cambria FTC nodes active)</td></tr><tr><td>Deployments</td><td>- 1 <code>cambriaftcapp</code> deployment.</td></tr></tbody></table>
<ol start="3">
<li>If any of the above are not in an expected state, wait a few more minutes in case some resources take longer than expected to complete. If after a few minutes there are still resources in an unexpected state, contact the Capella support team.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-verify-applications-are-accessible">5.3. Verify Applications are Accessible<a href="#53-verify-applications-are-accessible" class="hash-link" aria-label="Direct link to 5.3. Verify Applications are Accessible" title="Direct link to 5.3. Verify Applications are Accessible">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="531-cambria-cluster-webui">5.3.1. Cambria Cluster WebUI<a href="#531-cambria-cluster-webui" class="hash-link" aria-label="Direct link to 5.3.1. Cambria Cluster WebUI" title="Direct link to 5.3.1. Cambria Cluster WebUI">​</a></h4>
<p>Skip this step if the WebUI was set to disabled in the Helm values configuration yaml file or the ingress will be used instead. For any issues, contact the Capella support team.</p>
<ol>
<li><strong>Get the WebUI address. A web browser is required to access the WebUI:</strong></li>
</ol>
<p><strong>Option 1: External Url if External Access is Enabled</strong><br>
<!-- -->Run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8161&#x27;}{&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response should look something like this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://192.122.45.33:8161</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Non-External Url Access</strong><br>
<!-- -->Run the following command to temporarily expose the WebUI via port-forwarding:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterwebuiservice 8161:8161 --address=0.0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The URL depends on the location of the web browser. If the web browser and the port-forward are on the same machine, use <code>localhost</code>. Otherwise, use the IP address of the machine with the port-forward:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://&lt;server&gt;:8161</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li><strong>In a web browser, enter the above URL.</strong> This should trigger an &quot;Unsafe&quot; page similar to the one below.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/06_add_logo-3f6cff6b1ae76e05f7d18f4d6235fb11.png" width="554" height="382" class="img_ev3q"></p>
<ol start="3">
<li>Click on Advanced and Proceed to [ EXTERNAL IP ] (unsafe). This will show the login page.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/07_add_logo-9ed7448cacaa52c97e8b7253818757aa.png" width="947" height="128" class="img_ev3q"></p>
<ol start="4">
<li>Log in using the credentials created in the Helm values yaml file (See cambriaClusterWebUIUser)</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="532-cambria-cluster-rest-api">5.3.2. Cambria Cluster REST API<a href="#532-cambria-cluster-rest-api" class="hash-link" aria-label="Direct link to 5.3.2. Cambria Cluster REST API" title="Direct link to 5.3.2. Cambria Cluster REST API">​</a></h3>
<p><strong>Skip this step if the ingress will be used instead of external access or any other type of access.</strong><br>
<!-- -->For any issues, contact the Capella support team.</p>
<p><strong>1. Get the REST API address:</strong></p>
<p><strong>Option 1: External URL if External Access is Enabled</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8650&#x27;}{&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example Output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://192.122.45.33:8650</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Non-External URL Access</strong></p>
<p>Run the following command to temporarily expose the REST API via port-forwarding:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterservice 8650:8650 --address=0.0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The URL depends on the location of the port-forward.<br>
<!-- -->If the web browser and the port-forward are on the same machine, use <code>localhost</code>.<br>
<!-- -->Otherwise, use the IP address of the machine with the port-forward:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://&lt;server&gt;:8650</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>2. Run the following API query to check if the REST API is active:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -k -X GET https://&lt;server&gt;:8650/CambriaFC/v1/SystemInfo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="533-cambria-ingress">5.3.3. Cambria Ingress<a href="#533-cambria-ingress" class="hash-link" aria-label="Direct link to 5.3.3. Cambria Ingress" title="Direct link to 5.3.3. Cambria Ingress">​</a></h3>
<p><strong>Skip this step if not planning to test with Cambria&#x27;s ingress.</strong><br>
<!-- -->For any issues, contact the Capella support team.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5331-get-the-ingress-endpoints">5.3.3.1. Get the Ingress Endpoints<a href="#5331-get-the-ingress-endpoints" class="hash-link" aria-label="Direct link to 5.3.3.1. Get the Ingress Endpoints" title="Direct link to 5.3.3.1. Get the Ingress Endpoints">​</a></h4>
<p>There are two ways to use the ingress:</p>
<p><strong>Option 1: Using Default Testing Ingress</strong></p>
<p>Only use this option for testing purposes. Skip to Option 2 for production.<br>
<!-- -->To use the ingress in the testing state, the hostname needs to be DNS resolvable on the machines that need access.</p>
<p><strong>1. Get the ingress HOSTS and ADDRESS:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get ingress -A</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example Output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">NAMESPACE   NAME                   CLASS   HOSTS                                         ADDRESS       PORTS   AGE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">default     cambriaclusteringress nginx   api.akamai.capellatest.com,webui.akamaicapellatest.com   55.99.103.99   80, 443   23m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">monitoring  cambriamonitoringingress nginx   monitoring.myhost.com                         55.99.103.99   80, 443   58m</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>2. Edit the <code>/etc/hosts</code> file (or equivalent) on all servers needing access:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 api.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 webui.myhost.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">55.99.103.99 monitoring.myhost.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Option 2: Using Publicly Registered Domain (Production)</strong></p>
<p>Contact Capella if unable to set up a purchased domain with the ingress.<br>
<!-- -->If the domain is set up, the endpoints are as follows (example with <code>mydomain.com</code>):</p>
<ul>
<li>REST API: <code>https://api.myhost.com</code></li>
<li>WebUI: <code>https://webui.myhost.com</code></li>
<li>Grafana Dashboard: <code>https://monitoring.myhost.com</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5332-test-ingress-endpoints">5.3.3.2. Test Ingress Endpoints<a href="#5332-test-ingress-endpoints" class="hash-link" aria-label="Direct link to 5.3.3.2. Test Ingress Endpoints" title="Direct link to 5.3.3.2. Test Ingress Endpoints">​</a></h3>
<p>If using the test ingress, these steps can only be verified in the machine(s) where the hosts file was modified. This is because the test ingress is not publicly DNS resolvable and so only those whose hosts file (or DNS) have been configured to resolve the test ingress will be able to access the Capella applications in this way.</p>
<ol>
<li>
<p><strong>Test Cambria Cluster WebUI</strong> with the ingress that starts with <code>webui</code>. Run steps 2-3 of <strong>5.3.1. Cambria Cluster WebUI</strong>. Example:<br>
<code>https://webui.myhost.com</code></p>
</li>
<li>
<p><strong>Test Cambria REST API</strong> with the ingress that starts with <code>api</code>. Run step 2 of <strong>5.3.2. Cambrai Cluster REST API</strong>. Example:<br>
<code>https://api.myhost.com/CambriaFC/v1/SystemInfo</code></p>
</li>
<li>
<p><strong>Test Grafana Dashboard</strong> with the ingress that starts with <code>monitoring</code>. Run the verification steps for the Grafana Dashboard in <strong>section 1.4. Verify Grafana Deployment (steps 2-4)</strong> in the document in <strong>3.7. Performance Metrics and Logging</strong>. Example:<br>
<code>https://monitoring.myhost.com</code></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="534-cambria-license">5.3.4. Cambria License<a href="#534-cambria-license" class="hash-link" aria-label="Direct link to 5.3.4. Cambria License" title="Direct link to 5.3.4. Cambria License">​</a></h3>
<p>The Cambria license needs to be active in all entities where the Cambria application is deployed. Run the following steps to check the Cambria license. Access to a web browser is required:</p>
<ol>
<li>
<p><strong>Get the url for the License Manager WebUI</strong>:</p>
<p><strong>Option 1: External Url if External Access is Enabled</strong><br>
<!-- -->Run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get svc/cambriaclusterwebuiservice -n default -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8481&#x27;}{&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>&#x27;}&quot;</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">The response should look something like this:  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">`https://192.122.45.33:8481`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">**Option 2: Non-External Url Access**  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Run the following command to temporarily expose the License WebUI via port-forwarding:  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">```bash</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl port-forward -n default svc/cambriaclusterwebuiservice 8481:8481 --address=0.0.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The URL depends on the location of the port-forward. If the web browser and the port-forward are on the same machine, use <code>localhost</code>. Otherwise, use the IP address of the machine with the port-forward:<br>
<code>https://&lt;server&gt;:8481</code></p>
<ol start="2">
<li>In a web browser, enter the above url. This should trigger an &quot;Unsafe&quot; page similar to the one below:</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/08_add_logo-3f6cff6b1ae76e05f7d18f4d6235fb11.png" width="554" height="382" class="img_ev3q"></p>
<ol start="3">
<li>Click on Advanced and Proceed to [ EXTERNAL IP ] (unsafe). This will show the login page.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="Screenshot" src="/assets/images/09_add_logo-44b1b704a18082ab1af2c4afc531dabb.png" width="1573" height="116" class="img_ev3q"></p>
<ol start="4">
<li>
<p>Log in using the credentials created in the Helm values yaml file (See cambriaClusterWebUIUser)</p>
</li>
<li>
<p>Verify that the License Status is valid for at least either the Primary or Backup. Preferably, both Primary and
Backup should be valid. If there are issues with the license, wait a few minutes as sometimes it takes a few
minutes to properly update. If still facing issues, contact the Capella support team.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-testing-cambria-ftc--cluster">6. Testing Cambria FTC / Cluster<a href="#6-testing-cambria-ftc--cluster" class="hash-link" aria-label="Direct link to 6. Testing Cambria FTC / Cluster" title="Direct link to 6. Testing Cambria FTC / Cluster">​</a></h2>
<p>The following guide provides information on how to get started testing the Cambria FTC / Cluster software:
<a href="https://www.dropbox.com/scl/fi/5vra6xff23vvng7aa4qyx/Cambria_Cluster_and_FTC_5_5_0_Kubernetes_User_Guide.pdf?rlkey=j3l9wjjo5ncbub9bh9bizrukr&amp;st=tmmzm91q&amp;dl=1" target="_blank" rel="noopener noreferrer">Cambria Cluster and FTC 5.5.0 Kubernetes User Guide</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-updating--upgrading-cambria-cluster--ftc">7. Updating / Upgrading Cambria Cluster / FTC<a href="#7-updating--upgrading-cambria-cluster--ftc" class="hash-link" aria-label="Direct link to 7. Updating / Upgrading Cambria Cluster / FTC" title="Direct link to 7. Updating / Upgrading Cambria Cluster / FTC">​</a></h2>
<p>There are currently two ways to update / upgrade Cambria FTC / Cluster in the kubernetes environment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-option-1-normal-upgrade-via-helm-upgrade">7.1. Option 1: Normal Upgrade via Helm Upgrade<a href="#71-option-1-normal-upgrade-via-helm-upgrade" class="hash-link" aria-label="Direct link to 7.1. Option 1: Normal Upgrade via Helm Upgrade" title="Direct link to 7.1. Option 1: Normal Upgrade via Helm Upgrade">​</a></h3>
<p>This upgrade method is best for when changing version numbers, secrets such as the license key, WebUI users, etc, and Cambria FTC | Cambria Cluster specific settings such as max number of pods, replicas, etc.</p>
<p><strong>Warning! Known Issues</strong></p>
<ul>
<li><code>pgClusterPassword</code> cannot currently be updated via this method</li>
<li>Changing postgres version also cannot be updated via this method</li>
</ul>
<ol>
<li>Edit the Helm configuration file (yaml) for your Kubernetes environment or create a new configuration file and edit the new file. See section 4.2.</li>
<li>Run the following command to apply the upgrade:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Restart the deployments:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl rollout restart deployment cambriaclusterapp cambriaclusterwebui -n default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl rollout restart deployment cambriaftcapp -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Wait a few minutes for the kubernetes pods to install properly.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-option-2-upgrade-via-cambria-cluster-reinstallation">7.2. Option 2: Upgrade via Cambria Cluster Reinstallation<a href="#72-option-2-upgrade-via-cambria-cluster-reinstallation" class="hash-link" aria-label="Direct link to 7.2. Option 2: Upgrade via Cambria Cluster Reinstallation" title="Direct link to 7.2. Option 2: Upgrade via Cambria Cluster Reinstallation">​</a></h3>
<p>For any upgrade cases for the Cambria Cluster | Cambria FTC environment, this is the most reliable option. This upgrade option basically uninstalls all of the Cambria FTC and Cluster components and then reinstalls with the new Helm chart and values (.yaml) file. As a result, this will delete the database and delete all of your jobs in the Cambria Cluster UI.</p>
<ol>
<li>Follow section 4.2 to edit your new <code>cambriaClusterConfig.yaml</code> file.</li>
<li>Run:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Redeploy:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm upgrade --install capella-cluster capella-cluster.tgz --values cambriaClusterConfig.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-upgrade-verification">7.3. Upgrade Verification<a href="#73-upgrade-verification" class="hash-link" aria-label="Direct link to 7.3. Upgrade Verification" title="Direct link to 7.3. Upgrade Verification">​</a></h3>
<p>Use the steps in section 5.0 to verify the upgrade. For any issues, contact the Capella support team.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-deleting-kubernetes-cluster">8. Deleting Kubernetes Cluster<a href="#8-deleting-kubernetes-cluster" class="hash-link" aria-label="Direct link to 8. Deleting Kubernetes Cluster" title="Direct link to 8. Deleting Kubernetes Cluster">​</a></h2>
<p>Carefully follow each step. If using FTC&#x27;s autoscaler, make sure no leftover Cambria FTC nodes are running.</p>
<ol>
<li>Remove Helm deployments:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster -n default --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Delete any remaining volumes:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pv -o name | awk -F&#x27;/&#x27; &#x27;{print $2}&#x27; | xargs -I{} kubectl patch pv {} -p=&#x27;{&quot;spec&quot;:{&quot;persistentVolumeReclaimPolicy&quot;: &quot;Delete&quot;}}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>If <code>ingress-nginx</code> was deployed:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete namespace ingress-nginx</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Follow delete steps from section 3.5.</li>
<li>In Akamai Cloud, go to Kubernetes section and delete the Cluster.</li>
<li>Delete any leftover NodeBalancers.</li>
<li>Delete any leftover Volumes.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-quick-reference-installation-testing-and-teardown">9. Quick Reference: Installation, Testing, and Teardown<a href="#9-quick-reference-installation-testing-and-teardown" class="hash-link" aria-label="Direct link to 9. Quick Reference: Installation, Testing, and Teardown" title="Direct link to 9. Quick Reference: Installation, Testing, and Teardown">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="91-installation-deploy-from-linux-to-akamai-cloud-kubernetes">9.1. Installation (Deploy from Linux to Akamai Cloud Kubernetes)<a href="#91-installation-deploy-from-linux-to-akamai-cloud-kubernetes" class="hash-link" aria-label="Direct link to 9.1. Installation (Deploy from Linux to Akamai Cloud Kubernetes)" title="Direct link to 9.1. Installation (Deploy from Linux to Akamai Cloud Kubernetes)">​</a></h3>
<p>For quick installation, use the Terraform installation instructions:<br>
<a href="https://www.dropbox.com/scl/fi/y4noltg67q489f39ewx4k/Cambria_Cluster_and_FTC_5_5_0_Terraform_on_Akamai_Kubernetes.pdf?rlkey=m2it3z2q7p4sebfulilgd8vn4&amp;st=vbn29kcl&amp;dl=1" target="_blank" rel="noopener noreferrer">Cambria Cluster and FTC 5.5.0 Terraform on Akamai Kubernetes</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="92-upgrades-and-teardown">9.2. Upgrades and Teardown<a href="#92-upgrades-and-teardown" class="hash-link" aria-label="Direct link to 9.2. Upgrades and Teardown" title="Direct link to 9.2. Upgrades and Teardown">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="921-cambria-ftc--cambria-cluster-andor-the-kubernetes-cluster-upgrades">9.2.1. Cambria FTC | Cambria Cluster and/or the Kubernetes Cluster Upgrades<a href="#921-cambria-ftc--cambria-cluster-andor-the-kubernetes-cluster-upgrades" class="hash-link" aria-label="Direct link to 9.2.1. Cambria FTC | Cambria Cluster and/or the Kubernetes Cluster Upgrades" title="Direct link to 9.2.1. Cambria FTC | Cambria Cluster and/or the Kubernetes Cluster Upgrades">​</a></h4>
<p>Edit the <code>capellaClusterConfig.yaml</code> file and then run the following command<br>
<!-- -->(See section 7. Updating / Upgrading Kubernetes Cluster for more details and warnings):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./quickUpgradeCambriaCluster.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="922-cambria-ftc--cambria-cluster-uninstall">9.2.2. Cambria FTC | Cambria Cluster Uninstall<a href="#922-cambria-ftc--cambria-cluster-uninstall" class="hash-link" aria-label="Direct link to 9.2.2. Cambria FTC | Cambria Cluster Uninstall" title="Direct link to 9.2.2. Cambria FTC | Cambria Cluster Uninstall">​</a></h4>
<p>If just wanting to uninstall Cambria Cluster and Cambria FTC, run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">helm uninstall capella-cluster --wait</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="923-kubernetes-cluster-teardown">9.2.3. Kubernetes Cluster Teardown<a href="#923-kubernetes-cluster-teardown" class="hash-link" aria-label="Direct link to 9.2.3. Kubernetes Cluster Teardown" title="Direct link to 9.2.3. Kubernetes Cluster Teardown">​</a></h4>
<p>As this involves several components, it is best to do the cluster teardown using the steps in section 8.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-quick-reference-helpful-commandsinfo-for-after-installation">10. Quick Reference: Helpful Commands/Info for After Installation<a href="#10-quick-reference-helpful-commandsinfo-for-after-installation" class="hash-link" aria-label="Direct link to 10. Quick Reference: Helpful Commands/Info for After Installation" title="Direct link to 10. Quick Reference: Helpful Commands/Info for After Installation">​</a></h2>
<p>This section provides helpful commands and other information that may be useful after the installation process such as how to get the WebUI address, what ports are available to use for incoming sources, etc.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="akamai-kubernetes-kubeconfig-file-for-use-with-kubectl-and-akamai-kubernetes-dashboard">Akamai Kubernetes Kubeconfig File [For use with <code>kubectl</code> and Akamai Kubernetes Dashboard]<a href="#akamai-kubernetes-kubeconfig-file-for-use-with-kubectl-and-akamai-kubernetes-dashboard" class="hash-link" aria-label="Direct link to akamai-kubernetes-kubeconfig-file-for-use-with-kubectl-and-akamai-kubernetes-dashboard" title="Direct link to akamai-kubernetes-kubeconfig-file-for-use-with-kubectl-and-akamai-kubernetes-dashboard">​</a></h3>
<ol>
<li>Log in to the Akamai Cloud dashboard and go to <strong>Clusters</strong>. Select your cluster from the list and click on the configuration file towards the top of the page.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="akamai-kubernetes-dashboard">Akamai Kubernetes Dashboard<a href="#akamai-kubernetes-dashboard" class="hash-link" aria-label="Direct link to Akamai Kubernetes Dashboard" title="Direct link to Akamai Kubernetes Dashboard">​</a></h3>
<ol>
<li>Log in to the Akamai Cloud dashboard and go to your Kubernetes Cluster. Click on the <strong>Kubernetes Dashboard</strong> link.</li>
<li>Use the Akamai Kubernetes Cluster Configuration File to log in to the dashboard.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-webui-via-kubectl">Cambria Cluster WebUI (via <code>kubectl</code>)<a href="#cambria-cluster-webui-via-kubectl" class="hash-link" aria-label="Direct link to cambria-cluster-webui-via-kubectl" title="Direct link to cambria-cluster-webui-via-kubectl">​</a></h3>
<ol>
<li>Run the following command to get the WebUI address:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get service/cambriaclusterwebuiservice -n default      -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8161&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>To log in to the WebUI, the credentials are located in the Helm values <code>.yaml</code> file that you configure (See section 3.3. Creating and Editing Helm Configuration File).</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-webui-via-kubernetes-dashboard">Cambria Cluster WebUI (via Kubernetes Dashboard)<a href="#cambria-cluster-webui-via-kubernetes-dashboard" class="hash-link" aria-label="Direct link to Cambria Cluster WebUI (via Kubernetes Dashboard)" title="Direct link to Cambria Cluster WebUI (via Kubernetes Dashboard)">​</a></h3>
<ol>
<li>In the Akamai Kubernetes Dashboard for your cluster, go to <strong>Services</strong> and look for the <code>cambriaclusterwebuiservice</code> service. Copy the IP address of one of the External Endpoints.</li>
<li>The WebUI address should be <code>https://[EXTERNAL IP]:8161</code>. To log in to the WebUI, the credentials are located in the Helm values <code>.yaml</code> file that you configure (See section 3.3).</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-rest-api-via-kubectl">Cambria Cluster REST API (via <code>kubectl</code>)<a href="#cambria-cluster-rest-api-via-kubectl" class="hash-link" aria-label="Direct link to cambria-cluster-rest-api-via-kubectl" title="Direct link to cambria-cluster-rest-api-via-kubectl">​</a></h3>
<ol>
<li>Run the following command to get the base REST API Web Address:<!-- -->
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get service/cambriaclusterservice -n default      -o=jsonpath=&quot;{&#x27;https://&#x27;}{.status.loadBalancer.ingress[0].hostname}{&#x27;:8650&#x27;}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>The REST API URL should look similar to:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://23-45-226-151.ip.linodeusercontent.com:8650/CambriaFC/v1/Jobs?usertoken=12345678-1234-43f8-b4fc-53afd3893d5f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-cluster-rest-api-via-kubernetes-dashboard">Cambria Cluster REST API (via Kubernetes Dashboard)<a href="#cambria-cluster-rest-api-via-kubernetes-dashboard" class="hash-link" aria-label="Direct link to Cambria Cluster REST API (via Kubernetes Dashboard)" title="Direct link to Cambria Cluster REST API (via Kubernetes Dashboard)">​</a></h3>
<ol>
<li>In the Akamai Kubernetes Dashboard for your cluster, go to <strong>Services</strong> and look for the <code>cambriaclusterservice</code> service. Copy the IP address of one of the External Endpoints.</li>
<li>The REST API should look similar to:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://23-45-226-151.ip.linodeusercontent.com:8650/CambriaFC/v1/Jobs?usertoken=12345678-1234-43f8-b4fc-53afd3893d5f</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-quick-reference-helpful-commandsinfo-for-after-installation-1">10. Quick Reference: Helpful Commands/Info for After Installation<a href="#10-quick-reference-helpful-commandsinfo-for-after-installation-1" class="hash-link" aria-label="Direct link to 10. Quick Reference: Helpful Commands/Info for After Installation" title="Direct link to 10. Quick Reference: Helpful Commands/Info for After Installation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cambria-ftc-instance-external-ip">Cambria FTC Instance External IP<a href="#cambria-ftc-instance-external-ip" class="hash-link" aria-label="Direct link to Cambria FTC Instance External IP" title="Direct link to Cambria FTC Instance External IP">​</a></h3>
<ol>
<li>In the Cambria Cluster WebUI, go to the <strong>Machines</strong> tab and copy the name of the machine (pod)</li>
<li>Run the following commands with the name of the machine (aka. <code>&lt;pod-name&gt;</code>):</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Replace &lt;pod-name&gt; with your pod name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get pod/&lt;pod-name&gt; -n capella-worker -o=jsonpath={.spec.nodeName}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Replace &lt;node-name&gt; with the result from the above command</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get node/&lt;node-name&gt; -n capella-worker -o=jsonpath={.status.addresses[1].address}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="leader-cambria-cluster-pod">Leader Cambria Cluster Pod<a href="#leader-cambria-cluster-pod" class="hash-link" aria-label="Direct link to Leader Cambria Cluster Pod" title="Direct link to Leader Cambria Cluster Pod">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get lease -o=jsonpath=&quot;{.items[0].spec.holderIdentity}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="remote-access-to-kubernetes-pod">Remote Access to Kubernetes Pod<a href="#remote-access-to-kubernetes-pod" class="hash-link" aria-label="Direct link to Remote Access to Kubernetes Pod" title="Direct link to Remote Access to Kubernetes Pod">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl exec -it &lt;pod-name&gt; -n &lt;namespace&gt; -- /bin/bash</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Example with Cambria FTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl exec -it cambriaftcapp-5c79586784-wbfvf -n capella-worker -- /bin/bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extracting-cambria-cluster--cambria-ftc--cambria-license-logs">Extracting Cambria Cluster | Cambria FTC | Cambria License Logs<a href="#extracting-cambria-cluster--cambria-ftc--cambria-license-logs" class="hash-link" aria-label="Direct link to Extracting Cambria Cluster | Cambria FTC | Cambria License Logs" title="Direct link to Extracting Cambria Cluster | Cambria FTC | Cambria License Logs">​</a></h3>
<p>In a machine that has <code>kubectl</code> and the <code>kubeconfig</code> file for your Kubernetes cluster:</p>
<ol>
<li>Open a terminal window</li>
<li>Make sure to set the <code>KUBECONFIG</code> environment variable to the path of your <code>kubeconfig</code> file</li>
<li>Run one or more of the following commands depending on the logs needed</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cambria FTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;pod-name&gt;:/opt/capella/Cambria/Logs ./CambriaFTCLogs -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cambria Cluster</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;pod-name&gt;:/opt/capella/CambriaCluster/Logs ./CambriaClusterLogs -n default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cambria License Manager (Cambria FTC)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;pod-name&gt;:/opt/capella/CambriaLicenseManager/Logs ./CambriaFTCLicLogs -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Cambria License Manager (Cambria Cluster)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp &lt;pod-name&gt;:/opt/capella/CambriaLicenseManager/Logs ./CambriaClusterLicLogs -n default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="copy-files-to-cambria-ftc--cluster-pod">Copy File(s) to Cambria FTC / Cluster Pod<a href="#copy-files-to-cambria-ftc--cluster-pod" class="hash-link" aria-label="Direct link to Copy File(s) to Cambria FTC / Cluster Pod" title="Direct link to Copy File(s) to Cambria FTC / Cluster Pod">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy file to Cambria FTC pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp /mnt/n/MySource.mp4 cambriaftcapp-7c55887db9-t42v7:/var/media/MySource.mp4 -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy file to Cambria Cluster pod</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp C:\MyKeys\MyKeyFile.key cambriaclusterapp-695dcc848f-vjpc7:/var/keys/MyKeyFile.key -n default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Copy directory to Cambria FTC container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl cp /mnt/n/MyMediaFiles cambriaftcapp-7c55887db9-t42v7:/var/temp/mediafiles -n capella-worker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="restarting--re-creating-pods">Restarting / Re-creating Pods<a href="#restarting--re-creating-pods" class="hash-link" aria-label="Direct link to Restarting / Re-creating Pods" title="Direct link to Restarting / Re-creating Pods">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Delete Cambria FTC Container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod cambriaftcapp-7c55887db9-t42v7 -n capella-worker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Delete Cambria Cluster Container</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl delete pod cambriaclusterapp-695dcc848f-vjpc7 -n default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">## 11. Glossary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">This glossary provides a brief definition / description of some of the more common terms found in this guide.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### 11.1. Kubernetes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">For Kubernetes terms, please refer to the Kubernetes Glossary:  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://kubernetes.io/docs/reference/glossary/?fundamental=true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### 11.2. Third-Party Tools</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **Argo**: the Argo third-party system is a collection of tools for orchestrating parallel jobs in a Kubernetes environment.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **Argo-Events**: an Argo tool that triggers specific Kubernetes functions based on events from other dependencies such as webhook, s3, etc.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **Cert-Manager**: the cert-manager addon automates the process of retrieving and managing TLS certificates. These certificates are periodically renewed to keep the certificates up to date and valid.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **Helm**: the Helm third-party tool is used for deploying / managing (install, update, delete) deployments for Kubernetes Cluster applications.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **Ingress-Nginx**: the ingress-nginx addon is an ingress server using Nginx as a reverse proxy and load balancer. In this case, ingress-nginx is used for applying domain name use to the Kubernetes services (REST API, WebUI, etc).  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">### 11.3. Capella Applications</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **cambriaclusterapp**: the Cambria Cluster application container. This container exists in all `cambriaclusterapp-xyz` pods.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **cambriaftautoscale**: this container is used like a load balancer. It spawns new nodes with Cambria FTC specific content whenever Cambria Cluster has jobs in the queue.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **cambriaftcapp**: the Cambria FTC application container. This container exists in all `cambriaftcapp-xyz` pods.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **cambriaftcconnect**: this container is used for automatically connecting Cambria FTC instances to Cambria Cluster. This container exists in all `cambriaftcapp-xyz` pods.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **cambrialeaderelector**: this container is used for Cambria Cluster replication in that it decides which of the Cambria Cluster instances is the primary instance. This container exists in all `cambriaclusterapp-xyz` pods.  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- **pgcluster-capella**: this type of pod holds the PostgreSQL database that Cambria Cluster uses / interacts with.  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Akamai/Akamai-Terraform_Kubernetes/cambria-cluster-ftc-terraform"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cambria Cluster / FTC 5.5.0 - Terraform on Akamai Kubernetes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Cambria FTC/Installation Guides/Kubernetes/Oracle/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cambria Cluster / FTC 5.5.0 - Oracle Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#document-history" class="table-of-contents__link toc-highlight">Document History</a><ul><li><a href="#limitations-and-security-information" class="table-of-contents__link toc-highlight">Limitations and Security Information</a></li></ul></li><li><a href="#️-important-before-you-begin" class="table-of-contents__link toc-highlight">⚠️ Important: Before You Begin</a></li><li><a href="#️-critical-information-read-before-proceeding-with-installation" class="table-of-contents__link toc-highlight">⚠️ Critical Information: Read Before Proceeding with Installation</a></li><li><a href="#1-overview" class="table-of-contents__link toc-highlight">1. Overview</a><ul><li><a href="#11-cambria-cluster--ftc-kubernetes-deployment" class="table-of-contents__link toc-highlight">1.1. Cambria Cluster / FTC Kubernetes Deployment</a></li><li><a href="#12-resource-usage" class="table-of-contents__link toc-highlight">1.2. Resource Usage</a></li></ul></li><li><a href="#benchmark-job-information" class="table-of-contents__link toc-highlight">Benchmark Job Information</a></li><li><a href="#a-g6-dedicated-16--amd-epyc-7713-" class="table-of-contents__link toc-highlight">a. g6-dedicated-16 [ AMD EPYC 7713 ]</a><ul><li><a href="#machine-info" class="table-of-contents__link toc-highlight">Machine Info</a></li><li><a href="#benchmark-results" class="table-of-contents__link toc-highlight">Benchmark Results</a></li></ul></li><li><a href="#b-g6-dedicated-64--amd-epyc-7713-" class="table-of-contents__link toc-highlight">b. g6-dedicated-64 [ AMD EPYC 7713 ]</a><ul><li><a href="#machine-info-1" class="table-of-contents__link toc-highlight">Machine Info</a></li><li><a href="#benchmark-results-1" class="table-of-contents__link toc-highlight">Benchmark Results</a></li><li><a href="#benchmark-findings" class="table-of-contents__link toc-highlight">Benchmark Findings</a></li></ul></li><li><a href="#14-cambria-application-access" class="table-of-contents__link toc-highlight">1.4. Cambria Application Access</a><ul><li><a href="#141-external-access-via-tcp-load-balancer" class="table-of-contents__link toc-highlight">1.4.1. External Access via TCP Load Balancer</a></li><li><a href="#142-http-ingress-via-reverse-proxy" class="table-of-contents__link toc-highlight">1.4.2. HTTP Ingress via Reverse Proxy</a></li><li><a href="#15-firewall-information" class="table-of-contents__link toc-highlight">1.5. Firewall Information</a></li></ul></li><li><a href="#2-prerequisites" class="table-of-contents__link toc-highlight">2. Prerequisites</a><ul><li><a href="#21-tools-kubectl-and-helm" class="table-of-contents__link toc-highlight">2.1. Tools: Kubectl and Helm</a></li></ul></li><li><a href="#3-create-kubernetes-cluster" class="table-of-contents__link toc-highlight">3. Create Kubernetes Cluster</a><ul><li><a href="#31-create-lke-cluster-and-cambria-cluster-node-group" class="table-of-contents__link toc-highlight">3.1. Create LKE Cluster and Cambria Cluster Node Group</a></li><li><a href="#32-optional-restricting-cambria-ftc-encoder-designated-nodes-via-exclusion-label" class="table-of-contents__link toc-highlight">3.2. (Optional) Restricting Cambria FTC Encoder Designated Nodes via Exclusion Label</a></li><li><a href="#33-create-cambria-ftc-node-groups" class="table-of-contents__link toc-highlight">3.3. Create Cambria FTC Node Group(s)</a></li><li><a href="#34-gpu-operator-for-nvenc" class="table-of-contents__link toc-highlight">3.4. GPU Operator for NVENC</a></li><li><a href="#35-performance-metrics-and-logging" class="table-of-contents__link toc-highlight">3.5. Performance Metrics and Logging</a></li></ul></li><li><a href="#4-install-cambria-cluster-ftc-and-dependencies" class="table-of-contents__link toc-highlight">4. Install Cambria Cluster, FTC, and Dependencies</a><ul><li><a href="#41-prerequisite-deploy-external-kubernetes-tools" class="table-of-contents__link toc-highlight">4.1. Prerequisite: Deploy External Kubernetes Tools</a></li><li><a href="#412-optional-ingress-nginx-continued" class="table-of-contents__link toc-highlight">4.1.2. (Optional) Ingress-Nginx (continued)</a></li><li><a href="#42-creating-and-editing-helm-configuration-file" class="table-of-contents__link toc-highlight">4.2. Creating and Editing Helm Configuration File</a></li><li><a href="#cambriaclusterconfigyaml-explanation" class="table-of-contents__link toc-highlight">cambriaClusterConfig.yaml Explanation</a></li></ul></li><li><a href="#43-installing-cambria-ftc--cluster" class="table-of-contents__link toc-highlight">4.3. Installing Cambria FTC / Cluster</a></li><li><a href="#5-verify-cambria-ftc--cluster-installation" class="table-of-contents__link toc-highlight">5. Verify Cambria FTC / Cluster Installation</a><ul><li><a href="#51-verify-cambria-cluster-deployment" class="table-of-contents__link toc-highlight">5.1. Verify Cambria Cluster Deployment</a></li><li><a href="#52-verify-cambria-ftc-deployment" class="table-of-contents__link toc-highlight">5.2. Verify Cambria FTC Deployment</a></li><li><a href="#53-verify-applications-are-accessible" class="table-of-contents__link toc-highlight">5.3. Verify Applications are Accessible</a></li><li><a href="#532-cambria-cluster-rest-api" class="table-of-contents__link toc-highlight">5.3.2. Cambria Cluster REST API</a></li><li><a href="#533-cambria-ingress" class="table-of-contents__link toc-highlight">5.3.3. Cambria Ingress</a></li><li><a href="#5332-test-ingress-endpoints" class="table-of-contents__link toc-highlight">5.3.3.2. Test Ingress Endpoints</a></li><li><a href="#534-cambria-license" class="table-of-contents__link toc-highlight">5.3.4. Cambria License</a></li></ul></li><li><a href="#6-testing-cambria-ftc--cluster" class="table-of-contents__link toc-highlight">6. Testing Cambria FTC / Cluster</a></li><li><a href="#7-updating--upgrading-cambria-cluster--ftc" class="table-of-contents__link toc-highlight">7. Updating / Upgrading Cambria Cluster / FTC</a><ul><li><a href="#71-option-1-normal-upgrade-via-helm-upgrade" class="table-of-contents__link toc-highlight">7.1. Option 1: Normal Upgrade via Helm Upgrade</a></li><li><a href="#72-option-2-upgrade-via-cambria-cluster-reinstallation" class="table-of-contents__link toc-highlight">7.2. Option 2: Upgrade via Cambria Cluster Reinstallation</a></li><li><a href="#73-upgrade-verification" class="table-of-contents__link toc-highlight">7.3. Upgrade Verification</a></li></ul></li><li><a href="#8-deleting-kubernetes-cluster" class="table-of-contents__link toc-highlight">8. Deleting Kubernetes Cluster</a></li><li><a href="#9-quick-reference-installation-testing-and-teardown" class="table-of-contents__link toc-highlight">9. Quick Reference: Installation, Testing, and Teardown</a><ul><li><a href="#91-installation-deploy-from-linux-to-akamai-cloud-kubernetes" class="table-of-contents__link toc-highlight">9.1. Installation (Deploy from Linux to Akamai Cloud Kubernetes)</a></li><li><a href="#92-upgrades-and-teardown" class="table-of-contents__link toc-highlight">9.2. Upgrades and Teardown</a></li></ul></li><li><a href="#10-quick-reference-helpful-commandsinfo-for-after-installation" class="table-of-contents__link toc-highlight">10. Quick Reference: Helpful Commands/Info for After Installation</a><ul><li><a href="#akamai-kubernetes-kubeconfig-file-for-use-with-kubectl-and-akamai-kubernetes-dashboard" class="table-of-contents__link toc-highlight">Akamai Kubernetes Kubeconfig File [For use with <code>kubectl</code> and Akamai Kubernetes Dashboard]</a></li><li><a href="#akamai-kubernetes-dashboard" class="table-of-contents__link toc-highlight">Akamai Kubernetes Dashboard</a></li><li><a href="#cambria-cluster-webui-via-kubectl" class="table-of-contents__link toc-highlight">Cambria Cluster WebUI (via <code>kubectl</code>)</a></li><li><a href="#cambria-cluster-webui-via-kubernetes-dashboard" class="table-of-contents__link toc-highlight">Cambria Cluster WebUI (via Kubernetes Dashboard)</a></li><li><a href="#cambria-cluster-rest-api-via-kubectl" class="table-of-contents__link toc-highlight">Cambria Cluster REST API (via <code>kubectl</code>)</a></li><li><a href="#cambria-cluster-rest-api-via-kubernetes-dashboard" class="table-of-contents__link toc-highlight">Cambria Cluster REST API (via Kubernetes Dashboard)</a></li></ul></li><li><a href="#10-quick-reference-helpful-commandsinfo-for-after-installation-1" class="table-of-contents__link toc-highlight">10. Quick Reference: Helpful Commands/Info for After Installation</a><ul><li><a href="#cambria-ftc-instance-external-ip" class="table-of-contents__link toc-highlight">Cambria FTC Instance External IP</a></li><li><a href="#leader-cambria-cluster-pod" class="table-of-contents__link toc-highlight">Leader Cambria Cluster Pod</a></li><li><a href="#remote-access-to-kubernetes-pod" class="table-of-contents__link toc-highlight">Remote Access to Kubernetes Pod</a></li><li><a href="#extracting-cambria-cluster--cambria-ftc--cambria-license-logs" class="table-of-contents__link toc-highlight">Extracting Cambria Cluster | Cambria FTC | Cambria License Logs</a></li><li><a href="#copy-files-to-cambria-ftc--cluster-pod" class="table-of-contents__link toc-highlight">Copy File(s) to Cambria FTC / Cluster Pod</a></li><li><a href="#restarting--re-creating-pods" class="table-of-contents__link toc-highlight">Restarting / Re-creating Pods</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/about-capella" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/newsfeed" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsfeed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria%20Stream/Installation%20Guides/Kubernetes/AWS/placeholder" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria Stream<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria%20FTC/Installation%20Guides/Kubernetes/AWS/Akamai_Linode_Kubernetes_CambriaClusterFTC_Installation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria FTC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Other</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/terms-of-use" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/online-privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Capella Systems</div></div></div></footer></div>
</body>
</html>