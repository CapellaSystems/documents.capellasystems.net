<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Cambria FTC/Tutorials/cluster-redundancy" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Capella Cambria Cluster Redundancy Feature | Capella Documents</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://documents.capellasystems.net/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://documents.capellasystems.net/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://documents.capellasystems.net/docs/Cambria FTC/Tutorials/cluster-redundancy"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Capella Cambria Cluster Redundancy Feature | Capella Documents"><meta data-rh="true" name="description" content="Version: V2 #8426"><meta data-rh="true" property="og:description" content="Version: V2 #8426"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://documents.capellasystems.net/docs/Cambria FTC/Tutorials/cluster-redundancy"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria FTC/Tutorials/cluster-redundancy" hreflang="en"><link data-rh="true" rel="alternate" href="https://documents.capellasystems.net/docs/Cambria FTC/Tutorials/cluster-redundancy" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Capella Documents RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Capella Documents Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ac183f09.css">
<script src="/assets/js/runtime~main.24fd22e6.js" defer="defer"></script>
<script src="/assets/js/main.71aa207d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Capella Documentation</b></a><a class="navbar__item navbar__link" href="/docs/Cambria Stream/Installation Guides/Kubernetes/AWS/cambria_stream_aws_kubernetes/">Cambria Stream</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/Akamai_Linode_Kubernetes_CambriaClusterFTC_Installation">Cambria FTC</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/Installation Guides/Kubernetes/AWS/Akamai_Linode_Kubernetes_CambriaClusterFTC_Installation">Installation Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/Release Notes/FTC v5.5 to v4.0">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/API/API_Methods">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Cambria FTC/Tutorials/Arib-stdb3/">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/Arib-stdb3/">Cambria FTC ARIB STD B37 Captions Extraction and Conversion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Cambria FTC/Tutorials/cluster-redundancy">Capella Cambria Cluster Redundancy Feature</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/Color Space Coversion/">Cambria FTC Color Space Conversion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/Harmonic VOS Upload Guide/">FTC Harmonic VOS Upload Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/NexGuardFTC_Guide/">NexGuard Filter for Capella Cambria FTC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/Using the Teletrax Watermarking Filter on Cambria/">Using the Teletrax Watermarking Filter on Cambria</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/XML Titler with Carbon Subtitle Workflow/">Carbon Subtitle XML Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/avid_ftc/">AVID FTC Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/aws_ami_creation_editing/">AMI Creation and Editing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cambria-ftc-stt">Speech-To-Text Filter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/delete_source/">Delete Source after Transcoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/ftc-and-cluster-trusted-executables">Cambria FTC and Cluster Trusted Executables and Scripts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/payg-licensing">Pay As You Go Licensing Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/postgres_migration/">Cambria FTC and Cluster 5.0: Database Migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Cambria FTC/Tutorials/scriptable_workflow_guide/">Scriptable Workflow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Cambria FTC/FAQ/placeholder">FAQ</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorials</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Capella Cambria Cluster Redundancy Feature</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Capella Cambria Cluster Redundancy Feature</h1></header>
<p><strong>Version:</strong> V2 #8426</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="document-history">Document History<a href="#document-history" class="hash-link" aria-label="Direct link to Document History" title="Direct link to Document History">​</a></h2>
<table><thead><tr><th>Version</th><th>Description</th><th>Date</th></tr></thead><tbody><tr><td>Draft 0.1</td><td>First draft of the documentation</td><td>Jan 21, 2015</td></tr><tr><td>Draft 0.2</td><td>Second draft of the documentation</td><td>Feb 18, 2015</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Cambria Cluster Manager is very powerful and can manage multiple Cambria FC
machines for distribution of jobs redundantly. If any machine becomes unavailable, such as
due to crashes, network disconnection, unexpected reboots, etc, Cambria Cluster can detect
so and reassign jobs to other available machines automatically.</p>
<p>However, there is no mechanism to add redundancy for the Cambria Cluster Manager
itself previously. To resolve this, Cambria Cluster Redundancy is introduced. It allows users to
configure 2 machines as Cambria Cluster Manager, while only one of them is active, and the
other one serves as backup. When the main machine becomes unavailable, the backup
machine will takeover, and resume Cluster Manager’s role.</p>
<p>Such redundancy added by Cluster Redundancy is implemented via PostgreSQL
database replication, such that, all data in the database are mirrored in real time, reliably. This
document provides instructions in setting up, testing, verifying, and troubleshooting the Cluster
Redundancy.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="naming-conventions">Naming Conventions<a href="#naming-conventions" class="hash-link" aria-label="Direct link to Naming Conventions" title="Direct link to Naming Conventions">​</a></h2>
<table><thead><tr><th>Term</th><th>Description</th></tr></thead><tbody><tr><td><strong>Redundancy Role</strong></td><td>Can be <strong>Primary</strong>, <strong>Backup</strong>, or <strong>No Backup</strong></td></tr><tr><td><strong>Redundancy Primary</strong></td><td>Machine running <strong>Cambria Cluster</strong> as the active <strong>Primary Manager</strong></td></tr><tr><td><strong>Redundancy Backup</strong></td><td>Machine running <strong>Cambria Cluster</strong> as the <strong>Backup Manager</strong></td></tr><tr><td><strong>Cluster Machine</strong></td><td>Any <strong>non-redundant</strong> machine in the cluster</td></tr><tr><td><strong>Client Machine</strong></td><td>Machine running <strong>Cambria FTC</strong></td></tr><tr><td><strong>Redundancy Triggering</strong></td><td>Process where the <strong>Backup</strong> takes over as <strong>Primary</strong> when failure occurs</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="redundancy-trigger-criteria">Redundancy Trigger Criteria<a href="#redundancy-trigger-criteria" class="hash-link" aria-label="Direct link to Redundancy Trigger Criteria" title="Direct link to Redundancy Trigger Criteria">​</a></h2>
<p>For redundancy to activate, the following <strong>conditions must be met</strong>:</p>
<ol>
<li>
<p>“Redundancy Primary” is offline (in the perspective of “Redundancy Backup”). That is,
“Redundancy Backup” does not receive broadcast from “Redundancy Primary”.</p>
</li>
<li>
<p>“Redundancy Backup” is online. That is, it receives broadcast from any of the “Client
machine”.</p>
</li>
<li>
<p>The timestamp of (2) is 30s greater than (1). Basically, “Redundancy Primary” was
offline for more than 30s during “Redundancy Backup” is online.</p>
</li>
</ol>
<p>Note that this covers the case of both machines are offline. As long as “Redundancy Backup”
is back online within 30s of when “Redundancy Primary” is back online, redundancy won’t
trigger.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-backed-up">What is Backed Up?<a href="#what-is-backed-up" class="hash-link" aria-label="Direct link to What is Backed Up?" title="Direct link to What is Backed Up?">​</a></h2>
<p>The PostgreSQL database** is mirrored, which includes:</p>
<ul>
<li>
<p><strong>Job List</strong></p>
</li>
<li>
<p><strong>Watch Folder Settings</strong></p>
</li>
<li>
<p><strong>Client Machine List</strong></p>
</li>
<li>
<p><strong>Options &amp; Preferences</strong></p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expected-behavior--important-notes">Expected Behavior &amp; Important Notes<a href="#expected-behavior--important-notes" class="hash-link" aria-label="Direct link to Expected Behavior &amp; Important Notes" title="Direct link to Expected Behavior &amp; Important Notes">​</a></h2>
<p>-Redundancy should triggers according to “Redundancy trigger criteria”.</p>
<ul>
<li>
<p>When the machine is configured to be “Redundancy Backup”, its existing database will
be wiped and will mirror/replicate specified “Redundancy Primary” database. Hence,
please be careful when changing “Redundancy Role”</p>
</li>
<li>
<p>Redundancy Feature is Dongle protected. When the dongle expires, Cluster service will
no longer work (and hence affecting Redundancy). Hence, it is a must that customer
dongles are not programmed to expire within days for each dongles. It also implies that
dongles should not be removed at the same time.</p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="limitations">Limitations<a href="#limitations" class="hash-link" aria-label="Direct link to Limitations" title="Direct link to Limitations">​</a></h2>
<ol>
<li>
<p>User must configure “Redundancy Primary” before “Redundancy Backup”</p>
</li>
<li>
<p>Database passwords are stored locally – users should secure machines.</p>
</li>
<li>
<p>Database replication is not encrypted.**</p>
</li>
<li>
<p>Backup Cluster Manager is read-only – no encoding jobs can be run on it.</p>
</li>
<li>
<p>For “Redundancy Backup”, no encoding can be made locally.</p>
</li>
<li>
<p>Fast internet connections and disk I/O is required for “Redundancy Primary” and
“Redundancy Backup”.</p>
</li>
<li>
<p>For “Redundancy Primary”, we expect that PostgreSQL database requires additional
1GB of disk space to store temporarily file (vs “No Backup”).</p>
</li>
<li>
<p>Because of the replication nature, we expect that the “Redundancy Backup” is identical
to “Redundancy Primary” in terms of machine spec, configurations, as well as internet
connections. This minimizes possibilities of behavioral difference after “Redundancy
Triggers”.</p>
</li>
<li>
<p>Due to demanding internet connections requirement, Ethernet connections are expected.</p>
</li>
<li>
<p>Due to technical limitation of PostgreSQL database replication, it cannot handle IP
changes. So, both “Redundancy Primary” and “Redundancy Backup” should be assigned
with static IP. Please consult network administrators for such settings.</p>
</li>
<li>
<p>Only 1:1 backup is supported. That is, multiple “Redundancy Backups” are not supported
for one “Redundancy Primary”.</p>
</li>
<li>
<p>“Redundancy Primary” and “Redundancy Backup” must be in same subnet.</p>
</li>
<li>
<p>Only single “Redundancy Primary” can exist in same subnet.</p>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-configure-redundancy">How to Configure Redundancy<a href="#how-to-configure-redundancy" class="hash-link" aria-label="Direct link to How to Configure Redundancy" title="Direct link to How to Configure Redundancy">​</a></h2>
<ol>
<li>
<p>Prepare two machines for Cambria Cluster – Machine <strong>A</strong> (Primary) and Machine <strong>B</strong> (Backup).<br>
<!-- -->Also prepare a <strong>Client Machine C</strong>.</p>
</li>
<li>
<p>Ensure both A &amp; B have dongles with the Redundancy Feature enabled.</p>
</li>
<li>
<p>In Redundancy tab of A and B, Role should be &quot;No Backup&quot;. Clicking &quot;Redundancy log&quot;
will show:</p>
</li>
</ol>
<ul>
<li>[No Backup] [Information] All Cluster executables are started, operating…</li>
<li>[No Backup] [Information] Starting all Cluster executables…</li>
</ul>
<ol start="4">
<li>
<p>For A, in “Cluster Machine Info” tab, Machine C should appear as “Standby”. Set it to
“Online” by setting it to be “Connect machine to Cluster”. When jobs are generated in A
through Watch Folder or Cluster FileConvert application, they should be automatically
assigned to C.</p>
</li>
<li>
<p>For A, in “Redundancy” tab, click “Configure” and change Redundancy Role to “Primary”.
Note that you must put in machine B&#x27;s IP as &quot;Backup IP&quot;, eg, 10.0.0.45 (Machine B’s IP
can be obtained from the Redundancy tab in B). Click Apply. Note that “UAC” popup will
be shown and administrative privilege is required (for configuring PostgreSQL database)</p>
</li>
<li>
<p>Wait 30 seconds** for settings to apply.</p>
</li>
<li>
<p>Now, we work on Machine B. Similar to step 5, configure B to be “Backup”. Note that you
must put in machine A&#x27;s IP as &quot;Primary IP&quot;. Click Apply similarly.</p>
</li>
<li>
<p>It can take 30s to a few minutes to apply the changes. The time taken varies greatly with
existing database size in Machine A.</p>
</li>
<li>
<p>Machine A will show these in “Redundancy Log”:</p>
</li>
</ol>
<ul>
<li>[Primary] [Information] All Cluster executables are started, operating...</li>
<li>[Primary] [Information] Database is now in redundancy mode. Starting all Cluster executables</li>
</ul>
<ol start="10">
<li>Machine B will show these in “Redundancy Log”:</li>
</ol>
<ul>
<li>This machine is a backup machine and is backing up database. Redundancy log is not available</li>
</ul>
<ol start="11">
<li>To identify that the redundancy actually works, following indicators can be observed:
For Machine A:</li>
</ol>
<ul>
<li>“Last Error” shows “No error”</li>
<li>“Backup machine IP address” shows configured “Redundancy Backup” IP address</li>
<li>“Backup machine state” shows “Connected/Working”</li>
<li>“Primary Health” should be green,
For Machine B:</li>
<li>“Last Error” shows “No error”</li>
<li>“Backup Health” should be green.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-test-redundancy-manually">How to Test Redundancy Manually<a href="#how-to-test-redundancy-manually" class="hash-link" aria-label="Direct link to How to Test Redundancy Manually" title="Direct link to How to Test Redundancy Manually">​</a></h2>
<ol>
<li>On <strong>Machine A</strong>, go to <strong>Redundancy Tab</strong> → Set Role to <strong>Stopped</strong>.</li>
<li>On <strong>Machine B</strong>, wait <strong>30 seconds</strong> → It will automatically switch to <strong>Primary</strong>.</li>
<li><strong>Machine B becomes the new Primary Cluster Manager.</strong></li>
<li>Machine B’s status will show <strong>&quot;Primary (Redundancy Triggered).&quot;</strong></li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="handling-a-redundancy-trigger-event">Handling a Redundancy Trigger Event<a href="#handling-a-redundancy-trigger-event" class="hash-link" aria-label="Direct link to Handling a Redundancy Trigger Event" title="Direct link to Handling a Redundancy Trigger Event">​</a></h2>
<ol>
<li>
<p>Let’s say, Machine A was a “Redundancy Primary”, Machine B was a “Redundancy
Backup”, and now, Redundancy triggered and Machine A is “Stopped” and Machine B’s
Redundancy Role is “Primary (Redundancy triggered)”.</p>
</li>
<li>
<p>To remove the warnings for Machine B (due to Redundancy triggered), change its role to
“Primary”</p>
</li>
<li>
<p>Note that by following steps below, Machine A’s database will be wiped. It is important
that user should verify the database in Machine B and the Cluster is operating fine
before proceeding.</p>
</li>
<li>
<p>After Machine A is fixed (eg, due to network outage, rebooted, etc), configure its
Redundancy Role to be “Redundancy Backup” and put Machine B’s IP as “Primary IP” in
Machine A. Apply.</p>
</li>
<li>
<p>Machine A will become “Redundancy Backup” and replicating/backing up from Machine
B. These 5 steps are required and have to be initiated from user, otherwise, no further
Redundancy can be triggered.</p>
</li>
<li>
<p>User can use above section (“How to trigger Redundancy manually”) to cause Machine
A to become “Redundancy Primary” again. However, Redundancy feature is designed
such that machines are anonymous in nature. When users use same spec machines for
A and B and configured them similarly, both machines should be comfortable to be
“Redundancy Primary”. Hence, such additional redundancy processing should be not
necessary</p>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="handling-database-corruption-or-redundancy-errors">Handling Database Corruption or Redundancy Errors<a href="#handling-database-corruption-or-redundancy-errors" class="hash-link" aria-label="Direct link to Handling Database Corruption or Redundancy Errors" title="Direct link to Handling Database Corruption or Redundancy Errors">​</a></h2>
<ul>
<li>
<p>Redundancy feature requires corresponding license. Without such dongle/software
license, such feature is not available.</p>
</li>
<li>
<p>Database can be corrupted or become unable to handle any request, when database
configuration or initial backup phase is interrupted.</p>
</li>
</ul>
<p>-Database can be in “read-only” state as configured by Cluster Redundancy</p>
<p>-With Redundancy feature, user can set the machine back to “No Backup” and then to
desired Role. This will resolve most unexpected issues</p>
<ul>
<li>Without Redundancy feature, user can use “PostgreSQL Database Fixer” to rebuild the
database. Such tool can be found in “C:\Program Files
(x86)\Capella\CambriaCluster\CpPostgresDbFixer.exe”</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Cambria FTC/04-Tutorials/Capella Cambria Cluster.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Cambria FTC/Tutorials/Arib-stdb3/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cambria FTC ARIB STD B37 Captions Extraction and Conversion</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Cambria FTC/Tutorials/Color Space Coversion/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cambria FTC Color Space Conversion</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#document-history" class="table-of-contents__link toc-highlight">Document History</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#naming-conventions" class="table-of-contents__link toc-highlight">Naming Conventions</a></li><li><a href="#redundancy-trigger-criteria" class="table-of-contents__link toc-highlight">Redundancy Trigger Criteria</a></li><li><a href="#what-is-backed-up" class="table-of-contents__link toc-highlight">What is Backed Up?</a></li><li><a href="#expected-behavior--important-notes" class="table-of-contents__link toc-highlight">Expected Behavior &amp; Important Notes</a></li><li><a href="#limitations" class="table-of-contents__link toc-highlight">Limitations</a></li><li><a href="#how-to-configure-redundancy" class="table-of-contents__link toc-highlight">How to Configure Redundancy</a></li><li><a href="#how-to-test-redundancy-manually" class="table-of-contents__link toc-highlight">How to Test Redundancy Manually</a></li><li><a href="#handling-a-redundancy-trigger-event" class="table-of-contents__link toc-highlight">Handling a Redundancy Trigger Event</a></li><li><a href="#handling-database-corruption-or-redundancy-errors" class="table-of-contents__link toc-highlight">Handling Database Corruption or Redundancy Errors</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/about-capella" target="_blank" rel="noopener noreferrer" class="footer__link-item">About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/newsfeed" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsfeed<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/contact-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria%20Stream/Installation%20Guides/Kubernetes/AWS/placeholder" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria Stream<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://documents.capellasystems.net/docs/Cambria%20FTC/Installation%20Guides/Kubernetes/AWS/Akamai_Linode_Kubernetes_CambriaClusterFTC_Installation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cambria FTC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Other</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.capellasystems.net/terms-of-use" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.capellasystems.net/online-privacy-policy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Capella Systems</div></div></div></footer></div>
</body>
</html>